<?php global $zym_decrypt;$zym_decrypt['ÁÖˆÁ®ÄÖÁÃÖ”Ã¾ˆÃÃ¥Ö®¥‹Áı¯ÀÃ®‹®']=base64_decode('bWVzc2FnZQ==');$zym_decrypt['®ˆ¾¯ÖÖ”Ã‹Ö‹‹ÖÖˆ‹¥”ıÖÀÃ‹ÖÖÃÁˆÃÄ¾']=base64_decode('aW5fYXJyYXk=');$zym_decrypt['¥‹¯¯””Á®ÀÖÀÖÃ¯®Ä¯¾ÁÖ®Á‹¾ı¾ÁÀ‹®']=base64_decode('c3Ryc3Ry');$zym_decrypt['‹¥ı‹”ÖÁÁÃ¾”¥®ÖÁ”Ö‹Ö¯ˆ‹ÄÖÖ‹ÖÖ‹']=base64_decode('aXNfYXJyYXk=');$zym_decrypt['ÁÖˆÃÃıˆÄ”Ã®¾Ã”¯ˆÁÄ¾ÁÃˆ¥‹¯¾¯®Ä¯']=base64_decode('cGRvX2ZldGNo');$zym_decrypt['¥¾Ö¥ˆÖÖ”ÀÁÃÁÖ‹®‹ıÀÃ”Ö‹”¯ÀÖÀÀÖÖ']=base64_decode('dGFibGVuYW1l');$zym_decrypt['ÄıÖ®®®®¥ˆÃÖˆ¥ÖÄıˆ¥ÁÀ¯¥ÖÁ®Ä”¥']=base64_decode('cGRvX3VwZGF0ZQ==');$zym_decrypt['ÁÖÄÁıÁ¯Á”ÃÖÃÀ¯ı”¾¯ÀÄÃÁ¥Ö‹”ı']=base64_decode('bWNfY3JlZGl0X3VwZGF0ZQ==');$zym_decrypt['”¯ÀıÃ‹¾‹ˆıı‹”ı¾Ö®Á‹ÃÀÁ”ˆ”¥ıÄÃ®']=base64_decode('YWJz'); ?>
<?php
global $_W, $_GPC;$settings =$this->module['config'];if ($settings['switch'] == 0){$GLOBALS['zym_decrypt']['ÁÖˆÁ®ÄÖÁÃÖ”Ã¾ˆÃÃ¥Ö®¥‹Áı¯ÀÃ®‹®']('ç§¯åˆ†å•†åŸå·²å…³é—­ï¼', '', 'error');}$request_array =$_GPC;foreach ($request_array as $key => $val){$unsetkeyarr =array('i', 'do', 'm', 'c');if ($GLOBALS['zym_decrypt']['®ˆ¾¯ÖÖ”Ã‹Ö‹‹ÖÖˆ‹¥”ıÖÀÃ‹ÖÖÃÁˆÃÄ¾']($key, $unsetkeyarr)|| $GLOBALS['zym_decrypt']['¥‹¯¯””Á®ÀÖÀÖÃ¯®Ä¯¾ÁÖ®Á‹¾ı¾ÁÀ‹®']($key, '__')){unset($request_array[$key]);}}$ret =$this->parseCreditNotify($settings['appkey'], $settings['appsecret'], $request_array);if ($GLOBALS['zym_decrypt']['‹¥ı‹”ÖÁÁÃ¾”¥®ÖÁ”Ö‹Ö¯ˆ‹ÄÖÖ‹ÖÖ‹']($ret)&& $ret['success'] == "true"){$order =$GLOBALS['zym_decrypt']['ÁÖˆÃÃıˆÄ”Ã®¾Ã”¯ˆÁÄ¾ÁÃˆ¥‹¯¾¯®Ä¯']("SELECT * FROM " . $GLOBALS['zym_decrypt']['¥¾Ö¥ˆÖÖ”ÀÁÃÁÖ‹®‹ıÀÃ”Ö‹”¯ÀÖÀÀÖÖ']($this->tableduiba). " WHERE  uniacid = :uniacid AND orderNum = :orderNum ", array(':uniacid' => $_W['uniacid'], ':orderNum' => $ret['orderNum']));if ($order['status'] == 0){$result =$GLOBALS['zym_decrypt']['ÄıÖ®®®®¥ˆÃÖˆ¥ÖÄıˆ¥ÁÀ¯¥ÖÁ®Ä”¥']($this->tableduiba, array('status' => 1, 'endtimestamp' => $request_array['timestamp']), array('id' => $order['id']));if (!empty($result)){die('ok');}}elseif ($order['status'] == 1){die('ok');}}elseif ($GLOBALS['zym_decrypt']['‹¥ı‹”ÖÁÁÃ¾”¥®ÖÁ”Ö‹Ö¯ˆ‹ÄÖÖ‹ÖÖ‹']($ret)&& $ret['success'] == "false"){$order =$GLOBALS['zym_decrypt']['ÁÖˆÃÃıˆÄ”Ã®¾Ã”¯ˆÁÄ¾ÁÃˆ¥‹¯¾¯®Ä¯']("SELECT * FROM " . $GLOBALS['zym_decrypt']['¥¾Ö¥ˆÖÖ”ÀÁÃÁÖ‹®‹ıÀÃ”Ö‹”¯ÀÖÀÀÖÖ']($this->tableduiba). " WHERE  uniacid = :uniacid  AND orderNum = :orderNum ", array(':uniacid' => $_W['uniacid'], ':orderNum' => $ret['orderNum']));if ($order['status'] != 2){$result =$GLOBALS['zym_decrypt']['ÄıÖ®®®®¥ˆÃÖˆ¥ÖÄıˆ¥ÁÀ¯¥ÖÁ®Ä”¥']($this->tableduiba, array('status' => 2, 'endtimestamp' => $request_array['timestamp']), array('id' => $order['id']));if (!empty($result)){$updatecredit =$GLOBALS['zym_decrypt']['ÁÖÄÁıÁ¯Á”ÃÖÃÀ¯ı”¾¯ÀÄÃÁ¥Ö‹”ı']($request_array["uid"], 'credit1', $GLOBALS['zym_decrypt']['”¯ÀıÃ‹¾‹ˆıı‹”ı¾Ö®Á‹ÃÀÁ”ˆ”¥ıÄÃ®']($request_array["credits"]), array("å…‘å§", "å…‘å§å…‘æ¢å¤±è´¥ï¼Œé€€è¿˜ç§¯åˆ†"));if (!empty($updatecredit)){die('ok');}}}elseif ($order['status'] == 2){die('ok');}}