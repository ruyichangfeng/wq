<?php
 class PayController extends MobileBaseController { public $size = 10; public function index() { goto LBY1M; MTrNb: $data["\x71\x72\x5f\143\x6f\144\x65"] = $this->module["\x63\157\156\146\151\147"]["\161\162\137\x63\x6f\144\x65"]; goto b6cfv; qownG: $this->assign($data); goto PIS7O; b6cfv: $data["\165\163\145\162"] = $this->MemberModel->getOne(["\151\x64" => $this->uid]); goto qownG; LBY1M: $data["\x74\151\x74\154\145"] = "\351\207\221\xe9\242\x9d\346\217\220\347\216\260"; goto ggvRl; PIS7O: $this->display(); goto sJ14P; ggvRl: $data["\x66\141\x73\164\137\155\145\156\x75"] = false; goto MTrNb; sJ14P: } public function pay() { goto L6RzN; oeILX: if ($update_commision) { goto UcoAV; } goto XsY36; wbYLz: $this->ajaxReturn(399, "\346\x9c\x80\344\xbd\x8e\346\217\220\xe7\216\260\xe9\x87\x91\xe9\242\x9d\40\x31\x20\xe5\205\203"); goto Olh2c; PegoH: $this->ajaxReturn(0, ''); goto nF12K; w1Bkk: $this->ajaxReturn(404, "\xe6\x8f\220\xe7\x8e\xb0\345\xa4\261\xe8\264\245\x33"); goto Ecl14; Aunlu: $user = $this->MemberModel->getOne(["\x69\x64" => $this->uid]); goto UVR9Y; akEKx: $red_pack_update = $this->RedPackModel->update(["\151\x64" => $redpack_id], ["\163\164\141\x74\x75\x73" => 1, "\x73\145\x6e\144\x5f\154\x69\x73\164\151\x64" => $result["\163\x65\x6e\x64\137\154\x69\163\x74\x69\x64"]]); goto JYOGA; z2yG4: goto cAGDV; goto sbJTN; X_LOD: $this->ajaxReturn(402, "\xe6\217\220\xe7\216\260\345\xa4\261\350\264\xa5\x31"); goto Su8r8; oc7wJ: $billno = substr($this->getOrderId() . date("\171\155\x64\x48\x69\163") . random(2, 1), 0, 28); goto oAPPg; Dr5wF: nRbjm: goto oiBfn; sbJTN: qgTVr: goto akEKx; Olh2c: SINVP: goto Aunlu; QuJec: $this->ajaxReturn(400, "\351\207\x91\xe9\xa2\x9d\xe5\x86\xbb\xe7\273\x93"); goto Dr5wF; N9XmD: $config = $this->site->configs; goto pOCwH; aoLcI: if ($send_pack["\x65\162\162\x5f\143\x6f\144\x65"] == "\x53\125\x43\103\105\x53\123") { goto qgTVr; } goto RrthB; jlhId: Eyah6: goto PegoH; Kh9_C: if ($redpack_id) { goto P_xx_; } goto X_LOD; nF12K: cAGDV: goto w1Bkk; Su8r8: P_xx_: goto nKlOU; oiBfn: $money = floatval($_POST["\155\157\156\145\x79"]); goto aTqb5; NIRH4: M0Ydm: goto hhLwI; iu0UF: $result = unserialize($send_pack["\162\145\x74\165\x72\156\137\155\x73\x67"]); goto aoLcI; oAPPg: $data = ["\167\145\x69\144" => $this->W["\167\145\x69\x64"], "\165\151\144" => $this->uid, "\x62\x69\154\x6c\156\157" => $billno, "\x6d\157\156\x65\171" => $money, "\143\x72\x65\x61\164\145\x5f\164\x69\155\145" => time()]; goto J6lOc; eAdJv: if (!($users && in_array($this->uid, $users))) { goto nRbjm; } goto QuJec; kXID4: UcoAV: goto N9XmD; Kx43I: $this->crontab_log("\144\x6f\122\x65\163\x75\x6c\x74\x52\145\x64\x50\141\143\153\x20\165\x70\x64\x61\164\x65\40\x72\145\x64\x20\160\141\143\153\40\146\x61\x69\154\40\151\x64\x3a" . $redpack_id . "\54\x64\141\x74\141\72" . var_export($result, true), "\145\x72\x72\x6f\x72"); goto XWMIs; UVR9Y: if (!($money > $user["\x63\x6f\x6d\155\x69\163\x73\151\157\x6e"] - $user["\x63\x6f\155\x6d\x69\163\163\151\x6f\x6e\x5f\x70\x61\171"])) { goto M0Ydm; } goto uexj9; dbqj3: $money_fen = $money * 100; goto rEvd7; L6RzN: if ($this->uid) { goto pU02W; } goto XNilk; OzKhh: $users = $this->module["\143\x6f\x6e\x66\151\147"]["\156\157\150\157\156\x67\142\x61\x6f"]; goto pwm33; RrthB: $this->RedPackModel->update(["\151\x64" => $redpack_id], ["\x73\164\141\x74\x75\x73" => 2, "\163\145\156\144\137\x6c\151\x73\x74\x69\144" => $result["\163\x65\156\x64\x5f\154\x69\x73\164\x69\144"], "\145\162\162\137\143\x6f\x64\145" => $send_pack["\x65\x72\162\x5f\x63\x6f\144\x65"], "\x65\162\x72\137\143\x6f\x64\x65\137\144\145\x73" => $send_pack["\x65\x72\x72\x5f\x63\157\x64\145\x5f\x64\x65\163"]]); goto z2yG4; XWMIs: return false; goto jlhId; mUrLY: $this->ajaxReturn(401, "\xe6\257\217\346\254\xa1\346\x9c\x80\345\xa4\x9a\346\x8f\220\xe7\x8e\xb0\x32\60\x30\xe5\205\203"); goto BT3ws; nKlOU: $update_commision = $this->MemberModel->update(["\x69\x64" => $this->uid, "\143\x6f\155\x6d\151\163\163\x69\x6f\x6e\x20\76\75" => number_format($user["\143\x6f\x6d\155\x69\x73\x73\151\157\x6e\137\160\x61\x79"], 2, "\56", '') + $money], ["\143\x6f\x6d\155\x69\163\163\x69\157\156\x5f\x70\141\171\x20\x2b\75" => $money]); goto oeILX; tMLaV: $users = explode("\x2c", $users); goto eAdJv; BT3ws: WKK30: goto oc7wJ; Lmrqh: pU02W: goto OzKhh; XNilk: $this->ajaxReturn(300, "\350\xaf\267\xe6\x82\250\xe5\234\250\345\276\xae\344\277\xa1\xe7\253\257\347\231\273\345\275\225"); goto Lmrqh; JYOGA: if ($red_pack_update) { goto Eyah6; } goto Kx43I; pwm33: $users = str_replace("\xef\274\214", "\x2c", $users); goto tMLaV; rEvd7: if (!($money_fen < 100)) { goto SINVP; } goto wbYLz; XsY36: $this->ajaxReturn(403, "\xe6\x8f\x90\347\x8e\260\345\244\261\350\xb4\xa5\62"); goto kXID4; pOCwH: $send_pack = $this->RedPackModel->sendRedPackNew($user["\x6f\160\145\156\151\144"], $config, $money_fen, $this->W["\x77\x65\x69\144"], $billno); goto iu0UF; hhLwI: if (!($money > 200)) { goto WKK30; } goto mUrLY; J6lOc: $redpack_id = $this->RedPackModel->add($data); goto Kh9_C; aTqb5: $money = number_format($money, 2, "\56", ''); goto dbqj3; uexj9: $this->ajaxReturn(400, "\351\207\x91\xe9\242\235\xe9\224\x99\350\xaf\257"); goto NIRH4; Ecl14: } private function getOrderId() { $randNo = sprintf("\x25\x30\x34\144", rand(1, 1000)); return date("\131\x6d\x64\110\151\x73") . $randNo; } }