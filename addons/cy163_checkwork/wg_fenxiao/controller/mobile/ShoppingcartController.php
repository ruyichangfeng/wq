<?php
 class ShoppingcartController extends MobileBaseController { public function index() { goto HyiGE; XeCRA: if (!$list) { goto bHXw_; } goto wQG3m; BOOhm: $data["\x6c\145\166\145\x6c\156\141\155\145"] = $this->userInfo["\154\145\x76\x65\154\156\141\x6d\145"]; goto XeCRA; wQG3m: foreach ($list as $value) { goto XkoE5; fi2da: if (!$value["\164\x79\160\x65"]) { goto qTmoJ; } goto w7Pz1; XkoE5: $goods_ids[] = $value["\147\x6f\157\144\x73\x5f\x69\144"]; goto fi2da; h5iB_: qTmoJ: goto OeB29; w7Pz1: $goods_types[] = $value["\x74\171\160\x65"]; goto h5iB_; OeB29: Ps5Po: goto Zefhd; Zefhd: } goto Bnuuz; d5v84: $goods_types = $this->GoodsTypeModel->getList(["\151\144" => $goods_types], "\x2a"); goto M0xV2; y317o: $this->assign($data); goto GZ77m; HyiGE: $data["\164\151\164\x6c\x65"] = "\350\264\xad\347\x89\251\350\275\xa6"; goto EhI26; Bnuuz: P9DEy: goto mgzZ7; GZ77m: $this->display(); goto OX_3j; vuQUa: $data["\154\x69\163\x74"] = $list; goto XACf7; mgzZ7: $goods_ids = array_unique($goods_ids); goto pMTmW; UJJ79: $goods_types = array_unique($goods_types); goto d5v84; hRLY2: $zhekou = $this->GouModel->getList($where); goto wmC2K; xoB22: $goods_ids = []; goto U0Zvv; JbEu9: O5u_K: goto JmQ9Y; xKhKh: $list = $this->getShoppingCartInfo(); goto xoB22; DjHRe: $goods_info = $this->arrayIndex($goods_info, "\151\x64"); goto OZj1K; pMTmW: $goods_info = $this->GoodsModel->getList(["\x69\x64" => $goods_ids, "\163\x74\141\x74\x75\163" => 1], ["\x69\144", "\147\x6f\x6f\144\x73\x6e\x61\155\x65", "\155\x61\x72\x6b\145\164\160\162\151\x63\x65", "\164\x68\165\x6d\142"]); goto DjHRe; VTHKP: if (!$goods_types) { goto O5u_K; } goto UJJ79; hOYQS: Yiad4: goto mREXs; mREXs: bHXw_: goto vuQUa; M0xV2: $goods_types = $this->arrayIndex($goods_types, "\x69\x64"); goto JbEu9; JmQ9Y: foreach ($list as &$cart) { goto xuGGd; zhF9m: goto i1g5B; goto dbeZw; xGGAC: $cart["\x7a\x68\x65\153\157\x75"] = $zhekou[$cart["\x67\157\x6f\x64\x73\x5f\151\144"]]["\172\150\x65\x6b\x6f\165"] && $zhekou[$cart["\x67\x6f\157\x64\x73\x5f\151\x64"]]["\x7a\150\x65\153\x6f\165"] > 0 ? $zhekou[$cart["\x67\157\157\144\163\137\x69\144"]]["\172\150\x65\153\x6f\165"] : 10; goto HiG1h; dnAoI: $cart["\162\145\x6d\x61\151\x6e"] = $cart["\x74\171\x70\145\x5f\151\x6e\146\157"]["\141\155\x6f\165\x6e\x74\x5f\164\157\x74\x61\154"] - $cart["\x74\171\x70\145\137\151\156\x66\x6f"]["\x61\155\x6f\165\x6e\x74\x5f\x73\x65\154\154"]; goto zOHd6; DNsFi: $cart["\162\145\155\141\x69\156"] = 0; goto NIUHU; aLC_A: cVal1: goto Nyjs1; XDq2T: if (!$goods_types[$cart["\x74\171\x70\145"]]) { goto HQ9md; } goto yBFVf; NIUHU: CCgt3: goto JaZOm; JaZOm: HQ9md: goto OiZdr; yBFVf: $cart["\x74\x79\x70\145\137\151\156\146\157"] = $goods_types[$cart["\164\171\x70\x65"]]; goto dnAoI; k4aqd: $cart["\172\150\x65\153\157\165"] = $data["\172\150\x65\153\157\x75"]; goto zhF9m; xuGGd: $cart["\144\x65\164\141\x69\x6c"] = $goods_info[$cart["\147\157\157\144\163\137\151\144"]]; goto XDq2T; dbeZw: Fzqlc: goto xGGAC; zOHd6: if (!($cart["\164\x79\160\x65\x5f\151\x6e\146\x6f"]["\x64\x65\154"] == 1)) { goto CCgt3; } goto DNsFi; HiG1h: i1g5B: goto aLC_A; OiZdr: if ($zhekou[$cart["\x67\157\x6f\x64\x73\137\x69\144"]]) { goto Fzqlc; } goto k4aqd; Nyjs1: } goto hOYQS; EhI26: $data["\x73\150\157\x70\156\141\155\x65"] = $this->site->configs["\x63\157\x6e\146\x69\147"]["\x73\x68\157\160\x6e\x61\x6d\x65"]; goto xKhKh; OZj1K: $where = ["\163\164\x61\162\164\x20\74" => time(), "\145\x6e\x64\x20\x3e" => time(), "\147\x6f\x6f\x64\x73\x5f\x69\x64" => $goods_ids, "\164\x79\x70\145" => 1]; goto hRLY2; XACf7: $data["\141\144\x76\163"] = $this->AdvModel->getList(["\167\x65\x69\x64" => $this->W["\x75\x6e\x69\141\x63\x69\x64"], "\145\156\141\142\154\x65\x64" => 1, "\x74\171\160\145" => 8], "\x2a", "\144\x69\x73\160\x6c\141\171\157\162\144\x65\162\x20\141\163\143"); goto y317o; wmC2K: $zhekou = $this->arrayIndex($zhekou, "\147\x6f\x6f\x64\x73\137\x69\x64"); goto VTHKP; U0Zvv: $data["\x7a\150\145\153\x6f\165"] = $this->userInfo["\172\150\145\153\157\165"]; goto BOOhm; OX_3j: } public function ajaxAdd() { goto tQ0_B; lU1nF: goto z32gz; goto H4076; bie_f: if (!($need_amount > $goods_type["\141\x6d\157\165\x6e\164\x5f\164\x6f\164\141\154"] - $goods_type["\141\155\157\165\x6e\164\137\x73\145\154\154"])) { goto IKiF1; } goto zeR3e; RMS5Y: $inc = $_POST["\x66\x72\x6f\155"] ? false : true; goto eyAa0; QnpLm: if (!(!$data["\x67\157\157\x64\x73\137\151\x64"] || $data["\x61\155\x6f\x75\156\x74"] <= 0 || !$data["\164\x79\x70\145"])) { goto j20kc; } goto PYqCq; b_fMJ: $data["\147\157\x6f\144\163\137\151\x64"] = (int) $_POST["\x67\157\157\144\163\137\x69\x64"]; goto fqKke; yGz6n: $this->ajaxReturn(104, "\xe5\x8f\x82\xe6\225\xb0\351\x94\x99\xe8\xaf\257"); goto ABCLJ; zeR3e: $this->ajaxReturn(103, "\345\272\x93\xe5\xad\230\xe4\xb8\x8d\350\266\263"); goto YOOHr; L97zO: $this->ajaxReturn(300, "\350\257\xb7\346\202\xa8\345\234\xa8\xe5\276\xae\344\277\241\347\253\257\xe7\x99\273\345\275\225"); goto EuTH9; Diduq: $cart = $this->ShoppingCartModel->getOne(["\165\x69\x64" => $this->uid, "\147\157\157\x64\x73\x5f\151\x64" => $data["\x67\x6f\x6f\144\163\137\151\144"], "\x74\x79\160\x65" => $data["\x74\x79\160\x65"]]); goto a54ET; h1Ewe: $this->ajaxReturn(0, "\346\xb7\xbb\345\x8a\240\346\x88\x90\xe5\x8a\237"); goto uUQCx; EuTH9: TKcZJ: goto b_fMJ; YOOHr: IKiF1: goto kRxpR; H4076: gsx7q: goto Diduq; kRxpR: $result = $this->updateShoppingCart($data, $inc); goto hg6o6; uUQCx: YKryJ: goto yGz6n; m0gvi: z32gz: goto bie_f; eyAa0: $goods_type = $this->GoodsTypeModel->getOne(["\151\x64" => $data["\x74\x79\160\x65"], "\x67\x6f\157\144\x73\x5f\x69\144" => $data["\x67\157\x6f\144\x73\x5f\x69\144"]], ["\141\155\x6f\x75\x6e\164\x5f\x74\157\164\x61\x6c", "\141\155\157\165\156\164\x5f\163\x65\x6c\154"]); goto WDexK; FN7fB: By88z: goto OcR33; QmYjR: $this->ajaxReturn(102, "\xe5\225\x86\345\223\x81\344\270\x8d\345\xad\230\345\234\250"); goto FN7fB; biz6z: $need_amount = $data["\141\155\157\165\x6e\x74"]; goto lU1nF; a54ET: $need_amount = (int) $cart["\141\x6d\157\165\156\x74"] + $data["\141\155\157\x75\x6e\x74"]; goto m0gvi; WDexK: if ($goods_type) { goto By88z; } goto QmYjR; lpCUX: $data["\x61\155\157\165\156\x74"] = (int) $_POST["\141\x6d\157\165\x6e\164"]; goto QnpLm; fqKke: $data["\164\171\160\x65"] = (int) $_POST["\x74\171\160\x65"]; goto lpCUX; W0C0T: j20kc: goto RMS5Y; OcR33: if ($inc) { goto gsx7q; } goto biz6z; PYqCq: $this->ajaxReturn(101, "\xe5\x8f\202\346\x95\260\xe9\224\x99\xe8\257\xaf"); goto W0C0T; tQ0_B: if ($this->uid) { goto TKcZJ; } goto L97zO; hg6o6: if (!$result) { goto YKryJ; } goto h1Ewe; ABCLJ: } public function ajaxDel() { goto d4Ods; gVpCv: $id = explode("\x7c", $id); goto DdRBe; yibMQ: $this->ajaxReturn(300, "\350\257\xb7\xe6\202\250\345\234\xa8\xe5\276\xae\xe4\xbf\241\xe7\253\xaf\347\x99\xbb\345\xbd\225"); goto mWlCF; OlOms: $this->ajaxReturn(102, "\xe5\x8f\x82\xe6\225\260\xe9\224\231\350\xaf\xaf"); goto popCQ; EW_yq: $id = trim($_POST["\151\x64"]); goto gVpCv; W_wkN: $this->ajaxReturn(0, "\x6f\x6b"); goto GdH8b; GdH8b: gFg43: goto Qm5QC; mWlCF: IK9or: goto EW_yq; qsN1F: if (!$result) { goto gFg43; } goto W_wkN; DdRBe: if (!$id) { goto aXCZ5; } goto LYoi5; d4Ods: if ($this->uid) { goto IK9or; } goto yibMQ; Qm5QC: aXCZ5: goto OlOms; LYoi5: $result = $this->ShoppingCartModel->del(["\x75\151\x64" => $this->uid, "\x69\x64\x20\x49\x4e" => $id]); goto qsN1F; popCQ: } }