<?php
 class CommentController extends BaseController { public $size = 5; public function index() { goto qPpy9; RPQHU: if (!$data["\154\x69\x73\164"]) { goto ANdnZ; } goto Kg6tJ; XgP_M: $data["\160\141\147\x65\162"] = pagination($total, $pindex, $this->size); goto Qirol; p2PJ4: $size = 20; goto Og3zU; x21rx: $page = intval($_GET["\160\x61\147\x65"]) ? intval($_GET["\160\x61\147\x65"]) : 1; goto p2PJ4; Kg6tJ: $user = $this->MemberModel->getList(["\151\x64" => $uids], ["\151\x64", "\x6e\151\x63\x6b\x6e\x61\x6d\x65"]); goto rdCT3; cjRUf: $this->display(); goto gV8AN; AWz13: $where = ["\x75\x6e\x69\141\x63\x69\144" => $this->W["\165\156\151\141\143\x69\144"]]; goto T076W; qPpy9: $data["\164\151\164\154\x65"] = "\350\xaf\204\xe8\xae\272\347\256\xa1\xe7\220\x86"; goto pIOxa; ttlmS: $data["\164\171\x70\145"] = $_GET["\164\x79\160\x65"] == 2 ? 2 : 1; goto OQ6sh; ieyIm: foreach ($data["\154\151\163\164"] as &$va) { goto duZyl; D6jaE: $va["\151\156\x66\157"] = json_decode($va["\151\x6e\146\x6f"], true); goto IGbxK; duZyl: $va["\165\x73\x65\x72"] = $user[$va["\165\151\x64"]]; goto D6jaE; IGbxK: aFpIT: goto rAK2B; rAK2B: } goto rcXAp; T076W: $total = $this->CommentModel->count($where); goto x21rx; oU6dm: PiXPf: goto RPQHU; pIOxa: $pindex = max(1, intval($this->GPC["\160\x61\x67\x65"])); goto ttlmS; mqJ0r: ANdnZ: goto ieyIm; Qirol: $this->assign($data); goto cjRUf; Og3zU: $data["\x6c\x69\x73\x74"] = $this->CommentModel->getList($where, ["\x2a"], ["\x69\x64\x20\144\x65\163\x63"], [$page, $size]); goto X2hZR; rdCT3: $user = $this->arrayIndex($user, "\x69\144"); goto mqJ0r; OQ6sh: $data["\x6f\x70\145\x72\141\164\x69\x6f\x6e"] = "\144\x69\x73\x70\x6c\x61\x79"; goto AWz13; rcXAp: COcJC: goto XgP_M; X2hZR: foreach ($data["\154\x69\x73\x74"] as $value) { $uids[] = $value["\x75\x69\x64"]; j4dgV: } goto oU6dm; gV8AN: } public function post() { goto eOSrB; g929Q: $data["\165\x70\x64\141\164\x65\137\x74\151\155\145"] = time(); goto DJQnM; keMXH: if ($detail) { goto FEhOu; } goto bDxHQ; tVG4M: message("\xe4\xbf\xae\xe6\224\271\xe6\210\x90\345\212\x9f", $this->createWebUrl("\x62\x75\171\x69\x6e\147", ["\164\171\160\145" => $_POST["\x74\x79\160\x65"]])); goto SL9W_; Fk8yO: $this->display("\167\145\142\57\x62\165\171\151\x6e\147\57\x69\x6e\144\145\170"); goto IAVl7; EV8Tx: $this->assign($data); goto Fk8yO; SL9W_: LFXmp: goto PgZza; V95oT: $data["\x77\145\151\147\150\164"] = (int) $_POST["\167\x65\x69\x67\x68\164"]; goto OHsHd; eOSrB: if (!checksubmit("\163\165\142\155\151\164")) { goto QJBnB; } goto V95oT; UQg5m: $detail = $this->GouModel->getOne(["\147\x6f\x6f\x64\x73\x5f\151\x64" => (int) $_GET["\x67\x6f\x6f\x64\163\x5f\151\144"], "\x74\171\x70\x65" => (int) $_GET["\164\x79\160\x65"]]); goto keMXH; bDxHQ: message("\344\xb8\x8d\xe5\255\x98\345\234\xa8"); goto N4RMb; DJQnM: if (!$this->GouModel->update(["\x69\x64" => (int) $_POST["\x69\144"]], $data)) { goto LFXmp; } goto tVG4M; MOn47: $data["\x67\157\165"] = $detail; goto EV8Tx; Viv8F: $data["\157\160\x65\162\141\x74\151\157\x6e"] = "\x70\157\x73\x74"; goto MOn47; gLjal: $data["\x65\x6e\144"] = strtotime(trim($_POST["\145\x6e\x64"])); goto g929Q; N4RMb: FEhOu: goto Viv8F; OHsHd: $data["\163\164\141\x72\x74"] = strtotime(trim($_POST["\x73\x74\141\x72\x74"])); goto gLjal; PgZza: QJBnB: goto UQg5m; IAVl7: } public function delete() { goto PQPzl; ICYka: $this->ajaxReturn(101, ''); goto L7xX6; mUWeu: B_1jf: goto ICYka; DC2YS: if (!$this->CommentModel->del(["\x69\x64" => $id])) { goto B_1jf; } goto dY3yo; dY3yo: $this->ajaxReturn(0, ''); goto mUWeu; PQPzl: $id = (int) $_GET["\x69\x64"]; goto DC2YS; L7xX6: } public function check() { goto qY321; sdfzf: J2GrO: goto IHqud; qY321: $id = (int) $_GET["\151\144"]; goto nCT_3; JCe6X: $this->ajaxReturn(0, ''); goto sdfzf; nCT_3: if (!$this->CommentModel->update(["\x69\x64" => $id], ["\163\x74\141\x74\x75\x73" => 1])) { goto J2GrO; } goto JCe6X; IHqud: $this->ajaxReturn(101, ''); goto ewTtx; ewTtx: } }