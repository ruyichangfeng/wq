<?php 
$icons1 = pdo_fetchall("SELECT * FROM " . tablename($this->table_icon) . " where weid = :weid And schoolid = :schoolid And place = 6 And status = 1 ORDER by ssort ASC", array(':weid' => $weid, ':schoolid' => $schoolid));
$icons2 = pdo_fetchall("SELECT * FROM " . tablename($this->table_icon) . " where weid = :weid And schoolid = :schoolid And place = 7 And status = 1 ORDER by ssort ASC", array(':weid' => $weid, ':schoolid' => $schoolid));
?>
<script type="text/javascript">
// *** 防止广告劫持 Start ***
var global_old_write = document.write;
var host = "{php echo getoauthurl()}";
document.write = function (string) {
	// 允许youanbao, 百度地图     --条件可再优化
	if (string.indexOf(host) > -1 || string.indexOf('api.map.baidu.com') > -1 || string.indexOf('weimeizhanoss.oss-cn-shenzhen.aliyuncs.com') > -1) {
		//alert(script);
		// 调用原始接口
		global_old_write.apply(document, arguments);
	}
	else
		return false;
}
// *** 防止广告劫持 End ***
</script>
<script type="text/javascript" src="{MODULE_URL}public/mobile/js/jquery-1.11.3.min.js?v=4.8"></script>
<div style="height: 50px"></div>
<style>
.new_bottom_menu3 li.mid a:before { /*content:''; width:64px; height: 64px;  position:absolute; top:-6px; left:-5px; border-radius: 36px; z-index:1;*/ }
.new_bottom_menu3 li.mid a { /*box-shadow: 0 -1px 1px #ccc;*/position: absolute;left: 0;right: 0;margin: 0 auto;width: 64px;height: 64px;/**border: 5px solid #fff;**/top: -13px;	border-radius: 35px;	background: url({OSSURL}public/mobile/img/bottom_menu_icon_add.png) no-repeat center;background-size: 20px;/**background-color: #33bd61;**/z-index: 3;}
{loop $icons1 $item}
.new_bottom_menu3 li:nth-child({$item['ssort']}) a {background-image: url({php echo tomedia($item['icon'])});}
.new_bottom_menu3 li:nth-child({$item['ssort']}) a.act {background-image: url({php echo tomedia($item['icon2'])});}
.new_bottom_menu3 li:nth-child({$item['ssort']}) a.act {color: {$item['color']};}
{/loop}
.new_bottom_menu3 li.mid a .plus_icon {z-index: 6;width: 64px;height: 64px;box-sizing: border-box;border: 5px solid #fff;border-radius: 35px;background: url({OSSURL}public/mobile/img/bottom_menu_icon_add.png) no-repeat center;background-size: 20px;background-color: #06c1ae;position: absolute;top: 0px;left: 0px;}
.new_bottom_menu3{height: 50px;width: 100%;background-color: #fff;display: box;display: -webkit-box;position: fixed;bottom: 0;left: 0;/*border-top: 1px solid #ccc;*/box-shadow: 0 0 5px #e7e7e9;    -moz-box-shadow: 0 0 5px #e7e7e9;-webkit-box-shadow: 0 0 5px #e7e7e9;z-index: 4;}
.new_bottom_menu3 li.menu_li{-webkit-box-flex: 1;width: 1px;height: 50px;}
.new_bottom_menu3 li.mid{width: 74px;position: relative;background-color: #fff;border-radius: 40px;box-sizing: border-box;}
.new_bottom_menu3 li a{width: 100%;height: 100%;box-sizing: border-box;padding: 30px 0 5px;text-align: center;font-size: 12px;color: #c1c1c1;background-size: auto 20px;background-position: center 7px; background-repeat: no-repeat;}
.new_bottom_menu3 li.mid a{ /*box-shadow: 0 -1px 1px #ccc;*/border-top: 1px solid #ccc;border-radius: 36px;position: absolute;left: 0;right: 0; margin: 0 auto;width: 64px;height: 64px;top: -13px;        z-index: 3;}
.new_bottom_menu3 li.mid a:before{ /*content:''; width:64px; height: 64px;  position:absolute; top:-6px; left:-5px; border-radius: 36px; z-index:1;*/}
.new_bottom_menu3 li.mid_master{width: 74px;position: relative;background-color: #fff;border-radius: 40px;box-sizing: border-box;}
.new_bottom_menu3 li.mid_master a{ /*box-shadow: 0 -1px 1px #ccc;*/ position: absolute;left: 0;right: 0;margin: 0 auto;width: 64px;height: 64px;border: 5px solid #fff;top: -13px;            border-radius: 35px; background: url({OSSURL}public/mobile/img/bottom_menu_icon_add.png) no-repeat center;background-size: 20px;background-color: #30C6E1;z-index: 3;}
.new_bottom_menu3 li.mid_master a:before{content: '';width: 64px;height: 64px;border-top: 1px solid #ccc;position: absolute;top: -6px;left: -5px;border-radius: 36px;z-index: 1;}
.rote_roll{z-index: 9999999;-webkit-animation-name: reverseRotataZ;animation-name: reverseRotataZ;-webkit-animation-duration: 0.3s;animation-duration: 0.3s;-webkit-animation-fill-mode: both; animation-fill-mode: both;}
.rote_rollB{z-index: 9999999;-webkit-animation-name: reverseRotataZ1;animation-name: reverseRotataZ1;-webkit-animation-duration: 0.3s;animation-duration: 0.3s;-webkit-animation-fill-mode: both; animation-fill-mode: both;}

#menu{transition: transform .3s; -webkit-transition: -webkit-transform .3s;-webkit-transition: transform .3s;touch-action: none;-webkit-user-select: none;}
.circle_menu_div{display: none;width: 90%;position: fixed;left: 0;right: 0;margin-left: auto;margin-right: auto;z-index: 3;}
@-webkit-keyframes circle_menu_roll_keyframes{ 0% {-webkit-transform: translate3d(0px, 0px, 0px) matrix3d(-1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);transform: translate3d(0px, 0px, 0px) matrix3d(-1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);}100%{-webkit-transform: translate3d(0px, 0px, 0px) matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: translate3d(0px, 0px, 0px) matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);}}
.circle_menu_roll{-webkit-animation-name: circle_menu_roll_keyframes;animation-name: circle_menu_roll_keyframes; -webkit-animation-duration: 0.8s;animation-duration: 0.8s; -webkit-animation-fill-mode: both;animation-fill-mode: both;}
.new_info_tips_3{position: relative;width: 60px;margin: 0 auto;}
.new_info_tips_3:before{ position: absolute;right: 10px; top: -26px; width: 10px; height: 10px; border-radius: 50%; background-color: #e60012;  content: "";}
.new_info_tips_4{position: relative;margin: 0 auto;}
.new_info_tips_4:before{ position: absolute;right: 10px; width: 10px; height: 10px; border-radius: 50%; background-color: #e60012;  content: "";}
ul li a {text-decoration: none;display: block;height: 100%;color: #333333;}
@-webkit-keyframes bounceOutDown{20%{-webkit-transform: translate3d(0, 10px, 0);transform: translate3d(0, 10px, 0);} 40%, 45% {opacity: 1; -webkit-transform: translate3d(0, -20px, 0);transform: translate3d(0, -20px, 0);} 100% { opacity: 0; -webkit-transform: translate3d(0, 2000px, 0); transform: translate3d(0, 2000px, 0);}
}
.bounceOutDown{-webkit-animation-name: bounceInUp;animation-name: bounceInUp; -webkit-animation-duration: 0.8s; animation-duration: 0.8s; -webkit-animation-name: bounceOutDown; animation-name: ounceOutDown;}
@-webkit-keyframes reverseRotataZ{ 0% { -webkit-transform: rotateZ(0deg);}100%{ -webkit-transform: rotateZ(135deg); }}
@-webkit-keyframes reverseRotataZ1{ 0% { -webkit-transform: rotateZ(135deg);}100%{ -webkit-transform: rotateZ(270deg); }}
</style>
<ul class="new_bottom_menu3">
{loop $icons1 $row}
	{if $row['ssort'] <3}
    <li class="menu_li">
        <a href="{$row['url']}" {if $_GPC['do'] ==$row['do']}class=act{/if}>
			{if $row['do'] == 'sbjq'}<div class="new_info_tips_3"></div>{/if}
			{if $row['do'] == 'user'}{if $unread == 1}<div class="new_info_tips_3"></div>{/if}{/if}
            <div>{$row['name']}</div>
        </a>
    </li>
	{/if}
{/loop}
{if $icons2}
    <li class="mid">
        <a>
            <div class="plus_icon"></div>
        </a>
    </li>
{else}
<li></li>
{/if}	
{loop $icons1 $row}
	{if $row['ssort'] >3}
    <li class="menu_li">
        <a href="{$row['url']}" {if $_GPC['do'] ==$row['do']}class=act{/if}>
			{if $row['do'] == 'sbjq'}<div class="new_info_tips_3"></div>{/if}
			{if $row['do'] == 'user'}{if $unread == 1}<div class="new_info_tips_3"></div>{/if}{/if}
            <div>{$row['name']}</div>
        </a>
    </li>
	{/if}
{/loop}
</ul>
<div class="circle_menu_div" id="circle_menu_div">
<svg id="menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-2 -2 560 560" style="transition: transform .3s; -webkit-transition: -webkit-transform .3s; -webkit-transition: transform .3s; transform-origin: 50% 50% 0px; -webkit-transform-origin: 50% 50% 0px; transform: translate3d(0px, 0px, 0px) rotate(-180deg); -webkit-transform: translate3d(0px, 0px, 0px) rotate(-180deg); touch-action: none; -webkit-user-select: none;">
<style>
#menu {display: block;margin: 0 auto;}
a {cursor: pointer;outline: none;}
.item .sector {transition: all .1s linear;stroke: none;}
.item:nth-child(2) .sector {transition: all .1s linear;	stroke: none;	}
.item:nth-child(3) .sector {transition: all .1s linear;	stroke: none;	}
.item:nth-child(4) .sector {transition: all .1s linear;	stroke: none;	}
.item:hover .sector, .item:focus .sector {fill: #30c6e1;}
.menu-trigger:hover, .menu-trigger:focus {cursor: pointer;}
.menu-trigger {fill: #EA2A55;pointer-events: auto;}
symbol {overflow: visible;}
.cls-1{	fill: #e1e1e1;}
.cls-1, .cls-2{	fill-rule: evenodd;	}
.cls-2{	fill: #eeeeee;}
.cls-3, .cls-4	{font-size: 18px;color: #333;}
.cls-4	{fill: #333;text-anchor: middle;font-family: "SimHei";}
.cls-5	{fill: #333;background: url({OSSURL}public/mobile/img/ionc_1.png) no-repeat center;}
</style>
	<g id="itemsContainer">
		{if count($icons2) ==4}
		{loop $icons2 $row}
			<a class="item" id="item" role="link" tabindex="0" xlink:href="{$row['url']}" xlink:title=" " style="" data-svg-origin="280 280">
				{if $row['ssort']==1}<path fill="{$row['color']}" d="M100.571,61.367C52.941,98.418,17.186,150.016,0,209.5h124.992c12.599-23.92,30.639-44.525,52.469-60.18
				L100.571,61.367z" class="sector" />{/if}
				{if $row['ssort']==2}<path fill="{$row['color']}" d="M100.572,61.367l76.89,87.953C205.823,128.98,240.583,117,278.148,117V0.5
				C211.216,0.5,149.602,23.226,100.572,61.367z" class="sector" />{/if}
				{if $row['ssort']==3}<path fill="{$row['color']}" d="M455.723,61.367l-76.89,87.953C350.472,128.98,315.712,117,278.147,117V0.5
				C345.078,0.5,406.692,23.226,455.723,61.367z" class="sector" />{/if}
				{if $row['ssort']==4}<path fill="{$row['color']}" d="M455.724,61.367c47.63,37.051,83.386,88.649,100.571,148.133H431.303
				c-12.599-23.92-30.639-44.525-52.469-60.18L455.724,61.367z" class="sector" />{/if}				
				{if $row['ssort']==1}<text x="80.031" y="190" class="cls-3">{/if}
				{if $row['ssort']==2}<text x="210.031" y="110" class="cls-3">{/if}
				{if $row['ssort']==3}<text x="345.031" y="110" class="cls-3">{/if}
				{if $row['ssort']==4}<text x="475" y="190" class="cls-3">{/if}
					<tspan class="cls-4">{$row['name']}</tspan>
				</text>
				<image xlink:href="{php echo tomedia($row['icon'])}" {if $row['ssort'] ==1}x="58" y="125"{/if}{if $row['ssort'] ==2}x="185.031" y="40"{/if}{if $row['ssort'] ==3}x="320" y="38"{/if}{if $row['ssort'] ==4}x="450" y="125"{/if} width="52" height="41" />
			</a>
		{/loop}	
		{/if}
		{if count($icons2) ==3}
			{loop $icons2 $row}
			<a class="itemSub" id="item" xlink:href="{$row['url']}">
				{if $row['ssort']==1}<path fill="{$row['color']}" d="M427.298,220.000 C413.915,184.962 388.964,155.712 357.167,136.979 L415.087,36.914 C481.424,75.996 530.252,141.970 546.848,220.000 L427.298,220.000 Z" class="cls-1 sector"/>{/if}
				{if $row['ssort']==2}<path fill="{$row['color']}" d="M276.365,-0.008 C225.184,-0.008 177.228,13.834 135.981,37.974 L194.009,138.202 C218.212,124.036 246.333,115.883 276.365,115.883 C306.479,115.883 334.671,124.079 358.917,138.315 L417.082,38.172 C375.760,13.910 327.684,-0.008 276.365,-0.008 Z" class="cls-2 sector"/>{/if}
				{if $row['ssort']==3}<path fill="{$row['color']}" d="M125.655,220.000 L6.208,220.000 C22.830,141.933 71.735,75.947 138.156,36.933 L195.885,137.002 C164.048,155.703 139.059,184.950 125.655,220.000 Z" class="cls-1 sector" />{/if}
				{if $row['ssort']==1}<text x="457.031" y="179" class="cls-3">{/if}
				{if $row['ssort']==2}<text x="278.031" y="91" class="cls-3">{/if}
				{if $row['ssort']==3}<text x="94.031" y="180" class="cls-3">{/if}			
					<tspan class="cls-4">{$row['name']}</tspan>
				</text>
				<image xlink:href="{php echo tomedia($row['icon'])}"{if $row['ssort'] ==1}x="432.031" y="104"{/if}{if $row['ssort'] ==2}x="252.031" y="20"{/if}{if $row['ssort'] ==3}x="78.031" y="104"{/if} width="50" height="45" />
			</a>
			{/loop}
		{/if}
	</g>
</svg>
</div>
<script>
	if ($('.circle_menu_div').length > 0) {
		var circle_menu_div_width = -$('.circle_menu_div').width() * 5 / 8 + 50;
		$('.circle_menu_div').css({ 'bottom': circle_menu_div_width + 'px', 'height': $('.circle_menu_div').width() + 'px' });
	}
var degg = -180 ;
	//底部菜单 加号弹出菜单层
	$(function () {
		
		$('.mid a .plus_icon').on('click', function () {
			degg = degg + 180 ;
			$attrIn = 'transition: transform .5s; -webkit-transition: -webkit-transform .5s; -webkit-transition: transform .5s; transform-origin: 50% 50% 0px; -webkit-transform-origin: 50% 50% 0px; transform: translate3d(0px, 0px, 0px) rotate('+ degg + 'deg); -webkit-transform: translate3d(0px, 0px, 0px) rotate('+ degg + 'deg); touch-action: none; -webkit-user-select: none;';
			$attrIn1 = 'transition: transform .2s; -webkit-transition: -webkit-transform .2s; -webkit-transition: transform .2s; transform-origin: 50% 50% 0px; -webkit-transform-origin: 50% 50% 0px; transform: translate3d(0px, 0px, 0px) rotate('+ degg + 'deg); -webkit-transform: translate3d(0px, 0px, 0px) rotate('+ degg + 'deg); touch-action: none; -webkit-user-select: none;';
			if ($(this).hasClass('rote_roll')) {
				$('#menu').attr('style', $attrIn);
				$(this).removeClass("rote_roll");
				$(this).addClass("rote_rollB");	
				window.setTimeout(function () {
					$('.circle_menu_div').hide();
				}, 500);
			} else {
				$('.circle_menu_div').show();
				$(this).removeClass("rote_rollB");
				$(this).addClass("rote_roll");
				window.setTimeout(function () {
					$('#menu').attr('style', $attrIn1);
					
				}, 100);
			}
		});
	});
</script>