<?php
 class OrderController extends MobileBaseController { public static $BLACK = array(); public $test = 0; private $zhekou = 10; public function ajaxPay() { goto ziV08; UkzRQ: $this->ajaxReturn($result["\x63\x6f\144\x65"], ''); goto p1vm1; eWVU9: uIgjS: goto ABCwA; y7BZO: No1_7: goto fH_zX; V37sQ: if ($order_detail) { goto m8cnw; } goto rXoDo; Co4OS: $zhekou = $this->arrayIndex($zhekou, "\x67\x6f\157\144\x73\137\151\x64"); goto igD3I; AK4u7: $result = $this->updateOrder($order_data, $goods_ids, $order_id); goto HyUFb; lH3BS: $parent1 = $parent2 = $parent3 = 0; goto Fmm9C; oFfAs: $ids = $goods_info = $goods_ids = []; goto WLnub; ABCwA: $order_detail = $this->OrderDetailModel->getList(["\x6f\x72\144\x65\x72\137\151\x64" => $order_id], ["\147\x6f\x6f\x64\x73\x5f\x69\144", "\141\x6d\157\x75\156\164", "\x74\x79\x70\x65\137\x69\x64"]); goto V37sQ; XR1Il: $goods_info = $this->arrayIndex($goods_info, "\151\x64"); goto X9zoZ; slpiE: if ($order_id) { goto LvwQl; } goto Ertiw; tHWSj: if (!($parent2_info && $level > 1)) { goto f7_Jr; } goto KQaqV; KQaqV: if (!$parent2_info["\151\163\x61\147\145\156\164"]) { goto sDJP0; } goto X4yJb; g56Ki: if (!(!$this->checkPayConfig() && !$this->test)) { goto loGnl; } goto Nh9yR; N2Twj: $parent1 = $parent1_info["\x69\x64"]; goto twshU; Hwbvt: $money = $money * 100; goto qwdtz; lI8uQ: $this->zhekou = $this->userInfo["\x7a\x68\x65\x6b\x6f\x75"]; goto g56Ki; yU4DD: pX2NV: goto OB3Eb; yJwhT: if ($result["\143\157\144\145"] == 0) { goto viCqj; } goto KqQkv; ilAOJ: E8kzu: goto iJv86; LyfS_: $parent3 = $parent3_info["\x69\144"]; goto aLLT9; Kae7p: goto BXd_U; goto Twa7S; X9zoZ: KsX5K: goto GMUHi; C0VA8: f7IKD: goto GkAfr; GkAfr: $pay_info = rtrim($pay_str, "\54"); goto xcNjZ; Nh9yR: $this->ajaxReturn(500, "\xe6\x94\257\xe4\xbb\x98\345\217\x82\xe6\x95\xb0\351\x94\x99\xe8\257\xaf"); goto U2znB; J4v3L: $address_need = false; goto kfM6t; h6Bxd: if ($goods_types) { goto DzS3o; } goto niXZ3; aSh88: $this->ajaxReturn(501, "\xe8\xaf\xb7\xe6\x82\250\xe5\205\210\346\267\xbb\xe5\212\240\xe6\224\xb6\xe8\264\247\xe5\x9c\260\345\x9d\x80"); goto ilAOJ; AQ4Ed: $money = $order_data["\157\162\x64\x65\162\x70\x72\151\x63\145"]; goto Hwbvt; X1s6B: if (!$parent1_info["\x69\163\141\147\145\x6e\x74"]) { goto jCAow; } goto N2Twj; iJv86: if ($order_id) { goto zznTf; } goto lH3BS; Gj7BG: $pay_info = trim($this->GPC["\160\141\171\137\x69\x6e\x66\x6f"]); goto Lg0Hn; tS8Gl: sDJP0: goto wtkAl; D9CXW: $address_info = $this->AddressModel->getOne(["\x69\x64" => $address_id, "\165\x69\x64" => $this->uid], "\x69\144"); goto oFfAs; qwdtz: $order_data["\x6d\x6f\x6e\x65\x79"] = $money; goto a0H82; hUqen: $data["\167\161\160\141\171"] = $this->site->configs["\x63\x6f\x6e\x66\151\x67"]["\x77\161\x70\x61\x79"]; goto lI8uQ; kbc9c: $goods_info = $this->GoodsModel->getList(["\151\144" => $ids, "\x73\164\x61\164\165\x73" => 1], ["\x69\144", "\x67\x6f\x6f\144\163\x6e\141\155\145", "\x6d\x61\162\153\x65\x74\x70\x72\x69\143\145", "\164\150\x75\x6d\x62", "\x73\145\154\x6c\x5f\164\157\x74\141\x6c", "\x74\x6f\164\141\x6c", "\161\x75\141\156\x67\165\157\171\157\165\x66\x65\151", "\x67\157\157\x64\x73\164\x79\160\x65", "\147\x6f\x6f\144\x73\x70\x61\163\x73\164\x79\x70\145"]); goto XR1Il; twshU: jCAow: goto EoEub; fH_zX: $level = $this->site->configs["\143\x6f\x6e\146\x69\x67"]["\x6c\145\166\145\x6c"]; goto hUqen; wtkAl: $parent3_info = $this->MemberModel->getOne(["\x69\144" => $parent2_info["\x70\141\162\x65\156\x74\137\x69\144"]], ["\151\144", "\151\x73\x61\x67\145\156\164", "\x70\141\162\x65\156\164\137\151\x64"]); goto XZpdU; I2Tg_: m8cnw: goto UnGze; X4yJb: $parent2 = $parent2_info["\x69\144"]; goto tS8Gl; Y8a9D: if ($order_info) { goto uIgjS; } goto R3ZQf; OB3Eb: $goods_types = $this->GoodsTypeModel->getList(["\x67\x6f\157\144\163\137\x69\x64" => $ids, "\x64\x65\154" => 0], "\x2a"); goto h6Bxd; ziV08: if ($this->uid) { goto No1_7; } goto Qv99v; niXZ3: $this->ajaxReturn(509, "\345\x95\x86\345\223\201\345\xb1\x9e\346\200\xa7\xe4\270\x8d\345\xad\x98\xe5\234\xa8"); goto u14my; v80hE: $this->ajaxReturn(504, "\351\203\xa8\345\210\x86\345\x95\x86\345\x93\x81\344\270\215\xe5\255\230\345\x9c\250"); goto yU4DD; U2znB: loGnl: goto exzU_; Twa7S: waUep: goto ZVO9o; LOkZq: BXd_U: goto jtjso; WLnub: if ($pay_info) { goto xDxYw; } goto a3YeG; vDI9A: foreach ($pay_info as $detail) { goto C2_8n; tsBPT: $goods_id = (int) $goods_id; goto kBYLh; K1DD9: if (!(!$goods_id || $amount <= 0 || !$type)) { goto oZNIJ; } goto hrdqg; hrdqg: $this->ajaxReturn(502, ''); goto H8LDj; Xqczc: $type = (int) $type; goto K1DD9; kBYLh: $amount = (int) $amount; goto Xqczc; C2_8n: list($goods_id, $amount, $type) = explode("\x5f", $detail); goto tsBPT; wVdtX: furji: goto LIp_w; HuJYY: $goods_ids[$goods_id . "\137" . $type] = ["\x69\x64" => $goods_id, "\x61\x6d\x6f\x75\x6e\x74" => $amount, "\164\171\x70\x65" => $type]; goto kBi3d; kBi3d: $ids[] = $goods_id; goto wVdtX; H8LDj: oZNIJ: goto HuJYY; LIp_w: } goto PYltf; EoEub: $parent2_info = $this->MemberModel->getOne(["\x69\x64" => $parent1_info["\160\x61\162\145\x6e\x74\x5f\151\144"]], ["\151\x64", "\151\163\x61\x67\145\x6e\164", "\x70\x61\162\145\x6e\x74\137\x69\144"]); goto tHWSj; EtDEU: if (!$ids) { goto KsX5K; } goto wDg_G; UbDE0: xE3Q_: goto Mrbb7; PYltf: dNzAR: goto N5MRD; WTpYm: $params = $this->getPayParams($order_data, $this->userInfo["\x6f\160\x65\156\151\144"]); goto Vue3l; MxGTJ: if (!(count($pay_info) != count($goods_ids))) { goto pX2NV; } goto v80hE; jtjso: dAdKi: goto C7LSn; faUkF: F1T00: goto IEdF6; p1vm1: goto dAdKi; goto rMg2g; iHqRJ: LvwQl: goto AK4u7; XZpdU: if (!($parent3_info["\151\163\x61\147\145\x6e\164"] && $level > 2)) { goto XBpx7; } goto LyfS_; wDg_G: $ids = array_unique($ids); goto kbc9c; W9ewu: foreach ($order_detail as $value) { $pay_str .= $value["\x67\157\x6f\144\x73\x5f\151\144"] . "\137" . $value["\141\x6d\x6f\x75\156\164"] . "\x5f" . $value["\164\x79\160\145\x5f\x69\x64"] . "\x2c"; mEBnt: } goto C0VA8; a0H82: if ($data["\x77\x71\x70\141\x79"]) { goto waUep; } goto WTpYm; N5MRD: F4u0V: goto venoF; KqQkv: $this->OrderModel->rollback(); goto UkzRQ; GMUHi: $where = ["\x73\164\141\162\164\40\x3c" => time(), "\x65\156\144\x20\x3e" => time(), "\147\157\x6f\x64\163\x5f\151\x64" => $ids, "\x74\x79\x70\x65" => 1]; goto T0UWb; ZAPIG: $order_info = $this->OrderModel->getOne(["\151\x64" => $order_id, "\155\145\x6d\x62\145\162\x69\144" => $this->uid]); goto Y8a9D; Lg0Hn: if (!$order_id) { goto ludY7; } goto ZAPIG; Ishkb: $pay_info = explode("\x2c", $pay_info); goto Wk3kB; exzU_: $address_id = (int) $this->GPC["\x61\x64\x64\162\145\163\x73\x5f\151\x64"]; goto LH5ER; cMaHt: goto UX6bT; goto JGSKt; IEdF6: zznTf: goto aszI4; T0UWb: $zhekou = $this->GouModel->getList($where, ["\x2a"]); goto Co4OS; YiDts: $this->OrderModel->commit(); goto AQ4Ed; Hf3XJ: goto dL6hp; goto iHqRJ; IkCOY: $this->OrderModel->begin(); goto slpiE; xcNjZ: ludY7: goto D9CXW; igD3I: $money = $amount = $jifen = $postage = $all = 0; goto J4v3L; kfM6t: foreach ($goods_ids as &$value) { goto b6hSs; vUzrk: $this->ajaxReturn(507, "\xe9\203\xa8\345\x88\206\345\225\x86\345\223\x81\345\267\xb2\347\xbb\x8f\345\215\226\345\256\x8c\x7c" . $value["\151\x64"]); goto GkLy5; zoZFO: AE2fW: goto G_Pey; LiR2Y: $value["\x74\x79\160\145\137\x69\156\x66\x6f"] = $goods_types1[$value["\x74\171\x70\x65"]]; goto h5Lvv; XnxLn: Yuihr: goto XIosx; HiheO: vFG2a: goto H8Fko; TIpbh: $value["\x67\157\x6f\x64\x73\x5f\151\x6e\146\157"] = $goods_info[$value["\x69\144"]]; goto B6kqQ; n86pj: if (!($value["\x74\x79\x70\145"] != $goods_types1[$value["\164\x79\160\145"]]["\x69\144"])) { goto Fub6Z; } goto fq6Cu; Czm6U: goto ZWh7g; goto j0lHK; iD8Dx: $jifen += $value["\x61\x6d\x6f\x75\156\164"] * $value["\164\171\x70\145\137\151\x6e\146\157"]["\x6a\x69\x66\145\156"]; goto l2QlV; Uz5eL: VTA3s: goto egu3F; h5Lvv: ZWh7g: goto Nl6Jz; XIosx: Wn80x: goto FD6rj; duHeN: $this->ajaxReturn(506, "\351\x83\xa8\xe5\x88\x86\xe5\225\206\xe5\223\201\xe5\261\236\xe6\x80\xa7\xe4\xb8\215\345\xad\x98\xe5\234\250"); goto Czm6U; Wy9EX: $money += $value["\141\155\157\165\x6e\x74"] * $value["\x74\x79\x70\x65\137\x69\156\x66\x6f"]["\x6d\x61\x72\x6b\145\x74\160\x72\x69\x63\145"]; goto ly9mf; j0lHK: z6v2Z: goto n86pj; l2QlV: $amount += $value["\141\x6d\157\x75\x6e\164"]; goto Wy9EX; nPXYy: $value["\x7a\150\x65\153\x6f\x75"] = $this->zhekou; goto dx2rA; fq6Cu: $this->ajaxReturn(505, "\351\203\xa8\xe5\x88\x86\xe5\225\206\345\x93\201\345\261\x9e\346\x80\247\xe4\xb8\x8d\xe5\xad\x98\xe5\234\250"); goto VNw9e; GkLy5: fE5XM: goto iD8Dx; egu3F: $all += $value["\141\x6d\x6f\x75\156\164"] * $value["\164\171\160\145\x5f\151\x6e\x66\x6f"]["\155\141\162\153\x65\164\160\x72\151\x63\x65"] * $value["\172\150\x65\153\x6f\165"] / 10; goto XnxLn; d4oIv: goto Yuihr; goto VCrAy; Ej3tc: $postage = $value["\147\x6f\x6f\144\x73\137\151\156\x66\157"]["\x71\x75\141\x6e\147\x75\157\x79\157\165\146\145\x69"] > $postage ? $value["\x67\x6f\157\x64\x73\x5f\151\x6e\146\x6f"]["\x71\165\141\x6e\147\x75\157\171\157\165\146\145\x69"] : $postage; goto zoZFO; B6kqQ: if (!($value["\x67\x6f\x6f\x64\x73\137\x69\x6e\x66\x6f"]["\147\157\x6f\144\x73\x74\171\x70\145"] == 0)) { goto vFG2a; } goto M5FaO; Nl6Jz: if (!($value["\141\x6d\157\x75\x6e\x74"] + $value["\164\x79\x70\145\137\x69\156\x66\x6f"]["\141\x6d\157\165\x6e\x74\137\163\145\154\154"] > $value["\x74\x79\x70\x65\x5f\151\x6e\x66\x6f"]["\x61\155\157\x75\156\x74\137\x74\157\164\x61\154"])) { goto fE5XM; } goto vUzrk; VCrAy: QDcYX: goto TIpbh; M5FaO: $address_need = true; goto HiheO; Q2h7Z: JSyty: goto NjSHE; ly9mf: if ($zhekou[$value["\x69\144"]]) { goto JSyty; } goto nPXYy; H8Fko: if (!($value["\147\157\x6f\x64\163\x5f\151\156\146\x6f"]["\x71\165\141\x6e\x67\x75\x6f\171\x6f\165\x66\x65\151"] > 0)) { goto AE2fW; } goto Ej3tc; ixRWe: $this->ajaxReturn(508, "\xe9\203\250\xe5\210\x86\345\225\206\345\x93\201\344\270\215\xe5\255\x98\xe5\x9c\250\174" . $value["\151\x64"]); goto d4oIv; NjSHE: $value["\172\x68\x65\153\x6f\165"] = $zhekou[$value["\151\144"]]["\172\x68\x65\x6b\157\165"] && $zhekou[$value["\151\144"]]["\172\150\x65\x6b\x6f\x75"] > 0 ? $zhekou[$value["\151\144"]]["\172\x68\x65\x6b\x6f\165"] : 10; goto Uz5eL; VNw9e: Fub6Z: goto LiR2Y; G_Pey: if ($value["\164\x79\x70\145"] && $goods_types1[$value["\164\171\x70\x65"]]) { goto z6v2Z; } goto duHeN; b6hSs: if ($goods_info[$value["\x69\144"]]) { goto QDcYX; } goto ixRWe; dx2rA: goto VTA3s; goto Q2h7Z; FD6rj: } goto UbDE0; LH5ER: $order_id = (int) $this->GPC["\x6f\162\x64\145\162\x5f\151\x64"]; goto Gj7BG; u14my: DzS3o: goto I3LGP; Vue3l: $this->ajaxReturn($params["\x63\157\144\145"], $params["\x6d\163\147"], $params["\x64\141\164\x61"]); goto Kae7p; aLLT9: XBpx7: goto Rna2F; JplvB: if (!($parent1_info && $level > 0 && !$order_id)) { goto F1T00; } goto X1s6B; rMg2g: viCqj: goto YiDts; Wk3kB: if (!$pay_info) { goto F4u0V; } goto vDI9A; aszI4: $order_data = ["\x77\x65\151\144" => $this->W["\165\156\x69\x61\143\151\144"], "\x6d\x65\x6d\142\145\x72\x69\x64" => $this->uid, "\157\162\144\x65\162\x73\156" => $this->getOrderId(), "\164\x6f\x74\141\154" => $amount, "\x6f\162\144\145\x72\160\x72\151\143\145" => number_format($all + $postage, 2, "\56", ''), "\x79\x75\156\146\145\151" => $postage, "\141\x64\144\162\x65\163\x73\151\144" => $address_id, "\162\x65\155\141\x72\x6b" => trim($this->GPC["\x72\145\x6d\141\162\153"]), "\163\x74\x61\164\x75\163" => 0, "\143\162\145\141\164\145\164\151\155\145" => time(), "\x70\141\x72\145\156\x74\x31" => $parent1, "\x70\x61\x72\145\x6e\x74\62" => $parent2, "\x70\x61\162\145\x6e\x74\63" => $parent3, "\152\151\146\145\156" => $jifen]; goto IkCOY; R3ZQf: $this->ajaxReturn(409, "\xe8\xae\xa2\345\215\225\344\xb8\x8d\345\255\x98\xe5\x9c\250"); goto eWVU9; Qv99v: $this->ajaxReturn(400, "\350\xaf\xb7\346\x82\250\xe5\234\250\xe5\xbe\xae\344\277\241\xe7\253\257\347\x99\273\xe5\275\x95"); goto y7BZO; Ertiw: $result = $this->addOrder($order_data, $goods_ids, $zhekou); goto Hf3XJ; JGSKt: xDxYw: goto Ishkb; Fmm9C: $parent1_info = $this->MemberModel->getOne(["\151\144" => $this->userInfo["\160\x61\162\145\x6e\x74\x5f\x69\144"]], ["\x69\x64", "\x69\x73\x61\x67\145\x6e\x74", "\x70\x61\x72\145\156\164\137\151\144"]); goto JplvB; a3YeG: $this->ajaxReturn(503, ''); goto cMaHt; venoF: UX6bT: goto MxGTJ; I3LGP: $goods_types1 = $this->arrayIndex($goods_types, "\151\x64"); goto EtDEU; Mrbb7: if (!(!$address_info && $address_need)) { goto E8kzu; } goto aSh88; Rna2F: f7_Jr: goto faUkF; HyUFb: dL6hp: goto yJwhT; UnGze: $pay_str = ''; goto W9ewu; ZVO9o: $this->ajaxReturn(0, $result["\x6f\162\x64\x65\x72\137\x69\x64"]); goto LOkZq; rXoDo: $this->ajaxReturn(408, "\350\256\242\345\215\225\344\xb8\215\345\255\230\345\234\250"); goto I2Tg_; C7LSn: } public function result() { goto e4a1T; WqU92: $this->display(); goto xwb2m; e4a1T: $order_id = $_GET["\157\x72\x64\145\x72\x5f\x69\x64"]; goto q7SC3; WZtsh: $params["\164\x69\x74\x6c\x65"] = "\xe5\225\x86\345\223\201\344\xbb\x98\346\254\276"; goto vgD8V; q7SC3: $order = $this->OrderModel->getOne(["\x69\x64" => $order_id]); goto vhZGC; GHio8: $this->assign(["\160\x61\162\141\x6d\x73" => $params]); goto WqU92; vgD8V: $params["\157\162\144\145\162\163\156"] = $order["\x6f\162\144\145\162\163\156"]; goto GHio8; vhZGC: $params["\164\x69\144"] = $order["\157\162\144\x65\162\163\156"]; goto TzpgQ; TzpgQ: $params["\165\x73\x65\162"] = $this->W["\146\x61\156\x73"]["\146\162\157\x6d\x5f\x75\x73\145\162"]; goto Rwye9; Rwye9: $params["\146\145\145"] = $order["\x6f\x72\144\x65\162\160\162\x69\x63\145"]; goto WZtsh; xwb2m: } public function addOrder($order, $goods_info, $zhekous) { goto OGiFM; OGiFM: $order_id = $this->OrderModel->add($order); goto uNLXk; FubwW: t5vfY: goto OsV0Y; IqrlA: dUi0q: goto juaAc; D5n2c: return ["\143\x6f\144\145" => 101]; goto IqrlA; juaAc: foreach ($goods_info as $item) { goto P2jSQ; EytgW: return ["\143\x6f\144\x65" => 102]; goto hOw8T; j_1Ub: if ($detail_id) { goto gPrqH; } goto EytgW; P2jSQ: if ($zhekous[$item["\x69\144"]]) { goto S5z43; } goto HtZIJ; oUUVK: qzRFh: goto W2muj; HtZIJ: $zhekou = $this->zhekou; goto n0rLY; Nxzvr: k3Uf3: goto HbMt0; n0rLY: goto qzRFh; goto OHKvv; OHKvv: S5z43: goto a6aSX; W2muj: $detail = ["\157\162\144\x65\162\x5f\151\x64" => $order_id, "\147\157\x6f\144\163\x5f\x69\x64" => $item["\151\x64"], "\x61\155\157\x75\x6e\x74" => $item["\141\155\x6f\x75\x6e\x74"], "\x74\151\x74\154\x65" => $item["\x67\x6f\157\144\x73\x5f\x69\x6e\146\x6f"]["\x67\157\x6f\144\x73\156\x61\155\x65"], "\160\162\x69\143\145" => number_format($item["\x74\x79\160\145\137\151\156\146\x6f"]["\155\141\x72\153\x65\x74\x70\x72\x69\143\x65"] * $zhekou / 10, 2, "\x2e", ''), "\164\x68\x75\155\x62" => $item["\x67\157\x6f\x64\x73\x5f\151\x6e\146\x6f"]["\164\x68\x75\155\142"], "\x74\x79\x70\145\137\x69\144" => $item["\164\x79\160\145"], "\x74\171\160\145\137\164\151\x74\x6c\145" => $item["\x74\171\160\145\137\x69\156\146\157"]["\x74\151\x74\x6c\145"], "\147\157\x6f\x64\x73\164\171\160\145" => $item["\147\x6f\x6f\144\x73\137\x69\x6e\x66\157"]["\147\157\157\x64\163\164\x79\160\x65"], "\147\x6f\157\x64\163\x70\141\163\x73\x74\171\160\145" => $item["\x67\x6f\157\144\163\x5f\x69\x6e\x66\x6f"]["\x67\x6f\x6f\144\x73\x70\x61\x73\163\x74\171\160\x65"]]; goto JAslp; a6aSX: $zhekou = $zhekous[$item["\151\144"]]["\x7a\x68\145\153\x6f\x75"] && $zhekous[$item["\x69\x64"]]["\x7a\150\145\153\x6f\165"] > 0 ? $zhekous[$item["\151\144"]]["\172\x68\x65\153\157\165"] : 10; goto oUUVK; hOw8T: gPrqH: goto Nxzvr; JAslp: $detail_id = $this->OrderDetailModel->add($detail); goto j_1Ub; HbMt0: } goto FubwW; OsV0Y: return ["\143\x6f\x64\x65" => 0, "\x6f\162\144\x65\x72\137\151\144" => $order_id]; goto QvJOZ; uNLXk: if ($order_id) { goto dUi0q; } goto D5n2c; QvJOZ: } public function updateOrder($order, $goods_info, $order_id) { goto v5wnX; DciGG: return ["\143\157\x64\145" => 103]; goto J50tr; m6tHA: return ["\143\157\144\x65" => 0, "\x6f\x72\x64\x65\x72\x5f\x69\x64" => $order_id]; goto XYcLR; JkUUF: if ($update) { goto b542x; } goto DciGG; J50tr: b542x: goto m6tHA; v5wnX: $update = $this->OrderModel->update(["\x69\144" => $order_id], ["\157\x72\x64\145\x72\163\156" => $order["\157\162\144\x65\162\163\x6e"], "\157\162\144\x65\162\160\x72\151\143\x65" => $order["\x6f\x72\x64\145\x72\160\x72\151\143\x65"], "\171\x75\x6e\x66\145\x69" => $order["\x79\165\x6e\146\145\x69"], "\x61\x64\x64\x72\x65\163\163\x69\144" => $order["\x61\x64\144\x72\145\x73\163\x69\x64"], "\x72\x65\155\x61\162\x6b" => $order["\162\x65\155\141\162\x6b"]]); goto JkUUF; XYcLR: } private function getOrderId() { $randNo = sprintf("\45\x30\x34\144", rand(1, 1000)); return date("\131\155\144\x48\151\163") . $randNo; } private function checkPayConfig() { goto j2JAl; mG0FU: if (!(!$_W["\x61\143\143\157\x75\156\164"]["\x6b\145\x79"] || !$setting["\160\141\171\155\x65\x6e\164"]["\x77\x65\x63\x68\141\x74"]["\x6d\x63\150\x69\144"] || !$setting["\x70\141\x79\155\145\x6e\x74"]["\x77\x65\x63\150\x61\x74"]["\x73\151\x67\156\153\x65\x79"])) { goto A5SD1; } goto yHvKN; WrjRe: A5SD1: goto XR1a9; XR1a9: return true; goto K2C9t; vpw6K: $setting = uni_setting($this->W["\x75\156\x69\141\143\x69\x64"]); goto mG0FU; j2JAl: global $_W; goto vpw6K; yHvKN: return false; goto WrjRe; K2C9t: } private function getPayParams($order_info, $openid) { goto LDXCL; fAdeh: goto ofegV; goto eLo2p; QfiQp: $tools = new JsApiPay(); goto nkmVI; QBlHG: $input = new WxPayUnifiedOrder(); goto mNwdE; Ni_oe: $input->SetTime_expire(date("\x59\x6d\144\x48\151\x73", time() + 600)); goto BIGJE; DYQKL: require_once dirname(__FILE__) . "\x2f\56\56\57\56\56\x2f\x6c\151\142\57\x77\170\160\x61\x79\x2f\x65\x78\141\155\160\154\145\x2f\x57\170\x50\141\171\x2e\x4a\x73\101\x70\151\x50\x61\171\x2e\160\150\x70"; goto utzbl; I2ubV: $input->SetTrade_type("\112\x53\101\120\111"); goto iIi41; eLo2p: oT4EJ: goto JK544; lso6E: $order = WxPayApi::unifiedOrder($input); goto KmY3t; XBDLp: $_W["\155\157\x64\x75\x6c\145\x5f\x73\145\x74\164\151\156\147"]["\160\141\x79"]["\153\x65\171"] = $setting["\160\x61\171\x6d\x65\156\164"]["\x77\x65\x63\x68\x61\x74"]["\x73\151\147\x6e\153\x65\x79"]; goto lso6E; KmY3t: if ($order["\143\157\x64\145"] == 0) { goto oT4EJ; } goto KtOpe; bHlMF: ofegV: goto waaAU; KtOpe: return ["\143\x6f\144\145" => $order["\143\x6f\x64\145"], "\155\x73\x67" => $order["\155\163\147"]]; goto fAdeh; iIi41: $input->SetOpenid($openid); goto kXHKu; nkmVI: require_once dirname(__FILE__) . "\x2f\56\x2e\57\56\x2e\57\x6c\151\142\57\167\170\160\141\x79\x2f\154\x69\x62\57\127\x78\120\x61\171\56\101\x70\x69\56\160\150\160"; goto DYQKL; rT0sd: require_once dirname(__FILE__) . "\57\56\56\x2f\56\56\57\x6c\151\142\x2f\x77\x78\160\141\171\x2f\x6c\x69\x62\57\x57\x78\x50\141\171\56\x4e\157\164\151\x66\x79\56\x70\x68\160"; goto puNB0; LDXCL: global $_W, $_GPC; goto fOkSj; GU1YN: $input->SetAttach("\167\147\137\146\x65\x6e\x78\151\x61\x6f\174{$_W["\165\x6e\x69\x61\x63\151\x64"]}"); goto hatLD; ZO_Un: $notifyUrl = $_W["\x73\151\164\x65\162\157\x6f\x74"] . "\57\141\x64\x64\x6f\156\163\x2f\167\147\137\146\x65\156\170\151\141\157\57\156\x6f\x74\x69\x66\x79\x2e\x70\x68\160"; goto QfiQp; JK544: return ["\x63\157\x64\145" => 0, "\x64\x61\x74\141" => $tools->GetJsApiParameters($order["\144\x61\164\141"])]; goto bHlMF; oV04t: $input->SetTime_start(date("\x59\155\144\x48\x69\163")); goto Ni_oe; HaBFO: $_W["\x6d\157\x64\165\x6c\145\137\163\x65\x74\164\151\x6e\147"]["\x70\x61\x79"]["\x61\160\160\151\x64"] = $_W["\x61\x63\143\x6f\x75\156\164"]["\x6b\x65\171"]; goto Pldtn; puNB0: require_once dirname(__FILE__) . "\57\56\x2e\57\x2e\x2e\x2f\x6c\151\x62\x2f\x77\170\x70\x61\171\x2f\145\x78\141\155\160\154\145\x2f\127\x78\120\x61\171\56\112\x73\x41\160\151\120\x61\x79\56\x70\150\160"; goto ZO_Un; mNwdE: $input->SetBody($title); goto GU1YN; hatLD: $input->SetOut_trade_no($order_info["\x6f\162\x64\x65\x72\x73\x6e"]); goto GiF1L; utzbl: $title = "\xe5\276\256\344\xbf\241\346\x94\xaf\344\xbb\x98"; goto QBlHG; GiF1L: $input->SetTotal_fee($order_info["\155\x6f\x6e\145\x79"]); goto oV04t; Pldtn: $_W["\x6d\x6f\144\x75\154\x65\137\x73\x65\x74\x74\151\x6e\x67"]["\160\x61\171"]["\x6d\x63\150\151\x64"] = $setting["\x70\141\171\x6d\x65\x6e\x74"]["\167\x65\143\x68\x61\164"]["\x6d\143\150\151\x64"]; goto XBDLp; fOkSj: require_once dirname(__FILE__) . "\x2f\56\56\57\x2e\56\57\x6c\x69\x62\x2f\167\170\160\141\x79\57\x6c\151\x62\x2f\127\x78\x50\141\x79\56\101\160\x69\56\x70\x68\x70"; goto rT0sd; BIGJE: $input->SetNotify_url($notifyUrl); goto I2ubV; kXHKu: $setting = uni_setting($this->W["\165\156\x69\x61\143\151\144"]); goto HaBFO; waaAU: } protected function getYongJinBiLi($userInfo) { goto ON83P; OTaHr: $arr["\x65\x72\x6a\x69\171\x6f\156\147\152\x69\156"] = $this->module["\143\x6f\156\146\x69\x67"]["\145\162\152\151\171\x6f\156\147\152\x69\156"]; goto Csip2; ZKw4h: kTV2R: goto yzIhU; Csip2: $arr["\x73\141\x6e\152\151\171\x6f\x6e\147\x6a\151\x6e"] = $this->module["\143\157\x6e\x66\x69\147"]["\x73\x61\x6e\x6a\x69\x79\x6f\156\x67\x6a\151\x6e"]; goto n0cSP; n0cSP: return $arr; goto ZKw4h; yzIhU: return $this->MemberLevelModel->getOne(["\154\x65\x76\x65\x6c" => $userInfo["\141\147\145\156\x74\154\x65\166\x65\154"], "\x77\145\151\x64" => $userInfo["\x77\x65\151\144"]], ["\171\x69\152\x69\x79\x6f\156\x67\152\x69\156", "\145\x72\152\x69\x79\157\156\147\x6a\x69\x6e", "\163\141\x6e\x6a\151\171\157\x6e\147\152\151\x6e"]); goto nhB65; ON83P: if (!($userInfo["\151\163\141\147\x65\x6e\164"] == 0 || $userInfo["\141\147\145\156\x74\x6c\145\166\x65\154"] == 0)) { goto kTV2R; } goto v1UUK; v1UUK: $arr["\x79\151\152\x69\x79\x6f\156\x67\152\151\x6e"] = $this->module["\143\x6f\156\146\x69\x67"]["\171\151\x6a\151\171\x6f\156\147\x6a\x69\x6e"]; goto OTaHr; nhB65: } }