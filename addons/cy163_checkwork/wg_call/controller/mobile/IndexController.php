<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator          |
    |              on 2018-07-11 14:50:05              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 class IndexController extends CallMobileBaseController { public $size = 10; public function index() { goto hzjWu; hhkvC: m9rtW: goto Ubns_; jFsPr: $id = intval($this->GPC["\151\x64"]); goto AI03f; eu3E3: HXNJm: goto JUT3y; fo_90: Btysp: goto hgorL; xOLQ0: if (!$users) { goto njOD3; } goto ZMb8U; Mk26N: message("\346\264\xbb\345\212\xa8\xe4\xb8\x8d\xe5\xad\x98\345\x9c\250"); goto hhkvC; i8J6O: $data["\141\143\164\151\166\x69\x74\171\137\x75\x73\145\162"] = $this->ActivityUserModel->getOne(["\165\x69\x64" => $uid, "\141\143\x74\x69\166\x69\164\171\137\151\x64" => $id]); goto fo_90; HE2Q7: foreach ($data["\165\x73\145\162\137\x70\162\x69\x7a\x65"] as $value) { $users[] = $value["\165\x69\x64"]; eXW6P: } goto VbSbm; VbSbm: m1Oc1: goto xOLQ0; zmSoA: $users = []; goto HE2Q7; JUT3y: njOD3: goto fv9K3; hzjWu: $uid = intval($this->GPC["\x75\x75\151\x64"]); goto jFsPr; vLFr6: $map["\141\x63\164\151\166\x69\164\x79\137\x69\x64"] = $id; goto fovtu; gkBI0: foreach ($data["\x75\163\145\x72\x5f\x70\x72\x69\x7a\145"] as &$value) { goto Jw7Ya; S3XnB: $value["\x70\162\151\172\x65"] = $prizes[$value["\160\x72\151\172\x65\137\x69\x64"]]; goto pfWHi; pfWHi: eEjLL: goto iRznm; Jw7Ya: $value["\x75\x73\x65\162"] = $users[$value["\x75\x69\x64"]]; goto S3XnB; iRznm: } goto eu3E3; sBN4m: $prizes = $this->arrayIndex($prizes, "\151\x64"); goto gkBI0; o73UM: $users = $this->arrayIndex($users, "\151\x64"); goto sBN4m; pIMpU: if (!$data["\165\x73\145\162"]) { goto Btysp; } goto i8J6O; fovtu: $data["\x70\x72\151\172\145"] = $prizes = $this->PrizeModel->getList($map, "\52", ["\x64\x69\x73\160\x6c\x61\171\157\162\144\145\162\40\x61\x73\x63"]); goto HPMmO; W_qnf: $this->assign($data); goto aCmr4; HPMmO: $data["\165\x73\145\162\x5f\160\x72\151\x7a\x65"] = $this->UserPrizeModel->getList($map, ["\x70\162\151\172\145\137\x69\144", "\x75\151\144"], ["\151\144\x20\x64\145\163\x63"], 15); goto zmSoA; Ubns_: if (!$uid) { goto a8yuf; } goto Q22q3; AI03f: $where = ["\x69\144" => $id, "\x75\x6e\x69\141\143\x69\x64" => $this->W["\165\156\151\x61\x63\151\x64"], "\163\x74\x61\x72\164\40\74" => time(), "\145\x6e\144\x20\76" => time()]; goto s86pB; aCmr4: $this->display(); goto eDNZK; Q22q3: $data["\165\x73\x65\162"] = $this->getUserInfo(["\x69\144" => $uid, "\x75\156\151\x61\143\151\144" => $this->W["\x75\x6e\x69\141\143\151\144"]], ["\151\x64", "\156\151\x63\x6b\156\x61\x6d\145", "\150\x65\x61\144\x69\x6d\x67\x75\162\154", "\163\x65\170"]); goto pIMpU; wE2Ra: if ($data["\x61\x63\x74\151\166\x69\164\x79"]) { goto m9rtW; } goto Mk26N; ZMb8U: $users = $this->UserModel->getList(["\151\144" => $users], ["\151\144", "\x6e\x69\x63\153\156\x61\155\145"]); goto o73UM; hgorL: a8yuf: goto vLFr6; fv9K3: $data["\163\x68\141\x72\145"] = ["\164\151\164\154\x65" => $data["\x61\x63\164\151\166\151\x74\171"]["\x73\150\x61\x72\145\137\164\151\164\x6c\x65"], "\154\x69\156\x6b" => $this->W["\163\x69\164\x65\x72\x6f\x6f\x74"] . "\141\160\x70" . ltrim($this->createMobileUrl("\151\156\x64\x65\x78", ["\151\144" => $id, "\x75\165\x69\x64" => $this->uid]), "\56"), "\x69\x6d\x67\x55\x72\x6c" => $this->W["\x61\x74\164\141\x63\x68\x75\x72\x6c"] . $data["\x61\x63\164\151\166\x69\x74\171"]["\x73\x68\x61\162\x65\137\x69\x6d\141\x67\x65"], "\x64\x65\163\143" => $data["\x61\x63\x74\151\166\151\x74\x79"]["\156\x61\x6d\x65"] . "\357\274\214\345\217\x82\345\x8a\xa0\345\x85\221\346\x8d\242\345\xa5\226\xe5\223\201"]; goto W_qnf; s86pB: $data["\x61\143\x74\x69\x76\151\x74\x79"] = $this->ActivityModel->getOne($where, "\x2a"); goto wE2Ra; eDNZK: } public function post() { goto x3LLn; Ykn8t: $log = $this->UserLogModel->count(["\x75\x69\144" => $this->uid, "\141\x63\164\x69\x76\x69\164\171\x5f\x69\x64" => $activity_id]); goto F2inW; Yug4v: $user = $this->getUserInfo(["\x69\144" => $uid, "\x75\x6e\x69\141\143\x69\144" => $this->W["\x75\156\151\x61\x63\x69\x64"]], ["\x69\144"]); goto JtVwR; Fi657: $this->ajaxReturn(301, "\346\202\xa8\xe6\x9c\200\345\xa4\x9a\xe5\217\xaf\344\xbb\xa5\xe7\273\x99\xe5\x88\xab\344\xba\xba\345\x8a\251\345\212\x9b\40" . $activity["\164\x69\x6d\145\x73"] . "\x20\346\254\xa1"); goto SfNT4; JjeAL: if (!$activity_user) { goto zppGl; } goto pnKs9; yYYff: if (!($uid == $this->uid)) { goto Iagi6; } goto C7H5p; C7H5p: $this->ajaxReturn(301, "\xe4\xb8\x8d\xe5\217\xaf\xe4\xbb\245\xe7\273\x99\xe8\x87\252\345\267\xb1\345\x8a\xa9\xe5\212\x9b"); goto ezKHC; rmI0a: goto hYkGf; goto Uk3G_; beVl1: $this->ajaxReturn(301, "\350\257\267\xe5\x9c\xa8\345\276\256\xe4\277\241\347\xab\xaf\346\x89\x93\xe5\274\200"); goto hpUV2; Uk3G_: zppGl: goto z7_WU; ajVE8: $activity_user = $this->ActivityUserModel->getOne(["\x75\x69\x64" => $uid, "\x61\143\164\x69\x76\x69\x74\171\137\151\x64" => $activity_id]); goto JjeAL; sAcC8: $activity = $this->ActivityModel->getOne($where, ["\151\144", "\164\151\155\145\163"]); goto Oq6f3; SfNT4: Huv0W: goto z5HF4; pcsgI: $this->ajaxReturn(200, ''); goto lIIEo; F2inW: if (!($log && $log >= $activity["\164\x69\x6d\145\x73"])) { goto Huv0W; } goto Fi657; Oq6f3: if ($activity) { goto z0uiZ; } goto VgY67; pnKs9: $this->ActivityUserModel->update(["\165\151\144" => $uid, "\x61\x63\164\x69\166\151\x74\171\137\151\x64" => $activity_id], ["\164\151\155\x65\x73\x20\x2b\75" => 1]); goto rmI0a; d2Jua: hYkGf: goto pcsgI; z7_WU: $this->ActivityUserModel->add(["\x61\x63\x74\x69\166\151\x74\x79\x5f\151\x64" => $activity_id, "\x75\151\x64" => $uid, "\x74\x69\155\145\x73" => 1]); goto d2Jua; w5nax: $uid = intval($this->GPC["\165\165\x69\144"]); goto UF6ZV; hpUV2: GPeLp: goto w5nax; jqbHV: z0uiZ: goto Yug4v; UF6ZV: $activity_id = intval($this->GPC["\141\x63\x74\x69\x76\x69\164\171\x5f\151\144"]); goto yYYff; gH9l2: $this->ajaxReturn(301, "\xe7\224\xa8\xe6\210\xb7\344\270\215\345\xad\230\xe5\234\250"); goto EXLjz; ezKHC: Iagi6: goto C2gJU; EXLjz: mskjh: goto Ykn8t; VgY67: $this->ajaxReturn(301, "\346\xb4\xbb\xe5\x8a\250\xe4\270\x8d\345\xad\230\xe5\x9c\xa8"); goto jqbHV; x3LLn: if ($this->uid) { goto GPeLp; } goto beVl1; C2gJU: $where = ["\151\144" => $activity_id, "\165\x6e\151\141\143\x69\x64" => $this->W["\x75\x6e\151\141\x63\151\x64"], "\163\x74\141\162\164\40\74" => time(), "\145\x6e\x64\40\76" => time()]; goto sAcC8; z5HF4: $this->UserLogModel->add(["\x74\x6f\x5f\x75\x69\x64" => $uid, "\x61\x63\x74\x69\x76\x69\164\x79\137\151\x64" => $activity_id, "\x75\x69\144" => $this->uid, "\165\156\x69\x61\143\x69\x64" => $this->W["\x75\156\x69\141\x63\151\144"], "\143\x61\154\154\137\x74\x69\155\145" => time(), "\x74\x69\x6d\145\163" => 1]); goto ajVE8; JtVwR: if ($user) { goto mskjh; } goto gH9l2; lIIEo: } public function moreuser() { goto FSNU0; aVM5u: $data["\x6c\151\163\x74"] = $this->UserLogModel->getList(["\x74\157\x5f\x75\x69\x64" => $uid, "\x61\x63\x74\x69\166\x69\164\x79\137\151\144" => $activity_id], ["\x75\151\144"], ["\151\x64\40\x64\x65\163\143"], [20]); goto DsLjb; FSNU0: $uid = intval($this->GPC["\x75\165\151\144"]); goto UQ74F; p2xPV: if (!$uid) { goto RfVs_; } goto aVM5u; Q2Gql: fhLK3: goto pG2Mk; WHH0G: if (!$uids) { goto UlZje; } goto Yk41K; GM17i: $this->ajaxReturn(200, '', $data); goto CnlUJ; Yk41K: $users = $this->UserModel->getList(["\151\x64" => $uids], ["\x69\144", "\156\x69\143\x6b\156\x61\155\x65", "\x68\x65\x61\x64\x69\155\147\x75\x72\x6c"]); goto uoQsv; Ovimd: foreach ($data["\x6c\151\163\164"] as &$value) { $value = array_merge($value, $users[$value["\x75\151\144"]]); p3oLi: } goto Q2Gql; uoQsv: $users = $this->arrayIndex($users, "\x69\144"); goto Ovimd; pG2Mk: UlZje: goto P2AUp; UQ74F: $activity_id = intval($this->GPC["\141\143\x74\x69\x76\x69\164\x79\137\151\144"]); goto QNf7G; QNf7G: $data["\x6c\151\x73\x74"] = []; goto p2xPV; DsLjb: $uids = []; goto mTJGc; P2AUp: RfVs_: goto GM17i; mTJGc: foreach ($data["\154\151\163\164"] as $value) { $uids[] = $value["\165\151\x64"]; wUbq6: } goto wfK9g; wfK9g: a9uBG: goto WHH0G; CnlUJ: } public function morerank() { goto xDgkr; PbJZy: $data["\x70\x61\147\145"] = $page + 1; goto EN8JC; Z014V: $this->ajaxReturn(200, '', $data); goto cftp0; rifTG: cJymv: goto hrEPF; NFHv0: RnhyI: goto Z014V; v7eMW: $activity_id = intval($this->GPC["\x61\x63\164\x69\166\151\164\171\x5f\x69\144"]); goto TCyDN; FMD5E: foreach ($data["\x6c\x69\x73\164"] as $key => &$value) { goto WBqCJ; B9NZ6: $value["\x72\x61\x6e\x6b"] = $key + 1 + $this->size * ($page - 1); goto chXE1; cFTzx: HEXyZ: goto B9NZ6; q8mnb: if ($key < 3 && $page == 1) { goto UpSLi; } goto F7tWr; bSlIP: $value["\143\x6c\141\x73\163"] = "\162\x61\156\x6b\55\x6e\165\155\55" . ($key + 1); goto cFTzx; b2xUX: goto HEXyZ; goto LLva_; chXE1: o7ZpN: goto kfjDz; WBqCJ: $value = array_merge($value, $users[$value["\x75\151\144"]]); goto q8mnb; F7tWr: $value["\x63\x6c\x61\x73\163"] = ''; goto b2xUX; LLva_: UpSLi: goto bSlIP; kfjDz: } goto rifTG; EN8JC: if (!$uid) { goto RnhyI; } goto SqvS_; nOkci: uOSiw: goto bwUV0; xDgkr: $uid = intval($this->GPC["\x75\165\x69\x64"]); goto v7eMW; R8WGe: $users = $this->arrayIndex($users, "\x69\x64"); goto FMD5E; O1fk0: if (!(count($data["\x6c\151\x73\164"]) < $this->size)) { goto GLqfV; } goto GUyjp; b7iuN: $users = $this->UserModel->getList(["\x69\144" => $uids], ["\151\144", "\x6e\151\x63\153\x6e\141\x6d\145", "\150\x65\x61\x64\x69\x6d\147\x75\162\154"]); goto R8WGe; CeA2b: $data["\x6c\x69\x73\164"] = $this->ActivityUserModel->getList(["\141\x63\x74\x69\x76\x69\164\171\137\151\144" => $activity_id], ["\165\x69\144", "\164\151\155\145\163"], ["\x74\x69\155\x65\163\x20\144\x65\163\x63", "\x69\144\40\144\x65\x73\143"], [$page, $this->size]); goto O1fk0; YMq0W: $page = $page ? $page : 1; goto wBeCK; aHPN1: foreach ($data["\x6c\x69\163\164"] as $value) { $uids[] = $value["\165\x69\144"]; LKYZZ: } goto nOkci; hrEPF: bOQxn: goto PbJZy; TCyDN: $page = intval($this->GPC["\160\141\147\145"]); goto YMq0W; SqvS_: $data["\x75\163\x65\162\137\x6c\151\x73\164"] = $this->UserLogModel->getList(["\x74\157\137\x75\151\x64" => $uid, "\141\143\x74\x69\166\x69\164\x79\x5f\151\144" => $activity_id], ["\x75\151\x64"], ["\x69\144\40\144\x65\x73\x63"], [1, $this->size]); goto NFHv0; GUyjp: $data["\155\157\x72\x65"] = false; goto rzz10; bwUV0: if (!$uids) { goto bOQxn; } goto b7iuN; rzz10: GLqfV: goto Xf3TK; Xf3TK: $uids = []; goto aHPN1; wBeCK: $data["\x6d\157\162\x65"] = true; goto CeA2b; cftp0: } public function prize() { goto FksE2; p8GFC: y0QE0: goto Mv_Ba; vkGpC: $this->ajaxReturn(303, "\344\272\272\xe6\xb0\224\xe4\xb8\215\350\xb6\263\347\xbb\xa7\347\273\255\xe5\x8a\xa0\xe6\xb2\271\x5b\63\x5d"); goto wRh2k; sbatx: ruGo0: goto DwnQL; h2gg0: $this->ajaxReturn(301, "\346\264\273\345\212\xa8\xe5\267\262\xe7\xbb\223\xe6\235\x9f"); goto Cg7lq; cEc4p: $data["\141\x63\164\151\x76\x69\x74\x79"] = $this->ActivityModel->getOne($where, "\x69\x64"); goto Mhijd; HiEaj: $this->ActivityUserModel->rollback(); goto RhwmH; CGeiG: $result3 = $this->UserPrizeModel->add(["\165\x6e\x69\141\143\151\144" => $this->W["\x75\x6e\151\x61\x63\151\x64"], "\x61\x63\164\151\166\151\x74\171\x5f\151\144" => $activity_id, "\160\162\151\172\145\x5f\151\144" => $prize_id, "\165\x69\x64" => $this->uid, "\x63\162\x65\x61\164\x65\137\x74\151\x6d\x65" => time()]); goto USlhF; u0JII: $where = ["\151\x64" => $activity_id, "\165\x6e\x69\141\143\151\x64" => $this->W["\165\156\151\x61\x63\151\x64"], "\163\164\141\162\164\40\x3c" => time(), "\145\156\144\40\x3e" => time()]; goto cEc4p; KTYdH: $max = $this->UserPrizeModel->count(["\x75\x69\x64" => $this->uid, "\x70\162\151\x7a\x65\x5f\151\x64" => $prize_id]); goto dYgG9; RhwmH: $this->ajaxReturn(303, "\345\245\226\xe5\x93\201\345\xb7\xb2\xe5\x85\x91\345\256\x8c"); goto osDrT; xLNIf: if ($my_call) { goto ruGo0; } goto r8IBa; Mv_Ba: $rest = $my_call["\164\151\x6d\145\x73"] - $my_call["\x75\163\x65\144"]; goto vCGSb; wRh2k: A5WfJ: goto bvXC8; bvXC8: $result2 = $this->PrizeModel->update(["\151\x64" => $prize_id, "\x67\x69\166\x65\x20\x3c" => $prize["\141\155\x6f\165\156\x74"]], ["\x67\151\166\x65\40\x2b\x3d" => 1]); goto ObuKD; dYgG9: if (!($max >= $prize["\x6d\x61\x78"])) { goto Zw5Nz; } goto k30Ep; bw0ao: $this->ajaxReturn(200, "\345\x85\x91\xe6\215\xa2\xe6\x88\220\xe5\x8a\x9f"); goto QJhYd; KGDR2: $this->ActivityUserModel->begin(); goto fHZ4J; USlhF: if ($result3) { goto TsuXh; } goto mVBzv; IDLtE: $this->ajaxReturn(301, "\xe8\xaf\267\345\234\xa8\345\xbe\256\344\277\xa1\347\253\xaf\346\x89\x93\xe5\274\200"); goto aTR3N; osDrT: UdXNp: goto CGeiG; vCGSb: if (!($rest < $prize["\156\145\x65\x64\x5f\x63\141\x6c\154"])) { goto rQ89h; } goto mRVz1; m4xok: $prize_id = intval($this->GPC["\x70\x72\151\x7a\145\137\151\x64"]); goto u0JII; Cg7lq: tPriu: goto RukKl; mVBzv: $this->ActivityUserModel->rollback(); goto BaR3b; RukKl: $my_call = $this->ActivityUserModel->getOne(["\x75\x69\x64" => $this->uid, "\x61\143\x74\x69\166\x69\164\x79\137\x69\144" => $activity_id], "\x2a"); goto xLNIf; DwnQL: $prize = $this->PrizeModel->getOne(["\x69\144" => $prize_id, "\x61\143\x74\x69\x76\x69\164\x79\137\x69\x64" => $activity_id], "\52"); goto eA0zv; eA0zv: if (!(!$prize || $prize["\156\145\x65\144\137\x63\x61\x6c\x6c"] <= 0)) { goto y0QE0; } goto GVaLM; fHZ4J: $result1 = $this->ActivityUserModel->update(["\x69\x64" => $my_call["\x69\144"], "\164\151\x6d\x65\x73\40\x3e\75" => $prize["\156\145\145\x64\x5f\x63\141\154\154"]], ["\164\151\155\x65\163\40\55\x3d" => $prize["\x6e\145\x65\144\137\x63\141\x6c\x6c"], "\x75\x73\x65\144\x20\x2b\75" => $prize["\x6e\145\x65\144\137\143\x61\154\154"]]); goto wcSeH; ec5Yg: $this->ActivityUserModel->rollback(); goto vkGpC; aTR3N: pUuuZ: goto WjGYt; buxYw: $this->ActivityUserModel->commit(); goto bw0ao; wcSeH: if ($result1) { goto A5WfJ; } goto ec5Yg; WjGYt: $activity_id = intval($this->GPC["\x61\x63\x74\151\166\151\x74\x79\137\x69\x64"]); goto m4xok; FksE2: if ($this->uid) { goto pUuuZ; } goto IDLtE; BaR3b: $this->ajaxReturn(303, "\xe5\205\x91\346\215\xa2\345\xa4\xb1\xe8\264\xa5"); goto gCH3n; kfR1z: rQ89h: goto KTYdH; l6qiT: Zw5Nz: goto KGDR2; r8IBa: $this->ajaxReturn(301, "\344\272\272\xe6\260\224\344\270\215\xe8\xb6\xb3\xe7\xbb\xa7\347\273\255\345\x8a\xa0\xe6\xb2\271\x5b\x31\135"); goto sbatx; ObuKD: if ($result2) { goto UdXNp; } goto HiEaj; Mhijd: if ($data["\141\x63\164\151\x76\151\164\x79"]) { goto tPriu; } goto h2gg0; k30Ep: $this->ajaxReturn(302, "\346\xaf\217\344\272\272\xe9\231\220\345\205\x91\346\215\242\x20" . $prize["\155\x61\x78"] . "\40\346\xac\xa1\346\225\xb0"); goto l6qiT; GVaLM: $this->ajaxReturn(301, "\345\xa5\226\xe5\223\201\344\xb8\215\345\255\230\345\234\250"); goto p8GFC; gCH3n: TsuXh: goto buxYw; mRVz1: $this->ajaxReturn(302, "\xe4\272\272\346\260\224\344\270\215\xe8\xb6\263\xe7\xbb\247\347\273\xad\345\x8a\240\xe6\xb2\xb9\133\x32\135"); goto kfR1z; QJhYd: } }