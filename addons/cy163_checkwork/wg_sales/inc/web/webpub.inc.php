<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator          |
    |              on 2018-08-04 11:38:00              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 class Wg_sales_Web_Webpub extends SalesBaseController { public $cate = array(); public $size = 10; public function init() { goto bKU76; bKU76: parent::init(); goto nz6pw; nz6pw: $this->site->loadmodule("\160\x75\142\115\x6f\144\x75\x6c\145"); goto EaS31; EaS31: $this->site->loadmodule("\143\x61\x74\x65\x67\157\x72\171\x4d\157\144\165\154\145"); goto A7Sbq; A7Sbq: $this->site->loadmodule("\x61\162\164\x69\x63\154\145\x4d\157\x64\165\154\145"); goto o3ApX; o3ApX: } public function index() { goto lmbVl; QyBet: $data["\x70\141\x67\145\x72"] = pagination($total, $pindex, $this->size); goto XZ6YY; lmbVl: $pindex = max(1, intval($this->site->_GPC["\x70\141\x67\x65"])); goto bOYn6; wPXW5: $where = ["\x75\151\144" => $this->uid, "\143\x61\x74\x65" => $cate]; goto Ay72r; WlgTH: $page = intval($_GET["\160\x61\x67\x65"]) ? intval($_GET["\160\x61\x67\x65"]) : 1; goto IYR1F; D8D6Y: $cate = $cate ? $cate : 1; goto wPXW5; IYR1F: $data["\143\141\x74\145\147\x6f\162\171"] = $this->site->categoryModule->getAllCategory(["\165\156\151\x61\x63\151\x64" => $this->uid, "\144\x65\154" => 0]); goto X4cJV; bOYn6: $cate = intval($_GET["\x63\x61\x74\145"]); goto D8D6Y; Ay72r: $total = $this->site->pubModule->count($where); goto WlgTH; XZ6YY: $data["\x63\x61\164\x65"] = $cate; goto iu6Xw; X4cJV: $data["\x63\141\164\145\147\x6f\162\171"] = $this->site->arrayIndex($data["\x63\141\164\145\x67\157\162\171"], "\151\x64"); goto GbZG1; iu6Xw: $this->site->assign($data); goto K07Pm; GbZG1: $data["\154\151\x73\x74"] = $this->site->pubModule->getList($where, "\52", ["\x69\144\x20\144\145\x73\143"], [$page, $this->size]); goto QyBet; K07Pm: } public function edit() { goto JjfPh; jEqA1: if ($result) { goto C6pzx; } goto KHzw4; rJY6L: $result = $this->site->pubModule->add($data); goto ZSPeC; Oj0eu: if ($id) { goto bUzJq; } goto rJY6L; h7V33: $data["\164\x69\164\154\145"] = trim($_POST["\x74\x69\164\x6c\x65"]); goto SE00W; BxmZJ: $data["\x69\155\x61\x67\x65"] = json_encode($image); goto tM4Xr; vsZTr: bUzJq: goto imp1V; KHzw4: message("\xe6\x9b\264\346\x96\260\xe5\244\261\xe8\264\245"); goto e1HNG; imp1V: $result = $this->site->pubModule->update($where, $data); goto BbJiZ; gRdMb: Iont3: goto uF3h_; YclEb: $pic = $_POST["\151\x6d\x61\x67\x65"]; goto ucHN3; cspOr: $images = @json_decode($data["\x61\x72\164\151\x63\x6c\145"]["\151\155\x61\x67\145"], true); goto wa2S0; tnN2L: ag9Pz: goto EXCHH; hTAtW: C6pzx: goto LOErt; kJqeb: aM5Jc: goto XmKLA; HnXyR: $data["\x61\162\x74\151\143\154\145"]["\x69\155\141\x67\x65"] = $images; goto kJqeb; pvXqv: FN2Lv: goto MiTlG; vRo6i: if (!$this->site->ispost()) { goto L1zD3; } goto YclEb; Zl4kW: $this->site->assign($data); goto ejIw9; xWy29: $where = ["\151\x64" => $id]; goto vRo6i; wa2S0: if (!$images) { goto qYpNq; } goto UUIp9; BbJiZ: mQtnZ: goto jEqA1; ucHN3: $image = []; goto N38yl; tM4Xr: if (!(!$data["\143\157\156\164\145\156\x74"] || !$data["\x74\151\x74\x6c\x65"])) { goto QSeqz; } goto u9YtW; KWt4M: QSeqz: goto Oj0eu; XmKLA: $data["\143\141\164\x65"] = $this->site->categoryModule->getAllCategory(["\x75\156\151\x61\x63\151\144" => $this->uid, "\x64\145\154" => 0]); goto Zl4kW; N38yl: if (!$pic) { goto Iont3; } goto wcf3g; wcf3g: foreach ($pic as $k => $im) { goto YuIxd; QtTQ3: qo4KO: goto cUSsz; YuIxd: if (!$im) { goto wyQKC; } goto SJI_w; SJI_w: $image[] = ["\165\162\x6c" => $this->site->formatArrImage(["\165\x72\x6c" => $im])["\165\x72\x6c"]]; goto KVxMa; mWTjh: if (!(count($image) > 2)) { goto rQIq2; } goto nRJq4; nRJq4: goto wYuoo; goto nORF0; nORF0: rQIq2: goto QtTQ3; KVxMa: wyQKC: goto mWTjh; cUSsz: } goto rLqhT; rLqhT: wYuoo: goto gRdMb; SE00W: $data["\143\x6f\156\x74\145\156\164"] = trim($_POST["\143\x6f\156\x74\145\156\x74"]); goto BxmZJ; CeOdx: if (!$id) { goto aM5Jc; } goto mEBln; EXCHH: qYpNq: goto HnXyR; JjfPh: $id = (int) $this->site->_GPC["\151\x64"]; goto xWy29; MiTlG: L1zD3: goto CeOdx; uF3h_: $data["\x63\x61\164\145\147\157\x72\171\x5f\x69\x64"] = intval($_POST["\143\x61\164\145\147\157\162\171\x5f\151\x64"]); goto h7V33; ZSPeC: goto mQtnZ; goto vsZTr; UUIp9: foreach ($images as &$im) { $im["\165\162\154"] = $this->site->formatArrImage($im)["\165\x72\154"]; O0iUS: } goto tnN2L; LOErt: message("\xe6\233\264\xe6\x96\260\346\210\220\345\212\237", $this->site->webUrl("\x70\x75\x62")); goto pvXqv; u9YtW: message("\345\x86\x85\345\xae\271\xe6\x88\x96\346\240\207\xe9\242\230\344\270\215\xe8\203\xbd\xe4\270\xba\347\xa9\xba"); goto KWt4M; mEBln: $data["\141\x72\164\151\143\154\145"] = $this->site->pubModule->getOne($where); goto cspOr; e1HNG: goto FN2Lv; goto hTAtW; ejIw9: } function del() { goto nK7xA; e2Fr2: exit; goto yGVwk; B_CNg: $article = $this->site->pubModule->getOne(["\x69\144" => $id]); goto YG6Ao; PFJAo: $article_id = $article["\x61\x72\164\151\x63\x6c\x65\137\x69\144"]; goto MMVsK; KQrsG: $this->site->pubModule->del(["\x69\144" => $id]); goto Npq03; MMVsK: if (!$article_id) { goto Rylgq; } goto xTDUE; YG6Ao: $category_id = $article["\143\x61\164\x65\x67\x6f\162\x79\137\x69\144"]; goto PFJAo; Z2Uj3: Rylgq: goto KQrsG; nK7xA: $id = (int) $this->site->_GPC["\x69\x64"]; goto B_CNg; xTDUE: $this->site->articleModule->del($category_id, ["\x69\x64" => $article["\141\x72\164\151\143\154\145\x5f\x69\144"]]); goto Z2Uj3; Npq03: echo json_encode(["\x63\157\x64\x65" => 0]); goto e2Fr2; yGVwk: } function status() { goto yzEv2; QJQ3j: if ($article_id) { goto Lz_bM; } goto qvqKV; a2uMD: $article_id = $article["\x61\x72\164\x69\x63\154\145\x5f\151\x64"]; goto MHGGm; AKsff: $status = (int) $this->site->_GPC["\x73\164\141\x74\165\x73"]; goto ELqoR; x_hH_: O7AQM: goto BJEYD; L_dzX: goto PZH1l; goto M_4no; gwMH8: $category_id = $article["\x63\141\x74\145\x67\x6f\162\x79\x5f\x69\x64"]; goto a2uMD; Nn70Q: unset($article["\x69\144"], $article["\165\151\144"], $article["\143\141\x74\145"], $article["\163\x74\141\164\165\x73"], $article["\x6d\x6f\156\x65\x79"], $article["\x63\141\x74\x65\x67\157\162\x79\137\151\x64"], $article["\x61\162\164\x69\x63\154\145\x5f\x69\144"], $article["\x75\x70\144\x61\x74\145\x5f\164\151\155\x65"]); goto EgIN0; mWHRb: exit; goto ow7pc; RRFbR: if ($article_id) { goto O7AQM; } goto L_dzX; TemNr: mqkrI: goto lURc0; ow7pc: goto mqkrI; goto qGaMB; EgIN0: $article_id = $this->site->articleModule->add($category_id, $article); goto QJQ3j; BJEYD: $this->site->articleModule->del($category_id, ["\x69\144" => $article["\x61\162\164\x69\x63\154\x65\x5f\x69\x64"]]); goto K4F2d; yzEv2: $id = (int) $this->site->_GPC["\151\144"]; goto AKsff; BPsuH: $this->site->pubModule->update(["\x69\x64" => $id], ["\141\162\164\151\143\x6c\145\x5f\x69\x64" => $article_id, "\163\x74\x61\164\x75\163" => $status, "\165\160\x64\x61\164\x65\x5f\164\151\x6d\145" => time()]); goto XcOX9; ELqoR: $article = $this->site->pubModule->getOne(["\x69\144" => $id]); goto gwMH8; K4F2d: PZH1l: goto BPsuH; lURc0: goto PZH1l; goto x_hH_; qvqKV: echo json_encode(["\143\157\144\145" => 1]); goto mWHRb; MHGGm: if ($status == 1) { goto vuJAs; } goto RRFbR; RdcyO: exit; goto s3dNv; qGaMB: Lz_bM: goto TemNr; M_4no: vuJAs: goto Nn70Q; XcOX9: echo json_encode(["\143\x6f\x64\145" => 0]); goto RdcyO; s3dNv: } }