<!DOCTYPE html>
<html class="hb-loaded">
<head>
  <title class="next-head">{$topic['title']} - {$config['name']}</title>
  <meta charset="utf-8" class="next-head">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" class="next-head">
  <meta name="format-detection" content="telephone=no" class="next-head">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" class="next-head">
  <meta name="apple-mobile-web-app-title" content="{$config['name']}" class="next-head">
  <meta name="theme-color" content="#ffffff" class="next-head">
  <style class="next-head">
      html,body,p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}ul{list-style:none}button,input,select,textarea{margin:0}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}img,embed,iframe,object,audio,video{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0;text-align:left}</style><style class="next-head">html, body {font-family: sans-serif;}</style>
 <style id="__jsx-style-1731116432">header{font-size:18px;color:#333;height:44px;line-height:44px;-webkit-text-align:center;text-align:center;position:relative;top:0px;background:#fff;width:100%;z-index:999999}header::after{content:'';display:block;position:absolute;left:0;bottom:0;background:#e0e0e0;width:100%;height:1px;-webkit-transform:scaleY(0.5);-ms-transform:scaleY(0.5);transform:scaleY(0.5);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left}header.black{background:rgba(30,32,36,0.7);color:#fff}header.black::after{background:rgba(30,32,36,0.1)}header .treturn{font-size:17px;color:#333;left:0;top:0;padding-left:14px;position:absolute;z-index:1;min-width:60px;-webkit-text-align:left;text-align:left;-webkit-text-decoration:none;text-decoration:none}header.black .treturn{color:#fff}header .treturn::before{content:'';display:inline-block;background:url({STATIC_ROOT}/images/header.png) 0 0 no-repeat;background-size:65px auto;width:10px;height:20px;vertical-align:sub;margin-right:6px}header.black .treturn::before{content:"";display:inline-block;background:url({STATIC_ROOT}/images/header.png) -11px 0 no-repeat;background-size:65px auto;width:10px;height:20px;vertical-align:sub;margin-right:6px}header .tochannel{display:block;box-sizing:content-box;padding:0px 60px;height:44px;line-height:44px;-webkit-text-decoration:none;text-decoration:none;color:#333;white-space:nowrap;word-break:break-all;overflow:hidden;-webkit-text-overflow:ellipsis;text-overflow:ellipsis}header.black .tochannel{color:#fff}header .gochannels{background:url({STATIC_ROOT}/images/header.png) -22px 0 no-repeat;background-size:65px auto;margin:14px 14px 0 0;position:absolute;right:0;top:0;width:22px;height:19px;z-index:1;-webkit-transition:.5s;transition:.5s}header.black .gochannels{background:url({STATIC_ROOT}/images/header.png) -42px 0 no-repeat;background-size:65px auto}header .gochannels.on{-webkit-transform:rotateZ(-180deg);-ms-transform:rotateZ(-180deg);transform:rotateZ(-180deg);-webkit-transform-origin:center center;-ms-transform-origin:center center;transform-origin:center center}header .share{background:url({STATIC_ROOT}/images/share_btn_zt.png) 0px 0 no-repeat;background-size:17px;margin:14px 14px 0 0;position:absolute;right:0;top:0;width:22px;height:19px;z-index:1}header .om{font-size:11px;color:#fff;background:#448aff;height:18px;line-height:18px;border-radius:9px;padding:0 6px;display:inline-block;vertical-align:middle;margin:-4px 0 0 6px}</style>
 <style id="__jsx-style-2978641363">.share{overflow:hidden;list-style:none;background:#fff}.share li{width:20%;float:left;font-size:0}.share li a{display:block;-webkit-text-align:center;text-align:center;-webkit-text-decoration:none;text-decoration:none;color:#333;font-size:14px;background-image:url({STATIC_ROOT}/images/share_icons_v0.svg);background-size:37px;background-repeat:no-repeat;height:35px}.share li a span{display:none}.text li a{height:52px}.text li a span{display:block;padding-top:35px;font-size:12px;line-height:12px}.share li a.share-weixin{background-position:center 1px}.share li a.share-moments{background-position:center -69px;background-size:39px}.share li a.share-qq{background-position:center -131px}.share li a.share-qzone{background-position:center -226px;background-size:42px}.share li a.share-weibo{background-position:center -233px;background-size:33px}</style><style id="__jsx-style-3180252158">.share-layer{width:100%;height:100%;z-index:99999;position:fixed;left:0;top:0;background:url({STATIC_ROOT}/images/weinxin_share_dialog.png) no-repeat right top rgba(0,0,0,.5);background-size:234px 95px;display:none}.share-layer.on{display:block}.guidewxf{background:url(//mat1.gtimg.com/www/mobi/2017/image/guidewxf.png) rgba(0,0,0,.8) 50% 85% no-repeat;background-size:80%}.guidewxt{background:url({STATIC_ROOT}/images/guidewxt.png) rgba(0,0,0,.8) 50% 85% no-repeat;background-size:76%}.guideqq{background:url({STATIC_ROOT}/images/guideqq.png) rgba(0,0,0,.8) 50% 85% no-repeat;background-size:80%}.qqlayout{background-image:url({STATIC_ROOT}/images/qq_share_dialog.png)}</style><style id="__jsx-style-2391763064">.share-wrap{position:fixed;bottom:0;height:130px;background:#fff;width:100%;-webkit-text-align:center;text-align:center;z-index:20;border:1px solid #e0e0e0;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%);-webkit-transition:.8s;transition:.8s;will-change:transform}.share-wrap.on{-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}.share-list{padding:20px 6px 10px 6px}.cancel{height:45px;line-height:45px;font-size:16px;color:#333;position:absolute;bottom:0;width:100%;-webkit-text-align:center;text-align:center}.cancel::before{content:'';position:absolute;left:0;background:#e0e0e0;width:100%;height:1px;-webkit-transform:scaleY(0.5);-ms-transform:scaleY(0.5);transform:scaleY(0.5);-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.layer{position:fixed;top:0;left:0;background:rgba(0,0,0,.5);height:100%;width:100%;display:none;z-index:10}.layer.on{display:block}</style>
 <style id="__jsx-style-2162895770">.main{width:100%}.gallery{width:100%;position:relative;background-color:#eee}.gallery:after{display:block;content:''}.gallery .img-wrap{position:relative;top:0;bottom:0;right:0;left:0;background-color:#eee}.intro{padding:17px 12px 10px 12px;font-size:16px;color:#666666;line-height:23px}.intro-placeholder{display:none;padding:14px 12px 4px 12px}.intro-placeholder p{height:18px;margin:8px 0;background:#eee}.intro span:first-child{font-weight:bold;padding-right:10px}.head{padding:20px 12px 6px 12px}.ipadqq{padding:0 30px}@media screen and (max-width:613px){.ipadqq{padding:0 20px}}</style><style id="__jsx-style-2618570385">.feedbackbottom{color:#b2b2b2;-webkit-text-decoration:none;text-decoration:none;display:inline-block;line-height:20px;margin-right:10px;border-right:1px solid #d5d5d5;padding-right:10px}.feedbackside{-webkit-text-decoration:none;text-decoration:none;display:block;width:35px;height:35px;background-color:#77AAFF;background-color:rgba(119,170,255,.9);border-radius:4px;margin:20px 0;font-size:11px;color:#fff;line-height:35px;-webkit-text-align:center;text-align:center}</style><style id="__jsx-style-1132106340">.elevator{position:fixed;bottom:10%;right:12px;z-index:3}.item{display:block;width:35px;height:35px;background-color:#77AAFF;background-color:rgba(119, 170, 255, .9);border-radius:4px;font-size:0}.item+.item{margin-top:20px}.item::before{content:'';display:inline-block;width:35px;height:35px;background-image:url({STATIC_ROOT}/images/elevator_icons_v0.svg);background-repeat:no-repeat}.item.refresh::before{background-position:7px center;background-size:55px}.item.go-top::before{background-position:-29px center;background-size:55px}.item.go-top{visibility:hidden}</style>

    <style>.info{position:relative;margin:0;line-height:16px;color:#888;font-size:12px}.info .mark{display:inline-block;position:relative;background-color:#e12222;border-radius:1px;color:white;height:10px;line-height:1;padding:3px 2px 1px;font-size:9px;font-style:normal;font-weight:100;-webkit-text-align:center;text-align:center;margin-right:.6em;top:1px;vertical-align:top}.info span+span{margin-left:1em}.info .icon{display:inline-block;vertical-align:top;margin-right:4px;width:14px;height:14px;background-repeat:no-repeat;background-position:center center;background-size:contain}.info .icon-hot{background-image:url({STATIC_ROOT}/images/icon-hot-topic.svg)}</style><style>.wrap{display:block;padding:0 12px}.wrap .inner{display:block;position:relative}.wrap .inner::after{content:'';display:block;position:absolute;left:0;bottom:0;background:#eaeaea;width:100%;height:1px;-webkit-transform:scaleY(0.5);-ms-transform:scaleY(0.5);transform:scaleY(0.5);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left}.wrap .inner.no-split::after{display:none}.wrap .inner a.link{display:block;width:100%;box-sizing:content-box;-webkit-text-decoration:none;text-decoration:none;padding:15px 12px;margin-left:-12px}.cf:before,.cf:after{content:" ";display:table}.cf:after{clear:both}.cf{*zoom:1}</style>
	<style>.title{color:#111;line-height:22px;margin-bottom:15px;overflow:hidden}.title .title-inner{margin-top:-4px}.image{width:33%;float:right;position:relative;overflow:hidden;margin-left:15px;pointer-events:none}.image .image-inner{position:absolute;top:0;bottom:0;right:0;left:0;background-color:#eaeaea;background-position:center center;background-repeat:no-repeat;background-size:45px 45px}.image::after{display:block;content:'';padding-top:65.6%}.image .sub-mark{display:block;position:absolute;right:6px;bottom:6px;font-size:9px;color:#FFF;background:rgba(0, 0, 0, .3);height:18px;line-height:18px;padding:0 10px;border-radius:9px}.top-time{font-size:11px;color:#448aff;line-height:12px;margin:5px 0 10px}.top-time i{display:inline-block;width:12px;height:12px;border-radius:6px;background-color:#448aff;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);margin-right:7px;vertical-align:top}.top-time i::after{content:'';display:block;float:right;width:4px;height:4px;border-width:0 0 1px 1px;border-style:solid;border-color:#FFF;margin:2px 2px 0 0}</style><style>.head{margin:20px 12px 10px 12px;border-left:2px solid black;padding-left:9px;font-size:12px;font-weight:bold;color:#000;line-height:12px}.split{height:7px;background:#f9f9f9;border-top:1px solid #e0e0e0;border-bottom:1px solid #e0e0e0}</style><style>.gap{display:block;position:relative;min-height:10px;background-color:#f9f9f9;font-size:0}.gap::before,.gap::after{content:'';display:block;position:absolute;left:0;background:#e0e0e0;width:100%;height:1px;-webkit-transform:scaleY(0.5);-ms-transform:scaleY(0.5);transform:scaleY(0.5);-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.gap::before{top:0;-webkit-transform-origin:top left;-ms-transform-origin:top left;transform-origin:top left}.gap::after{bottom:0;-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left}</style><style>.footer{background:#f9f9f9;color:#b2b2b2;font-size:12px;padding:16px 0 22px 0;-webkit-text-align:center;text-align:center;line-height:25px;position:relative}.footer.shijiuda{position:fixed;left:0;width:100%;bottom:0}.footer::before{content:'';display:block;position:absolute;left:0;top:0;background:#e0e0e0;width:100%;height:1px;-webkit-transform:scaleY(0.5);-ms-transform:scaleY(0.5);transform:scaleY(0.5);-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.footer .links a{color:#b2b2b2;-webkit-text-decoration:none;text-decoration:none;display:inline-block;line-height:20px;margin-right:10px}.footer .links a+a{border-left:1px solid #d5d5d5;padding-left:10px;margin-right:0px}.copyright{font-size:0.75rem}</style>





<style type="text/css">
    
    .big-image .wrap{
        display: block;
        padding: 0 12px;
    }
    .big-image .wrap .inner::after {
    content: '';
    display: block;
    position: absolute;
    left: 0;
    bottom: 0;
    background: #eaeaea;
    width: 100%;
    height: 1px;
    -webkit-transform: scaleY(0.5);
    -ms-transform: scaleY(0.5);
    transform: scaleY(0.5);
    -webkit-transform-origin: bottom left;
    -ms-transform-origin: bottom left;
    transform-origin: bottom left;
}
    .big-image .wrap .inner {
    display: block;
    position: relative;
}
.big-image .cf:before, .cf:after {
    content: " ";
    display: table;
}
.big-image .cf:after {
    clear: both;
}
.big-image .cf:before, .cf:after {
    content: " ";
    display: table;
}
.big-image .wrap .inner a.link {
    display: block;
    width: 100%;
    box-sizing: content-box;
    -webkit-text-decoration: none;
    text-decoration: none;
    padding: 15px 12px;
    margin-left: -12px;
}
.big-image .title {
    color: #111;
    line-height: 22px;
    margin-bottom: 10px;
    margin-top: 0px;
    overflow: hidden;
    padding-right: 6px;
}
.big-image .image {
    display: block;
    position: relative;
    margin-bottom: 11px;
    pointer-events: none;
    width: 100%;
}
.big-image .image::after {
    display: block;
    content: '';
    padding-top: 0;
}
.big-image .image .image-inner {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
    overflow: hidden;
    background-color: #eaeaea;
    background-position: center center;
    background-repeat: no-repeat;
    background-size: 75px 75px;
}
.big-image .image img {
    display: block;
    width: 100%;
    vertical-align: top;
    object-fit: cover;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-transition: opacity .2s ease-out;
    transition: opacity .2s ease-out;
    opacity: 0;
    background-color: #FFF;
}
.big-image .image .auto-ratio {
    display: block;
    content: '';
    padding-top: 56.25%;
}

.big-image .image .play-icon {
    position: absolute;
    z-index: 0;
    width: 50px;
    height: 50px;
    left: 50%;
    top: 50%;
    font-size: 0;
    -webkit-transform: translate(-50%,-50%);
    -ms-transform: translate(-50%,-50%);
    transform: translate(-50%,-50%);
    border-radius: 50%;
    background-image: url({STATIC_ROOT}/images/play-circle.svg);
    background-size: contain;
}
.big-image .image .duration {
    display: block;
    position: absolute;
    right: 6px;
    bottom: 6px;
    font-size: 9px;
    color: #FFF;
    background: rgba(0, 0, 0, .3);
    height: 18px;
    line-height: 18px;
    padding: 0 10px;
    border-radius: 9px;
}
.big-image .info {
    position: relative;
    margin: 0;
    line-height: 16px;
    color: #888;
    font-size: 12px;
}
.big-image .info {
    position: relative;
    margin: 0;
    line-height: 16px;
    color: #888;
    font-size: 11px;
}
.big-image .feedback{
    float: right;
    position: relative;
    height: 12px;
}
.big-image .fb_remove {
    position: relative;
    display: inline-block;
    overflow: hidden;
    float: right;
    color: #c1c1c1;
    -webkit-text-decoration: none;
    text-decoration: none;
    font-size: 10px;
    line-height: 1;
    margin-right: 1px;
    width: 16px;
    height: 12px;
    background-image: url({STATIC_ROOT}/images/icon-dislike.svg);
    background-size: 16px 12px;
    background-repeat: no-repeat;
    -webkit-text-indent: -99px;
    text-indent: -99px;
    z-index: 1;
    -webkit-tap-highlight-color: #eee;
}
 .fb_choose{
    position: absolute;
    font-size: 12px;
    right: 0;
    width: 122px;
    height: 46px;
    top: 0;
    z-index: 2;
}
.big-image .fb_choose-cancel {
    background-color: #bfbfbf;
    margin-left: 8px;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.big-image .fb_choose span {
    padding: 8px 10px;
    color: #fff;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    -o-border-radius: 2px;
    border-radius: 2px;
}


.three .images{
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-wrap: nowrap;
    -ms-flex-wrap: nowrap;
    flex-wrap: nowrap;
    -webkit-box-pack: space-between;
    -webkit-justify-content: space-between;
    -ms-flex-pack: space-between;
    justify-content: space-between;
    position: relative;
    overflow: hidden;
    margin-bottom: 11px;
}

.three .images .image-item+.image-item {
    margin-left: 10px;
}
.three .images .image-item::after {
    display: block;
    content: '';
    padding-top: 65.6%;
}
.three .images .image-item {
    -webkit-flex: 1 1 0;
    -ms-flex: 1 1 0;
    flex: 1 1 0;
    overflow: hidden;
    pointer-event: none;
    position: relative;
    pointer-events: none;
}

.three .images .image-item .image-item-inner {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
    background-color: #eaeaea;
    background-position: center center;
    background-repeat: no-repeat;
    background-size: 45px 45px;
}
.three .images .sub-mark{
    display: block;
    position: absolute;
    right: 6px;
    bottom: 6px;
    font-size: 9px;
    color: #FFF;
    background: rgba(0, 0, 0, .3);
    height: 18px;
    line-height: 18px;
    padding: 0 10px;
    border-radius: 9px;
}
</style>



</head>
<body>
<div>
    <div id="__next">
        <div>
			<div data-boss-expo="fun=pv">
				<div>
					<div>
						<div class="headroom-wrapper" style="height: 44px;">
							<div style="position: relative; top: 0px; left: 0px; right: 0px; z-index: 4; transform: translateY(0px);" class="headroom headroom--unfixed">
								<header id="header" class="header " >
									<a onclick="javascript:history.go(-1);" title="返回" class="treturn"></a>
									<a class="tochannel" >{$config['name']}专题</a>
								</header>
							</div>
						</div>
					</div>
					<div class="main">
						<?php $image = json_decode($topic['image'], true)[0];
						if($image){
						$url = $this->formatArrImage($image)['url'];
						?>
						<div class="gallery" >
							<div class="img-wrap" >
								<img src="{$url}" style="display: block; width: 100%; max-width: unset; max-height: unset; margin-left: 0px; margin-top: 0px; border: 0px none; vertical-align: top; visibility: visible; transition: opacity 200ms ease-out; opacity: 1; backface-visibility: hidden; ">
							</div>
						</div>
						<?php } ?>
						<div class="intro"  style="font-size: 17px;">
							<p><span>摘要</span><span >{$topic['text']}</span></p>
						</div>
						<div>
							<div class="head" style="font-size: 13px;padding: 0 0 0 9px;">专题资讯</div>
							<div id="main-list"></div>

						</div>
					</div>
				</div>
			</div>
    	</div>
	</div>
</div>

{template 'topic/template'}
<script src="{STATIC_ROOT}/js/zepto.js"></script>
<script>
    function formatTemplate(dta, tmpl) {
        var format = {
            name: function(x) {
                return x
            }
        };
        return tmpl.replace(/{([a-zA-Z_0-9]+)}/g, function(m1, m2) {
            if (!m2) {
                return "";
            }
            return (format && format[m2]) ? format[m2](dta[m2]) : dta[m2];
        });
    }
    var more_url="{php echo $this->createMobileUrl('topic',['topic_id' => $topic['id'],'_wg' => 'more']);}";
    function scollers() {
        if($(window).scrollTop()  > 500) {
//            $('#backToTop').show();
        } else {
//            $('#backToTop').hide();
        }

        if (totalheight = parseFloat($(window).height()) + parseFloat($(window).scrollTop()),
            $(document).height() <= totalheight + max) {
            if (loading) {
                return;
            }else {
                loading = true;
                loadingdata();
            }


        }
    }
    template_id0 = $('#template_pic0').html();
    template_id1 = $('#template_pic1').html();
    template_id3 = $('#template_pic3').html();
    template_pic_video = $('#template_pic_video').html();
    function getHtml(id) {
        if(id == 0) {
            return template_id0;
        }else if(id == 1) {
            return template_id1;
        }else if(id == 3) {
            return template_id3;
        }
    }
    function loadingdata() {
        $("#loadmore").show(),
            $.getJSON(more_url,
                {
                    page: page
                },
                function(data) {
                    $.each(data.list, function (key, dat) {
                        if(dat.type == 3) {
                            $('#main-list').append(formatTemplate(dat,template_pic_video));
                        }else {
                            $('#main-list').append(formatTemplate(dat,getHtml(dat.count)));
                        }
                    });
                    page++;
                    loading= false;
                    if(!data.more) {
                        loading = true;
                    }
                });
    }
    var max = 70, loading= false,page =1;
    window.addEventListener("scroll", scollers);
    loading = true;
    loadingdata();
    </script>
</body></html>