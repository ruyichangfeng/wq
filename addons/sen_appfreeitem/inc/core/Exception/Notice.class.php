<?php 

class Notice { private $obj; function __construct() { global $_W; load()->classs('weixin.account'); $this->obj = new WeiXinAccount($_W['account']); $this->set = intelligent_kindergartenModuleSite::$_SET; } function sendNewNoticeTpl($touser,$name,$content,$url,$first = '') { $first = $first ? $first : $this->set['notice_first']; $remark = $this->set['notice_remark']; $key = $this->set['notice_key']; $tpl_id_short = $this->set['notice_approve_tpl_id']; if($key != 'open') { return false; } $postdata['first'] = array('value'=>$first,'color'=>''); $postdata['keyword1'] = array('value'=>$name,'color'=>'#459ae9'); $postdata['keyword2'] = array('value'=>date("Y-m-d H:i:s"),'color'=>'#459ae9'); $postdata['keyword3'] = array('value'=>$content,'color'=>'#459ae9'); $postdata['remark'] = array('value'=>$remark,'color'=>''); $r = $this->obj->sendTplnotice($touser,$tpl_id_short,$postdata,$url); } function sendApproveTpl($touser,$first,$key_1,$remark,$url) { $key = $this->set['notice_key']; $tpl_id_short = $this->set['approve_tpl_id']; if($key != 'open') { return false; } $postdata['first'] = array('value'=>$first,'color'=>''); $postdata['keyword1'] = array('value'=>$key_1,'color'=>'#459ae9'); $postdata['keyword2'] = array('value'=>date("Y-m-d H:i:s"),'color'=>'#459ae9'); $postdata['remark'] = array('value'=>$remark,'color'=>''); $r = $this->obj->sendTplnotice($touser,$tpl_id_short,$postdata,$url); } }

?>