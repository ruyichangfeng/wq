{template 'header'}
<!--页面主结构开始-->
<div id="app" class="mui-views">
    <div class="mui-view">
        <div class="mui-navbar">
        </div>
        <div class="mui-pages">

        </div>
    </div>
</div>
<!--页面主结构结束-->
</body>
<script src="{MODULE_URL}assets/js/mui.min.js"></script>
<script src="{MODULE_URL}assets/js/mui.view.js "></script>
<script src="{MODULE_URL}assets/js/mui.zoom.js"></script>
<script src="{MODULE_URL}assets/js/mui.previewimage.js"></script>
<script>
    mui.init({
        subpages: [{
            url: "<?php echo $this->createMobileUrl('parent', array('page' => 'settings')) ?>",
            id: "settings"
        }]
    });
    //var home = document.getElementById("setting").innerHTML;
    // mui.querySelector(".mui-loading");
    {if $parentHasInfo}
    var viewApi = mui('#app').view({
        defaultPage: '#setting',
        styles:{
            top:'45px',//mui标题栏默认高度为45px；
            bottom:'0px',//默认为0px，可不定义；
            bounce: 'vertical'
        }
    });
    {else}
    var viewApi = mui('#app').view({
        defaultPage: '#settings',
        styles: {
            bounce: 'vertical'
        }
    });
    {/if}
    //初始化单页的区域滚动
    mui('.mui-scroll-wrapper').scroll();
    mui('.mui-scroll-wrapper').scroll();
    //初始化单页view

    mui.previewImage();
    var view = viewApi.view
    (function($) {
        //处理view的后退与webview后退
        var oldBack = $.back;
        $.back = function() {
            if (viewApi.canBack()) { //如果view可以后退，则执行view的后退
                viewApi.back();
            } else { //执行webview后退
                oldBack();
            }
        };
    })(mui);
    // document.getElementById("tel").addEventListener('tap', function() {
    //     if(mui.os.plus){
    //         plus.device.dial("18853145623");
    //     }else{
    //         location.href = 'tel:18853145623';
    //     }
    //
    // });
    //
    // mui('body').on('shown', '.mui-popover', function(e) {
    //     //console.log('shown', e.detail.id);//detail为当前popover元素
    // });
    // mui('body').on('hidden', '.mui-popover', function(e) {
    //     //console.log('hidden', e.detail.id);//detail为当前popover元素
    // });
    // var info = document.getElementById("info");
    // mui('body').on('tap', '.mui-popover-action li>a>b', function() {
    //     var a = this,
    //             parent;
    //     //根据点击按钮，反推当前是哪个actionsheet
    //     for (parent = a.parentNode; parent != document.body; parent = parent.parentNode) {
    //         if (parent.classList.contains('mui-popover-action')) {
    //             break;
    //         }
    //     }
    //     //关闭actionsheet
    //     mui('#' + parent.id).popover('toggle');
    //     info.innerHTML = "你刚点击了\"" + a.innerHTML + "\"按钮";
    // });
    // document.getElementById("confirmBtn").addEventListener('tap', function() {
    //     var btnArray = ['否', '是'];
    //     mui.confirm('确定请假吗，确认？', '微早教', btnArray, function(e) {
    //         if (e.index == 1) {
    //             info.innerText = '已申请';
    //             var obj = document.getElementById("confirmBtn");
    //             //obj.className = "style2";
    //             obj.setAttribute("class", "btn btn-leave-ed");
    //         } else {
    //             info.innerText = '请 假'
    //         }
    //     })
    // });
    // document.getElementById("toastBtn").addEventListener('tap', function() {
    //     mui.toast('申请已提交，请等待审核');
    // });
</script>
</html>
