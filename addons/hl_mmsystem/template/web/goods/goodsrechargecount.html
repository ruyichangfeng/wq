{template 'web/common/header'}

<div class="wrapper wrapper-content animated fadeInRight">

    <div class="row">

        <div class="col-sm-12">

            <div class="ibox-content">

                <form class="form-horizontal" role="form" method="post" >

                    <input type="hidden" name="c" value="site" />

                    <input type="hidden" name="a" value="entry" />

                    <input type="hidden" name="m" value="{php echo $this->module['name']}" />

                    <input type="hidden" name="do" value="goodsrechargecount" />

                    <input type="hidden" name="op" value="addrechargegoodslist" />

                    <input type="hidden" name="storeid" value="{$storeid}" />

                    <input type="hidden" name="goods_id" id="goods_id" value="" />

                    <input type="hidden" name="goods_price"  id="goods_price" value="" />

                    <div class="panel panel-primary" style="margin-top: 0px;margin-right: 0px;margin-bottom: 5px;margin-left: 0px;padding: 0px;">

                        <div class="panel-body">

                            <div class="form-group" style="margin-top: 0px;margin-right: 0px;margin-bottom: 5px;margin-left: 0px;padding: 0px;">

                                <label class="col-sm-1 control-label">充次项目</label>

                                <div class="col-sm-5">

                                    <input type="text" class="form-control"  name="rechargeGoodsName_Id"  value="" id="rechargeGoodsName_Id" data-toggle="modal" data-target="#rechargeGoodsId">

                                </div>

                                <label class="col-sm-1 control-label"></label>

                                <div class="col-sm-5">

                                    <div class="radio radio-info radio-inline" style="display: none">

                                        <input type="radio" name="grcifGetPoint" id="grcifGetPoint1" value="1" >

                                        <label for="grcifGetPoint1"> 是 </label>

                                    </div>

                                    <div class="radio radio-inline radio-danger" style="display: none">

                                        <input type="radio" name="grcifGetPoint" id="grcifGetPoint2" value="0" checked="" >

                                        <label for="grcifGetPoint2"> 否 </label>

                                    </div>

                                </div>

                            </div>

                            <div class="form-group" style="margin: 0px; padding: 0px;">

                                <label class="col-sm-1 control-label">共充次</label>

                                <div class="col-sm-2">

                                    <input type="text" class="form-control" name="rechargecount_Id" id="rechargecount_Id" />

                                </div>

                                <label class="col-sm-1 control-label" style="width: 6%">总价格（元）</label>

                                <div class="col-sm-2">

                                    <input type="text" class="form-control" id="goodsrechargecount_totalPrice" name="goodsrechargecount_totalPrice" >

                                </div>

                                <label class="col-sm-1 control-label">使用限制</label>

                                <div class="col-sm-2">

                                    <input type="text" class="form-control" id="goodsrechargecount_num" name="goodsrechargecount_num">

                                </div>

                                <label class="col-sm-1 control-label" style="width: 2%"> 次/</label>

                                <div class="col-sm-3">

                                    <select class="form-control" name="grcsetusedatetype" id="grcsetusedatetype">

                                        <option value="0"> 请选择（不选不限制）</option>

                                        <option value="1">永久</option>

                                        <option value="2">年</option>

                                        <option value="3">季度</option>

                                        <option value="4">月</option>

                                        <option value="5">周</option>

                                        <option value="6">天</option>

                                    </select>

                                </div>

                            </div>

                        </div>

                        <div class="panel-footer">

                            <i class="fa fa-warning" style="color: #e10c14"></i>  提示：充次为0表示无限次，限制为0表示不限制;充次项目默认不积分。

                        </div>

                    </div>

                    <div class="panel panel-primary"  style="margin-top: 0px;margin-right: 0px;margin-bottom: 0px;margin-left: 0px;padding: 0px;">

                        <div class="panel-heading">

                            有效期设置

                        </div>

                        <div class="panel-body">

                            <div class="form-group">

                                <div class="col-sm-3">

                                    <div class="radio radio-info radio-inline">

                                        <input type="radio" name="grcsetValidTime" id="grcsetValidTime1" value="1" checked>

                                        <label for="grcsetValidTime1"> 指定时间 </label>

                                    </div>

                                    <div class="radio radio-inline radio-danger">

                                        <input type="radio" name="grcsetValidTime" id="grcsetValidTime2" value="2">

                                        <label for="grcsetValidTime2"> 相对时间 </label>

                                    </div>

                                    <div class="radio radio-success radio-inline">

                                        <input type="radio" name="grcsetValidTime" id="grcsetValidTime3" value="3">

                                        <label for="grcsetValidTime3"> 永久有效 </label>

                                    </div>

                                </div>

                                <div class="col-sm-9">

                                    <div class="col-sm-8" id="grcsetValidTime_select">

                                        <div class="col-sm-4"><input placeholder="开始日期" class="laydate-icon form-control layer-date" id="start_specifiedStartTime" name="start_specifiedStartTime"></div>

                                        <div class="col-sm-4"><input placeholder="结束日期" class="laydate-icon form-control layer-date" id="end_specifiedEndTime" name="end_specifiedEndTime"></div>

                                    </div>

                                    <div class="col-sm-8" id="grcsetReletiveTime_select">

                                        <label class="col-sm-2 control-label" style="width:20%">从充次开始以后：</label>

                                        <div class="col-sm-2">

                                            <input type="text" class="form-control" id="goodsrechargecount_reletiveTimeNum" name="goodsrechargecount_reletiveTimeNum">

                                            <input placeholder="开始日期" class="form-control layer-date" id="start_reletiveStartTime" name="start_reletiveStartTime" type="hidden">

                                            <input placeholder="结束日期" class="form-control layer-date" id="end_reletiveStartTime" name="end_reletiveStartTime" type="hidden">

                                        </div>

                                        <div class="col-sm-4">

                                            <select class="form-control" name="goodsrechargecount_reletiveTimeNumtype" id="goodsrechargecount_reletiveTimeNumtype">

                                                <option value="0"> 请选择（不选不限制）</option>

                                                <option value="1">永久</option>

                                                <option value="2">年</option>

                                                <option value="3">季度</option>

                                                <option value="4">月</option>

                                                <option value="5">周</option>

                                                <option value="6">天</option>

                                            </select>

                                        </div>

                                        <label class="col-sm-1 control-label" style="width:30%"> 内有效（充次当天及算一天）</label>

                                    </div>

                                    <div class="col-sm-8" id="grcsetForeverTime_select">

                                        <div class="col-sm-4"><input placeholder="开始日期" class="form-control layer-date" id="start_ForeverStartTime" name="start_ForeverStartTime"></div>

                                        <div class="col-sm-4"><input placeholder="结束日期" class="form-control layer-date" id="end_ForeverEndTime" name="end_ForeverEndTime"></div>

                                    </div>

                                    <div class="col-sm-1"></div>



                                </div>

                            </div>

                        </div>

                        <div class="panel-footer">

                            <i class="fa fa-warning" style="color: #e10c14"></i>  注意：有效的范围包括起始和结束当天。

                        </div>

                    </div>

                    <div class="form-group" style="margin-top: 5px;margin-right: 0px;margin-bottom: 5px;margin-left: 0px;padding: 0px;">

                        <div class="col-sm-12" id="toolbar">

                            <button name="rechargrcountsubmit" type="button" id="rechargrcountsubmit" class="btn btn-primary"><i class="fa fa-plus"></i> 提 交 </button>

                            <button id="btn_delete" type="button" class="btn btn-default">

                                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除</button>

                            <input type="hidden" name="token" value="{$_W['token']}" />

                        </div>

                    </div>

                </form>

            </div>

            <div class="ibox-content">

                <div class="row row-lg">

                    <div class="col-sm-12">

                        <table id="rechargecounttabledata" data-mobile-responsive="true"></table>

                    </div>

                </div>

            </div>

        </div>

    </div>

</div>



<div class="modal inmodal fade" id="rechargeGoodsId" tabindex="-1" role="dialog"  aria-hidden="true" style="height: 600px;  margin-top: 5%;">

    <div class="modal-dialog modal-lg" role="document">

        <div class="modal-header" style="min-height:40px;">

            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>

            <h4 class="modal-title" style="float: left; margin-bottom: 5px;">请选择项目商品</h4>

        </div>

        <div class="modal-content" style="padding-top: 10px;">

            <div class="ibox-content" id="searchtoolbar">

                <form id="search_goods" class="form-horizontal" role="form">

                    <input type="hidden" name="c" value="site" />

                    <input type="hidden" name="a" value="entry" />

                    <input type="hidden" name="m" value="{php echo $this->module['name']}" />

                    <input type="hidden" name="do" value="goods" />

                    <input type="hidden" name="op" value="goodslisttabledata" />

                    <input type="hidden" name="storeid" value="{$storeid}" />

                    <div class="form-group">

                        <label class="col-sm-1 control-label" style="margin: 0px;">商品编码</label>

                        <div class="col-sm-2">

                            <input class="form-control" name="codekeyword" id="search_codekeyword" type="text" value="{$_GPC['codekeyword']}">

                        </div>

                        <label class="col-sm-1 control-label"  style="margin: 0px;">商品助记码</label>

                        <div class="col-sm-2">

                            <input class="form-control" name="pinYinkeyword" id="search_pinYinkeyword" type="text" value="{$_GPC['pinYinkeyword']}">

                        </div>

                        <label class="col-sm-1 control-label" style="margin: 0px;">商品名称</label>

                        <div class="col-sm-3">

                            <input class="form-control" name="keyword" id="search_keyword" type="text" value="{$_GPC['keyword']}">

                        </div>

                        <div class="col-sm-2">

                            <button class="btn btn-outline btn-primary" type="button" onclick="serachGoods()" id="btn_searchsubmit"><i class="fa fa-search"></i> 搜索</button>

                            <input type="hidden" name="token" value="{$_W['token']}" />

                        </div>

                    </div>

                </form>

            </div>

            <div class="ibox-content">

                <table id="goodslisttabledata" data-mobile-responsive="true"></table>

            </div>

            <div class="modal-footer">

                <button type="button" class="btn btn-white" data-dismiss="modal" id="btn_closeGoodsId">关闭</button>

                <button type="button" class="btn btn-primary" id="btn_SaveGoodsId">提交</button>

            </div>

        </div>

    </div>

</div>





<script>



    //日期范围限制

    var start = {

        elem: '#start_specifiedStartTime',

        format: 'YYYY-MM-DD',

        min: laydate.now(), //设定最小日期为当前日期

        max: '2099-06-16 23:59:59', //最大日期

        istime: true,

        istoday: true,

        choose: function (datas) {

            end.min = datas; //开始日选好后，重置结束日的最小日期

            end.start = datas //将结束日的初始值设定为开始日

        }

    };

    var end = {

        elem: '#end_specifiedEndTime',

        format: 'YYYY-MM-DD',

        min: laydate.now(),

        max: '2099-06-16 23:59:59',

        istime: true,

        istoday: true,

        choose: function (datas) {

            start.max = datas; //结束日选好后，重置开始日的最大日期

        }

    };

    laydate(start);

    laydate(end);

    $("#start_reletiveStartTime").attr("value",laydate.now());

    $("#end_reletiveStartTime").attr("value",laydate.now(365*19));

    $("#start_ForeverStartTime").attr("value",laydate.now());

    $("#end_ForeverEndTime").attr("value",laydate.now(365*19));

</script><!--日期-->





<script type="text/javascript">



    $(document).ready(function(){

        $("#grcsetReletiveTime_select").hide();

        $("#grcsetForeverTime_select").hide();

        $("#grcsetValidTime_select").show();



        $("#grcsetValidTime1").click(function () {

            $("#grcsetReletiveTime_select").hide();

            $("#grcsetForeverTime_select").hide();

            $("#grcsetValidTime_select").show();

        });

        $("#grcsetValidTime2").click(function () {

            $("#grcsetReletiveTime_select").show();

            $("#grcsetForeverTime_select").hide();

            $("#grcsetValidTime_select").hide();

        });

        $("#grcsetValidTime3").click(function () {

            $("#grcsetReletiveTime_select").hide();

            $("#grcsetForeverTime_select").hide();

            $("#grcsetValidTime_select").hide();

        });





        $("#goodsrechargecount_reletiveTimeNumtype").change(function () {

            var grcsetusedatetype = $("#goodsrechargecount_reletiveTimeNumtype").val();

            if(grcsetusedatetype == 0 || grcsetusedatetype == 1){

                $("#end_reletiveStartTime").attr("value",laydate.now(365*19));

                //$("#goodsrechargecount_reletiveTimeNum").attr("value","");

            }

            if(grcsetusedatetype == 2){

                $("#goodsrechargecount_reletiveTimeNum").attr("value",1);

                var reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

                $("#end_reletiveStartTime").attr("value",laydate.now(365*reletiveTimeNum));

                $("#goodsrechargecount_reletiveTimeNum").keyup(function () {

                    var reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

                    $("#end_reletiveStartTime").attr("value",laydate.now(365*reletiveTimeNum));

                });





            }

            if(grcsetusedatetype == 3){

                $("#goodsrechargecount_reletiveTimeNum").attr("value",1);

                var reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

                $("#end_reletiveStartTime").attr("value",laydate.now(90*reletiveTimeNum));

                $("#goodsrechargecount_reletiveTimeNum").keyup(function () {

                    var reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

                    $("#end_reletiveStartTime").attr("value",laydate.now(90*reletiveTimeNum));

                });





            }

            if(grcsetusedatetype == 4){

                $("#goodsrechargecount_reletiveTimeNum").attr("value",1);

                var reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

                $("#end_reletiveStartTime").attr("value",laydate.now(30*reletiveTimeNum));

                $("#goodsrechargecount_reletiveTimeNum").keyup(function () {

                    var reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

                    $("#end_reletiveStartTime").attr("value",laydate.now(30*reletiveTimeNum));

                });





            }

            if(grcsetusedatetype == 5){

                $("#goodsrechargecount_reletiveTimeNum").attr("value",1);

                var reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

                $("#end_reletiveStartTime").attr("value",laydate.now(7*reletiveTimeNum));

                $("#goodsrechargecount_reletiveTimeNum").keyup(function () {

                    var reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

                    $("#end_reletiveStartTime").attr("value",laydate.now(7*reletiveTimeNum));

                });





            }

            if(grcsetusedatetype == 6){

                $("#goodsrechargecount_reletiveTimeNum").attr("value",1);

                var reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

                $("#end_reletiveStartTime").attr("value",laydate.now(reletiveTimeNum));

                $("#goodsrechargecount_reletiveTimeNum").keyup(function () {

                    var reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

                    $("#end_reletiveStartTime").attr("value",laydate.now(reletiveTimeNum));

                });





            }

        });



        $('#rechargecounttabledata').bootstrapTable({

            url: '{php echo $this->createWebUrl('goods', array('op' => 'rechargegoodslist'));}',

            dataType: "json",

            contentType: "application/x-www-form-urlencoded",

            toolbar: '#toolbar',

            showPaginationSwitch:false,//是否显示数据条数选择框

            queryParamsType:'',

            queryParams: queryParamspage,//传递参数（*）

            sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）

            pageNumber:1,                       //初始化加载第一页，默认第一页

            pageSize: 10,                       //每页的记录行数（*）

            pageList: [10, 25, 50, 100],

            pagination: true,

            clickToSelect: true,

            height: 260,

            uniqueId: "id",

            columns: [{

                checkbox: true

            }, {

                field: 'grc_rechargeRuleDescription',

                title: '充次项目规则描述'

            }, ]

        });

        //得到查询的参数

        function queryParamspage (params) {

            var temp = {  //这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的

                pageSize: params.pageSize,  //页面大小

                pageNumber: params.pageNumber, //页码



            };

            return temp;

        };

        getgoodsdata();





    });

    $("#rechargecount_Id").keyup(function () {

        var goodscount = $("#rechargecount_Id").val();

        var goodsprice = $("#goods_price").val();

        $("#goodsrechargecount_totalPrice").attr("value",goodscount*goodsprice);



    });



    $("#grcsetusedatetype").change(function () {

        var grcsetusedatetype = $("#grcsetusedatetype").val();

        $("#goodsrechargecount_num").attr("value",1);



    });



    function getgoodsdata () {

        $('#goodslisttabledata').bootstrapTable({

            url: '{php echo $this->createWebUrl('goods', array('op' => 'goodslisttabledata'));}',

            method:"post",

            dataType: "json",

            contentType: "application/x-www-form-urlencoded",

            cache:false,  //是否使用缓存

            search:false, //显示搜索框

            showPaginationSwitch:false,//是否显示数据条数选择框

            queryParamsType:'',

            queryParams: queryParams,//传递参数（*）

            sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）

            pageNumber:1,                       //初始化加载第一页，默认第一页

            pageSize: 10,                       //每页的记录行数（*）

            pageList: [10, 25, 50, 100],

            pagination: true,

            clickToSelect: true,

            selectItemName:"id",

            height: 260,

            uniqueId: "id",

            columns: [{

                radio: true

            }, {

                field: 'id',

                title: '商品ID'

            }, {

                field: 'goo_code',

                title: '商品编码'

            },  {

                field: 'goo_name',

                title: '商品名称'

            },{

                field: 'goo_goodsOrService',

                title: '商品分类',

                formatter:googoodsOrService

            }, {

                field: 'goo_number',

                title: '商品库存',

                formatter:googoodsnumber

            },{

                field: 'goo_pinYin',

                title: '助记码'

            }, ]

        });

        //得到查询的参数

        function queryParams (params) {

            var temp = {  //这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的

                pageSize: params.pageSize,  //页面大小

                pageNumber: params.pageNumber, //页码

                searchcodekeywordstr: $("#search_codekeyword").val(),//后台请求传的查询参数

                searchpinYinkeywordstr:$("#search_pinYinkeyword").val(),

                searchkeywordstr:$("#search_keyword").val(),



            };

            return temp;

        };



    }

    function googoodsOrService (value, row, index) {

        if(value == 1){

            var result = "<span class='badge badge-primary'>实物商品</span>";

        }else{

            var result = "<span class='badge badge-success'>服务商品</span>";

        }

        return result;

    }

    function googoodsnumber (value, row, index) {

        var rowvalue = row ;

        var number = value;

        var result = "";

        if(number == 0 && rowvalue['goo_goodsOrService'] != 1){

            result += "<span class='label label-warning' >无限制</span>";

        }else{

            result += number;

        }

        return result;

    }



    //搜索

    function serachGoods() {

        $("#goodslisttabledata").bootstrapTable('refresh');

    }



    $("#btn_SaveGoodsId").click(function () {

        var arrselections = $("#goodslisttabledata").bootstrapTable('getSelections');

        var ids="";

        for(var i=0;i<arrselections.length;i++){

            if(i==0 || i=="0"){

                ids+=arrselections[i].id;

            }else{

                ids+=","+arrselections[i].id;

            }

        }

        var idArrdata=ids.split(",")

        if (arrselections.length <= 0) {

            swal("操作有误", "请选择要设置的项目！","error");

            return;

        }

        else{

            $.ajax({

                type: "post",

                dataType: 'jsonp',

                url: "{php echo $this->createWebUrl('goodsrechargecount', array('op' => 'ajaxgetgoodsonedata'))}",

                data: { idArr:idArrdata },

                success: function (data) {

                    $("#goods_id").attr("value",idArrdata);

                    $("#rechargeGoodsName_Id").attr("value",data.goo_name);

                    $("#goods_price").attr("value",data.goo_price);

                    $('#rechargeGoodsId').modal('hide')

                },

                error: function () {

                    swal("操作有误", "请关闭重新操作！","error");

                },

                complete: function () {



                }



            });

        }



    });



    $("#btn_delete").click(function () {

        var arrselections = $("#rechargecounttabledata").bootstrapTable('getSelections');

        var ids="";

        for(var i=0;i<arrselections.length;i++){

            if(i==0 || i=="0"){

                ids+=arrselections[i].id;

            }else{

                ids+=","+arrselections[i].id;

            }

        }

        var idArrdata=ids.split(",");

        if (arrselections.length <= 0) {

            swal("操作有误", "请选择要删除的项目！","error");

            return;

        }

        var packageid = parseInt(packageid);

        swal({

                title: "确定删除吗？",

                text: "你将无法恢复该数据信息！",

                type: "warning",

                showCancelButton: true,

                cancelButtonText: "取消删除！",

                confirmButtonColor: "#DD6B55",

                confirmButtonText: "确定删除！",

                closeOnConfirm: false

            },

            function(){

                $.ajax({

                    type: "post",

                    url: "{php echo $this->createWebUrl('goodsrechargecount', array('op' => 'ajaxdelete', 'storeid' => $storeid))}",

                    data: { idArr:idArrdata },

                    success: function (data, status) {

                        if (status == "success") {

                            swal({

                                title: "操作成功！",

                                text: data.error,

                                timer: 2000,

                                type:"success",

                                showConfirmButton: true

                            },function(){

                                $("#rechargecounttabledata").bootstrapTable('refresh');

                            });

                        }

                    },

                    error: function () {

                        swal("操作有误", "请选择要删除的项目！","error");

                    },

                    complete: function () {

                        $("#rechargecounttabledata").bootstrapTable('refresh');

                    }



                });

            });

    });

    $("#specifiedStartTime").click(function(){

        $(".qizhi").show();

        $(".cishu").hide();

    });



    $("#reletiveStartTime").click(function(){

        $(".cishu").show();

        $(".qizhi").hide();

    });

    $("#Permanent").click(function(){

        $(".cishu").hide();

        $(".qizhi").hide();

    });



    $("#rechargrcountsubmit").click(function () {

        var goods_id = $("#goods_id").val();

        var grc_goodsName = $("#rechargeGoodsName_Id").val();

        var grc_ifGetPoint = $("input[name='grcifGetPoint']:checked").val();

        var grc_count = $("#rechargecount_Id").val();

        var grc_totalPrice = $("#goodsrechargecount_totalPrice").val();

        var grc_num = $("#goodsrechargecount_num").val();

        var grc_setusedatetype = $("#grcsetusedatetype").val();

        var grc_setValidTime = $("input[name='grcsetValidTime']:checked").val();

        var grc_specifiedStartTime = $("#start_specifiedStartTime").val();

        var grc_specifiedEndTime = $("#end_specifiedEndTime").val();





        var grc_reletiveTimeNum = $("#goodsrechargecount_reletiveTimeNum").val();

        var grc_reletiveTimeNumtype = $("#goodsrechargecount_reletiveTimeNumtype").val();

        var grc_reletiveStartTime = $("#start_reletiveStartTime").val();

        var grc_reletiveEndTime = $("#end_reletiveStartTime").val();

        var grc_ForeverStartTime = $("#start_ForeverStartTime").val();

        var grc_ForeverEndTime = $("#end_ForeverEndTime").val();


        var registered = $("input[name='registered']:checked").val();//是否自领
        var freereceive = $("input[name='freereceive']:checked").val();//是否免费领取
        var paypush = $("input[name='paypush']:checked").val();//是否支付领取



        $.ajax({
            type: "post",
            dataType: 'JSON',
            url: "{php echo $this->createWebUrl('goodsrechargecount', array('op' => 'addrechargegoodslist', 'storeid' => $storeid))}",
            data: {
                goods_id:goods_id,
                rechargeGoodsName_Id:grc_goodsName,
                grcifGetPoint:grc_ifGetPoint,
                rechargecount_Id:grc_count,
                goodsrechargecount_totalPrice:grc_totalPrice,
                goodsrechargecount_num:grc_num,
                grcsetusedatetype:grc_setusedatetype,
                grcsetValidTime:grc_setValidTime,
                start_specifiedStartTime:grc_specifiedStartTime,
                end_specifiedEndTime:grc_specifiedEndTime,
                goodsrechargecount_reletiveTimeNum:grc_reletiveTimeNum,
                goodsrechargecount_reletiveTimeNumtype:grc_reletiveTimeNumtype,
                start_reletiveStartTime:grc_reletiveStartTime,
                end_reletiveStartTime:grc_reletiveEndTime,
                registered:registered,
                freereceive:freereceive,
                paypush:paypush,
            },
            success: function (data, status) {

                if(data['message']['code'] != 0){
                    swal({
                        title: "请确认信息格式是否填写正确",
                        timer: 2000,
                        type:"error",
                        showConfirmButton: true
                    });

                }else{
                    swal({
                        title: "操作成功！",
                        text: data.error,
                        timer: 2000,
                        type:"success",
                        showConfirmButton: true
                    },function(){
                        $("#rechargecounttabledata").bootstrapTable('refresh');
                        location.reload();
                    });
                }
            },
            error: function () {
                swal("操作有误", "请重新添加项目！","error");
            },
            complete: function () {

            }

        });



    });



</script><!--隐藏与显示-->

{template 'web/common/footer'}