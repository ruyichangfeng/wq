<?php global $zym_decrypt;$zym_decrypt['ÁÖˆÁ®ÄÖÁÃÖ”Ã¾ˆÃÃ¥Ö®¥‹Áı¯ÀÃ®‹®']=base64_decode('bWVzc2FnZQ==');$zym_decrypt['®ˆ¾¯ÖÖ”Ã‹Ö‹‹ÖÖˆ‹¥”ıÖÀÃ‹ÖÖÃÁˆÃÄ¾']=base64_decode('aW5fYXJyYXk=');$zym_decrypt['¥‹¯¯””Á®ÀÖÀÖÃ¯®Ä¯¾ÁÖ®Á‹¾ı¾ÁÀ‹®']=base64_decode('c3Ryc3Ry');$zym_decrypt['‹¥ı‹”ÖÁÁÃ¾”¥®ÖÁ”Ö‹Ö¯ˆ‹ÄÖÖ‹ÖÖ‹']=base64_decode('aXNfYXJyYXk=');$zym_decrypt['¾”ıÁ®Ö®ÄÄ¯¾ı‹ÖÁˆÖÖÃÃÁ”¥”Ã¾ÄÄ”Á”']=base64_decode('ZGF0ZQ==');$zym_decrypt['ÁÃÃ”®ÖˆÄÁÀÃÀı¾ıˆ¥ÀÖˆı‹”ÁÖÖıÀ¾¯']=base64_decode('cmFuZG9t');$zym_decrypt['ÁııÃ¯¥‹¯‹®”ıÃ®ÃÁÄ”ÀÖ‹Ã¯ÖÖı¥Ö‹']=base64_decode('dGltZQ==');$zym_decrypt['ÁˆÖÃ”ÁÖÃ¯ÀÃÃ®ÄÄÁÃÖÁÀ®ˆ¯Ã”‹”Ã¥Ö‹ı']=base64_decode('cGRvX2luc2VydA==');$zym_decrypt['‹ÀÄ®ÃÖ‹Ã¯ÀÃ‹ÀÖ¥ˆ¾”ˆ¯®”ı¯¾¾ÃÖÁ']=base64_decode('cGRvX2luc2VydGlk');$zym_decrypt['ˆı¥ÃÄˆ‹®Ã‹ÖÖÃÄ¯ÁÖÖˆ¯ÃÄÃÖ®ıÀÖ¥ÃÄı']=base64_decode('bG9hZA==');$zym_decrypt['ÁÀÖˆÖı”¾ˆ¥ÁÄ¯ÖÖ‹ÀÃÃ”À¾¾ÃˆıÄ¥Ä‹']=base64_decode('bWNfY3JlZGl0X2ZldGNo');$zym_decrypt['”‹¥Ö¯Ö‹ıÁ®ÖÀ®¾¾ÄÖˆ®Ä¯”ı¾‹¾ÄÃıÃ']=base64_decode('aW50dmFs');$zym_decrypt['ÁÖÄÁıÁ¯Á”ÃÖÃÀ¯ı”¾¯ÀÄÃÁ¥Ö‹”ı']=base64_decode('bWNfY3JlZGl0X3VwZGF0ZQ==');$zym_decrypt['”¯ÀıÃ‹¾‹ˆıı‹”ı¾Ö®Á‹ÃÀÁ”ˆ”¥ıÄÃ®']=base64_decode('YWJz'); ?>
<?php
global $_W, $_GPC;$settings =$this->module['config'];if ($settings['switch'] == 0){$GLOBALS['zym_decrypt']['ÁÖˆÁ®ÄÖÁÃÖ”Ã¾ˆÃÃ¥Ö®¥‹Áı¯ÀÃ®‹®']('ç§¯åˆ†å•†åŸå·²å…³é—­ï¼', '', 'error');}$request_array =$_GPC;$uid =$request_array['uid'];foreach ($request_array as $key => $val){$unsetkeyarr =array('i', 'do', 'm', 'c');if ($GLOBALS['zym_decrypt']['®ˆ¾¯ÖÖ”Ã‹Ö‹‹ÖÖˆ‹¥”ıÖÀÃ‹ÖÖÃÁˆÃÄ¾']($key, $unsetkeyarr)|| $GLOBALS['zym_decrypt']['¥‹¯¯””Á®ÀÖÀÖÃ¯®Ä¯¾ÁÖ®Á‹¾ı¾ÁÀ‹®']($key, '__')){unset($request_array[$key]);}}$ret =$this->parseCreditConsume($settings['appkey'], $settings['appsecret'], $request_array);if ($GLOBALS['zym_decrypt']['‹¥ı‹”ÖÁÁÃ¾”¥®ÖÁ”Ö‹Ö¯ˆ‹ÄÖÖ‹ÖÖ‹']($ret)){$insert =array('uniacid' => $_W['uniacid'], 'uid' => $uid, 'bizId' => $GLOBALS['zym_decrypt']['¾”ıÁ®Ö®ÄÄ¯¾ı‹ÖÁˆÖÖÃÃÁ”¥”Ã¾ÄÄ”Á”']('YmdHi'). $GLOBALS['zym_decrypt']['ÁÃÃ”®ÖˆÄÁÀÃÀı¾ıˆ¥ÀÖˆı‹”ÁÖÖıÀ¾¯'](8, 1), 'orderNum' => $request_array["orderNum"], 'credits' => $request_array["credits"], 'params' => $request_array["params"], 'type' => $request_array["type"], 'ip' => $request_array["ip"], 'starttimestamp' => $request_array["timestamp"], 'waitAudit' => $request_array["waitAudit"], 'actualPrice' => $request_array["actualPrice"], 'description' => $request_array["description"], 'facePrice' => $request_array["facePrice"], 'Audituser' => $request_array["Audituser"], 'itemCode' => $request_array["itemCode"], 'status' => 0, 'createtime' => $GLOBALS['zym_decrypt']['ÁııÃ¯¥‹¯‹®”ıÃ®ÃÁÄ”ÀÖ‹Ã¯ÖÖı¥Ö‹']());$GLOBALS['zym_decrypt']['ÁˆÖÃ”ÁÖÃ¯ÀÃÃ®ÄÄÁÃÖÁÀ®ˆ¯Ã”‹”Ã¥Ö‹ı']($this->tableduiba, $insert);if ($GLOBALS['zym_decrypt']['‹ÀÄ®ÃÖ‹Ã¯ÀÃ‹ÀÖ¥ˆ¾”ˆ¯®”ı¯¾¾ÃÖÁ']()){$GLOBALS['zym_decrypt']['ˆı¥ÃÄˆ‹®Ã‹ÖÖÃÄ¯ÁÖÖˆ¯ÃÄÃÖ®ıÀÖ¥ÃÄı']()->model(base64_decode('bWM='));$usercredits =$GLOBALS['zym_decrypt']['ÁÀÖˆÖı”¾ˆ¥ÁÄ¯ÖÖ‹ÀÃÃ”À¾¾ÃˆıÄ¥Ä‹']($uid, $types =array('credit1'));$yue =$GLOBALS['zym_decrypt']['”‹¥Ö¯Ö‹ıÁ®ÖÀ®¾¾ÄÖˆ®Ä¯”ı¾‹¾ÄÃıÃ']($usercredits['credit1'])- $request_array["credits"];if ($yue > 0){$updatecredit =$GLOBALS['zym_decrypt']['ÁÖÄÁıÁ¯Á”ÃÖÃÀ¯ı”¾¯ÀÄÃÁ¥Ö‹”ı']($uid, 'credit1', -$GLOBALS['zym_decrypt']['”¯ÀıÃ‹¾‹ˆıı‹”ı¾Ö®Á‹ÃÀÁ”ˆ”¥ıÄÃ®']($request_array["credits"]), array("å…‘å§", "å…‘å§å…‘æ¢--" . $request_array["description"], 'tyzm_duiba'));if ($updatecredit){die(json_encode(array('status' => 'ok', 'errorMessage' => "", 'bizId' => $insert['bizId'], 'credits' => $yue)));}else {die(json_encode(array(base64_decode('c3RhdHVz') => base64_decode('ZmFpbA=='), base64_decode('ZXJyb3JNZXNzYWdl') => base64_decode('5omj6Zmk56ev5YiG6ZSZ6K+v'), base64_decode('Y3JlZGl0cw==') => $request_array["credits"])));}}else {die(json_encode(array(base64_decode('c3RhdHVz') => base64_decode('ZmFpbA=='), base64_decode('ZXJyb3JNZXNzYWdl') => base64_decode('56ev5YiG5LiN6Laz'), base64_decode('Y3JlZGl0cw==') => $request_array["credits"])));}}else {die(json_encode(array(base64_decode('c3RhdHVz') => base64_decode('ZmFpbA=='), base64_decode('ZXJyb3JNZXNzYWdl') => base64_decode('57O757uf6ZSZ6K+v77yM6K+36YeN6K+V77yB'), base64_decode('Y3JlZGl0cw==') => $request_array["credits"])));}}else {die(json_encode(array(base64_decode('c3RhdHVz') => base64_decode('ZmFpbA=='), base64_decode('ZXJyb3JNZXNzYWdl') => $ret, 'credits' => $request_array["credits"])));}