{template 'web/common/header'}
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>RFID&IC卡&M1卡读写器设置</h5>
                    <h5 style="float: right"><a class="glyphicon glyphicon-refresh" href="{php echo $this->createWebUrl('rfidrw')}"></a></h5>
                </div>
                <div class="ibox-content">
                    <form action="" method="post" class="form-horizontal form">
                        <table class="table table-hover" ng-controller="advAPI" style="width:100%;" cellspacing="0" cellpadding="0">
                            <thead>
                            <tr>
                                <td class="col-md-2">设置项目</td>
                                <td class="col-md-3">说明</td>
                                <td class="col-md-4">扇区编号（最大15块扇区）</td>
                                <td class="col-md-3">是否启用</td>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td class="title">是否启用</td>
                                <td>设置是否启用RFID硬件读写器</td>
                                <td>硬件设备采用友我科技智能卡读写器，型号：YW-605HA、YW-607（推荐：YW-605HA）。支持高频IC卡,例如M1系列卡片。（推荐M1卡）。</td>
                                <td>
                                    <input type="checkbox" id="rfid1" class="js-switch_1" {if $set['rfid1']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员卡号</td>
                                <td>将会员卡号读写到M1卡（推荐1号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid2]" value="{$set['rfid2']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid3" class="js-switch_2" {if $set['rfid3']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员余额</td>
                                <td>将会员余额读写到M1卡（推荐2号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid4]" value="{$set['rfid4']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid5" class="js-switch_3" {if $set['rfid5']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员积分</td>
                                <td>将会员积分读写到M1卡（推荐3号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid6]" value="{$set['rfid6']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid7" class="js-switch_4" {if $set['rfid7']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员次数</td>
                                <td>将会员次数读写到M1卡（推荐4号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid8]" value="{$set['rfid8']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid9" class="js-switch_5" {if $set['rfid9']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员手机号</td>
                                <td>将会员手机号读写到M1卡（推荐5号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid10]" value="{$set['rfid10']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid11" class="js-switch_6" {if $set['rfid11']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员身份证号</td>
                                <td>将会员身份证号读写到M1卡（推荐6号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid12]" value="{$set['rfid12']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid13" class="js-switch_7" {if $set['rfid13']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员Openid</td>
                                <td>将会员Openid读写到M1卡（推荐7号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid14]" value="{$set['rfid14']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid15" class="js-switch_8" {if $set['rfid15']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员姓名</td>
                                <td>将会员姓名读写到M1卡（推荐8号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid16]" value="{$set['rfid16']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid17" class="js-switch_9" {if $set['rfid17']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员开卡日期</td>
                                <td>将会员开卡日期读写到M1卡（推荐9号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid18]" value="{$set['rfid18']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid19" class="js-switch_10" {if $set['rfid19']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员卡到期日期</td>
                                <td>将会员卡到期日期读写到M1卡（推荐10号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid20]" value="{$set['rfid20']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid21" class="js-switch_11" {if $set['rfid21']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">会员所属店铺</td>
                                <td>将会员所属店铺读写到M1卡（推荐11号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid22]" value="{$set['rfid22']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid23" class="js-switch_12" {if $set['rfid23']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            <tr>
                                <td class="title">其他预留信息</td>
                                <td>将会员其他预留信息读写到M1卡（推荐12号扇区）</td>
                                <td>
                                    <input type="text"   class="form-control"  name="rfid[rfid24]" value="{$set['rfid24']['value']}"/>
                                </td>
                                <td>
                                    <input type="checkbox" id="rfid25" class="js-switch_13" {if $set['rfid25']['value']}checked='checked'{/if} />
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label for="" class="col-sm-2 control-label"></label>
                            <div class="col-sm-7">
                                <button type="submit" class="btn btn-w-m btn-primary" name="submit" value="提交">提交</button>
                                <input type="hidden" name="token" value="{$_W['token']}" />
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $(':checkbox').on('change', function (e, state) {
            $this = $(this);
            var hlsetkey = $this.attr('id');
            var status = this.checked ? 1 : 0;
            $this.val(status);
            var agaxurl = "{php echo $this->createWebUrl('updatekey')}";
            var dataparam = {
                'hlsetkey': hlsetkey,
                'status': status,
            };
            $.ajax({
                url: agaxurl,
                data: dataparam,
                type: 'POST',
                dataType: 'json',
                success: function (data) {
                    if (data['message']['code'] == 0) {
                        swal("更新成功！", "","success");
                    } else {
                        swal("新增成功！", "","success");
                    }
                }
            });

        });
        $('.btn').hover(function () {
            $(this).tooltip('show');
        }, function () {
            $(this).tooltip('hide');
        });
    });
</script>
{template 'web/common/footer'}