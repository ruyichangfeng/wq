<?php
 class Order extends ZskWxapp { function backAndBreak() { goto FU5u_; Q593w: die; goto znCF5; FU5u_: pdo_query("\x52\117\x4c\x4c\102\101\103\113"); goto ME12h; ME12h: echo JSON_OUT(array("\x73\164\163" => -1, "\155\163\147" => "\346\212\xb1\346\xad\211\xef\274\x8c\350\256\242\xe5\215\225\xe5\207\xba\xe9\x94\x99\345\x95\xa6\343\200\202\343\200\x82")); goto Q593w; znCF5: } public function ApplyOrder() { goto Y2k7z; TjHKx: qgUj1: goto iauMt; dpHt6: y9RnN: goto aJ0nK; ygzpl: $limittime = strtotime($discount["\x73\164\x6f\160\164\x69\x6d\x65"]); goto dpHt6; vNGQ3: $out = array("\163\x74\x73" => 1, "\x63\x6f\165\156\164" => 0, "\x6a\x75\x6d\160" => 0); goto muA1p; Y2k7z: $mailStr = ''; goto xHjQY; Vspzs: $coupon = json_decode($_POST["\x63\x6f\165\160\157\156"], true); goto ycfpv; QRz89: foreach ($shops as $key => $shop) { goto jy3Bq; qDBsI: $kanjia = $shop["\153\x61\x6e\x6a\x69\x61"]; goto T03da; HFAYA: $oid = $m->add($order); goto xoh8Q; rnAzn: r6qAj: goto PE1CK; qsOPg: $one = Model("\141\x63\x74\x69\166\x69\x74\151\145\x73")->where("\151\x64\75" . $onemoney["\151\x64"])->save(["\x62\x75\171\145\156\x64" => $mone]); goto tAR09; pKD33: goto YR6e2; goto W5Izp; ltu1B: $mone = $onemoneygoodsnum - $onemoneygoodscount; goto ei3w9; piJ_o: $this->backAndBreak(); goto l0jGX; jy3Bq: $cartid = ''; goto EWHQP; oNGXk: array_push($out["\157\162\x64\x65\x72\163"], $order); goto tmENA; DjV_k: $onemoney = Model("\141\143\x74\151\x76\151\164\151\x65\x73")->where("\x69\144\75" . $activeid["\141\x63\x74\x69\166\145\x69\x64"] . "\x20\x61\156\x64\x20\152\165\x64\147\x65\151\144\75\61\40")->get(); goto vu8dX; Fw6Bo: $mailStr = ''; goto nXVuL; l0jGX: $out["\x73\x74\x73"] = -1; goto pKD33; k7oVh: $res = $m3->where("\165\156\x69\141\x63\x69\x64\75{$uniacid}\x20\141\156\x64\40\x69\144\x3d" . intval($kanjia["\151\x64"]) . "\40\141\156\144\x20\157\160\145\x6e\x69\144\x3d\47" . $openid . "\x27")->save(array("\x73\164\141\x74\165\163" => 1, "\157\162\x64\x65\x72\x5f\x6e\x6f" => $order["\x6f\x72\144\x65\162\137\156\x6f"])); goto rw06q; TkPrv: ZqWWX: goto oNGXk; Jqtvp: $onemoneygoodsnum = intval($onemoney["\147\x6f\157\144\163\156\x75\155"]); goto KLwux; vptkO: gs1Yq: goto kBXkW; FRSrR: xZOu_: goto aL14n; RoPvB: if (!($onemoney == 1)) { goto e1jhn; } goto n8yfm; EHy28: goto xZOu_; goto WLoDc; FnkuD: $shops[$key]["\x63\157\x75\160\157\x6e"] = $coupon; goto PzP0R; W5Izp: Bvd_t: goto RoPvB; HuwFV: $mc->where("\x69\144\x20\x69\x6e\x20\x28{$cartid}\40\x30\x29\40\141\156\144\x20\157\x70\x65\156\x69\x64\x3d\x27" . $openid . "\x27")->delete(); goto TkPrv; vu8dX: if (!$onemoney) { goto rvrjZ; } goto Jqtvp; vjlTP: $limittime = strtotime($discount["\x73\164\157\x70\164\x69\x6d\x65"]); goto FRSrR; FSlDr: $valStr = ''; goto Fw6Bo; gXH6T: X9oHa: goto ZZtcv; TadPP: $order["\157\162\144\145\162\137\x6e\157"] = $wxpay_no; goto By7JC; By7JC: vqxfc: goto umPMy; zEl1_: if (time() + intval($discount["\163\x65\x63\x6f\156\144\x73"]) > strtotime($discount["\x73\x74\157\x70\x74\x69\x6d\x65"])) { goto aIr5X; } goto QVzK3; PE1CK: Y99XD: goto LpyD1; WuKHd: foreach ($cases as $key => $val) { goto zd1rk; aLC1x: ZMPdX: goto J9D5J; zd1rk: if (!(strlen($val["\x61\x62\163"]) > 4)) { goto ZMPdX; } goto NxBNC; J9D5J: $order["\x61\x62\x73\164\162\x61\x63\164"] .= $val["\147\157\157\x64\163\x6e\141\x6d\x65"] . "\x20{$abstr}\40\73"; goto ZOgo5; NxBNC: $abstr = "\133\x20" . $val["\141\x62\x73"] . "\135"; goto aLC1x; ZOgo5: gGZg0: goto syLN0; syLN0: } goto OHAjQ; ZhuCc: YR6e2: goto gzcXn; pmNBk: v_d87: goto fJBZJ; cm58P: $res = $model->addall($details); goto eLhJj; xWl0W: xtty8: goto mbni4; xoh8Q: if ($oid > 0) { goto Bvd_t; } goto piJ_o; vt1HV: $_SESSION["\x70\x75\x73\x68\x73\164\162\x5f" . $no] = $pushstr; goto yWYCh; BPvsc: $order["\143\x61\163\145\163"] = $cases; goto yxLhz; PqjxY: foreach ($cases as $key => $val) { goto Hubyb; KWx3a: ChtaU: goto HJj_J; r056X: $mailStr = "\74\160\x3e\46\x6e\142\163\x70\73\x26\x6e\x62\163\x70\73\46\x6e\142\x73\160\x3b\x26\x6e\142\163\160\x3b\46\x6e\142\x73\x70\73\46\x6e\142\163\160\x3b\46\156\x62\163\x70\73\x26\156\x62\163\160\x3b\74\142\x3e" . $val["\147\157\157\144\163\x6e\141\155\145"] . "\x3c\57\x62\x3e\40\133\40" . $casename . "\40\x5d\40\170\x20" . $val["\147\x6f\157\x64\163\x63\157\x75\156\x74"] . "\x3c\x2f\x70\76"; goto kiFZ9; NmtjR: $casename .= $val["\157\x70\164\62"] . "\357\xbc\x9a" . $val["\157\160\x74\151\x6f\x6e\62"] . "\40"; goto Ubl1u; bESTR: Model("\144\x69\x73\143\157\x75\x6e\x74\x67\x72\157\165\x70")->limit(1)->where("\x69\144\x3d{$discountgroupid}")->save(array("\147\157\x6f\144\x73\151\x64" => $val["\147\157\x6f\144\x73\151\x64"])); goto KWx3a; gWVkC: $casename = ''; goto W0QTY; hOhJ3: if (!(intval($val["\143\x61\162\164\151\144"]) > 0)) { goto yfzzT; } goto JGI85; Hubyb: if (!($discountgroupid > 0)) { goto ChtaU; } goto bESTR; kiFZ9: $det["\x63\141\x73\145\x6e\x61\x6d\x65"] = $casename; goto E7RMO; AnCi0: $order["\x61\x62\x73\x74\x72\x61\x63\x74"] .= $val["\x67\157\157\x64\x73\x6e\x61\155\x65"] . "\x20{$abstr}\x3b\x20"; goto gWVkC; HJj_J: $det = array("\163\150\x6f\x70\x69\144" => $shop["\151\144"], "\x75\156\151\141\x63\151\144" => $uniacid, "\157\x70\x65\156\151\144" => $openid, "\x6f\x72\144\145\162\151\x64" => $oid, "\157\x72\x64\145\x72\137\156\157" => $order["\x6f\x72\144\145\x72\137\156\157"], "\x67\x6f\x6f\144\x73\151\144" => $val["\x67\x6f\157\x64\x73\x69\x64"], "\x67\x6f\x6f\x64\163\x63\141\163\145\x69\x64" => $val["\151\144"], "\x67\x6f\157\x64\x73\156\141\155\145" => $val["\x67\x6f\157\x64\163\156\x61\155\x65"], "\x63\157\x75\x6e\164" => $val["\147\157\x6f\x64\x73\143\157\x75\156\x74"], "\144\x61\164\x65" => time(), "\143\x61\163\x65\156\x61\155\x65" => '', "\163\x74\141\x74\x75\x73" => 0); goto ZuM97; JGI85: $cartid .= $val["\x63\x61\162\164\151\x64"] . "\54"; goto Q6EbC; ZuM97: if (!(strlen($val["\x61\142\163"]) > 4)) { goto njq4a; } goto v6VNY; E7RMO: array_push($details, $det); goto DR981; QZw_P: $cas = array(); goto hOhJ3; Q6EbC: yfzzT: goto r056X; W0QTY: if (!(strlen($val["\x6f\x70\164\x69\x6f\x6e\61"]) > 0)) { goto JMVbf; } goto lwlZL; Og7Fe: njq4a: goto AnCi0; Ubl1u: gmfRo: goto Uj5j_; v6VNY: $abstr = "\x5b\x20" . $val["\141\142\x73"] . "\135"; goto Og7Fe; DR981: bdYUJ: goto h9grY; ncmym: if (!(strlen($val["\x6f\160\164\x69\157\x6e\62"]) > 0)) { goto gmfRo; } goto NmtjR; lwlZL: $casename .= $val["\157\160\164\61"] . "\xef\274\x9a" . $val["\x6f\160\164\x69\x6f\156\x31"] . "\40"; goto nAKhv; nAKhv: JMVbf: goto ncmym; Uj5j_: $valStr .= "\x28" . intval($shop["\x69\x64"]) . "\x2c" . intval($_W["\165\156\x69\141\x63\x69\144"]) . "\54\x27" . $openid . "\x27\x2c{$oid}\x2c\47{$no}\47\54" . $val["\147\157\x6f\144\x73\151\x64"] . "\x2c" . $val["\151\144"] . "\40\54\x27" . $val["\x67\x6f\157\144\163\156\141\155\x65"] . "\47\x2c\x20" . $val["\x67\x6f\157\x64\163\x63\157\x75\156\x74"] . "\54\60\x2c" . time() . "\54\47" . $casename . "\47\x29\x2c"; goto QZw_P; h9grY: } goto vptkO; fz8fT: if (!(floatval($shop["\x72\x65\x64\165\x63\145\x5f\x61\147\145\156\164"]) > 0)) { goto XOdJz; } goto Ke0Ou; kBXkW: $order["\144\145\x74\141\x69\154\163"] = $details; goto mtple; WLoDc: aIr5X: goto vjlTP; eLhJj: $pushstr = "\74\160\x3e\345\xae\242\xe6\210\267\xe5\247\x93\345\x90\x8d\xef\274\x9a" . $_POST["\156\141\x6d\x65"] . "\x20\x3c\x2f\160\x3e\74\160\76\xe9\x80\x89\350\264\xad\345\225\206\xe5\223\x81\357\xbc\232{$mailStr}\40\74\57\160\x3e\74\160\x3e\x20\350\x81\224\347\xb3\273\347\224\xb5\xe8\257\x9d\xef\xbc\232" . $_POST["\x6d\157\x62\x69\154\145"] . "\74\57\160\76\74\x70\76\x20\xe8\xaf\246\347\273\206\345\x9c\xb0\345\x9d\x80\xef\274\x9a" . $_POST["\x70\x72\x6f\166"] . "\x26\156\142\x73\160\x3b\x26\156\142\x73\x70\73" . $_POST["\143\151\164\x79"] . "\46\156\142\163\160\73\x26\x6e\142\x73\160\73" . $_POST["\x63\x6f\x75\x6e\164\x79"] . "\x26\156\x62\x73\x70\73\x26\156\142\163\x70\73" . $_POST["\163\164\162\x65\145\164"] . "\74\57\160\x3e\74\160\76\xe8\256\242\345\215\x95\xe9\x87\x91\351\242\235\357\xbc\x9a" . floatval($shop["\160\141\x79\x6d\x6f\x6e\x65\171"]) . "\x3c\x2f\x70\x3e\x3c\160\76\346\x94\xaf\344\273\x98\xe6\x96\271\345\xbc\217\xef\xbc\x9a\xe8\264\xa7\xe5\210\xb0\344\xbb\230\346\xac\276\40\x3c\57\160\76\74\x70\76\350\256\242\345\x8d\225\xe7\xbc\x96\345\217\267\xef\274\232{$no}\x3c\x2f\160\x3e\x3c\x70\x3e\344\270\213\xe5\x8d\x95\346\227\xb6\xe9\x97\xb4\357\xbc\232" . date("\x59\345\271\264\x6d\xe6\x9c\210\144\xe6\x97\xa5\x20\x48\72\x69\72\x73", time()); goto vt1HV; T03da: if (!(intval($kanjia["\x69\x64"]) > 0)) { goto AgWuO; } goto xEz__; Y0bUo: $couponorderr = json_decode($_POST["\143\x6f\165\x70\x6f\156"], true); goto sL7aw; l0GHh: $order["\144\151\x73\143\x6f\x75\x6e\164\164\x79\160\x65"] = 10; goto IdDaC; fJBZJ: if (!(floatval($shop["\x72\145\144\x75\143\x65\137\x63\157\x75\160\x6f\156"]) > 0)) { goto X9oHa; } goto JXxLu; EWHQP: $no = $wxpay->orderNumber(); goto Y0bUo; ZZtcv: if (!(floatval($shop["\162\x65\x64\165\143\145\x5f\x64\151\x73\x63\x6f\x75\156\164"]) > 0)) { goto wlZBO; } goto VkdGM; gzcXn: DfFFZ: goto R38cY; TGPuS: $reduce_desc .= "\344\274\232\xe5\221\x98\346\x8a\x98\xe6\211\243\357\xbc\232\x2d" . $shop["\162\145\144\165\x63\x65\x5f\x76\151\160"] . "\357\274\x9b"; goto pmNBk; VkdGM: $reduce_desc .= "\xe6\264\273\xe5\x8a\xa8\344\xbc\230\346\203\240\357\274\232\55" . $shop["\x72\145\x64\165\x63\145\137\x64\x69\163\x63\x6f\x75\156\x74"] . "\357\xbc\233"; goto MDLdu; MDLdu: wlZBO: goto fz8fT; QVzK3: $limittime = time() + intval($discount["\x73\x65\143\x6f\x6e\144\163"]); goto EHy28; OHAjQ: DnA_4: goto xWl0W; m_KUa: $order = array("\163\x68\157\160\151\x64" => intval($shop["\151\x64"]), "\x6f\x72\144\x65\162\x5f\x6e\157" => $no, "\167\x78\160\x61\x79\x5f\156\x6f" => $wxpay_no, "\157\x70\x65\156\x69\144" => $openid, "\165\x6e\x69\x61\143\151\x64" => $_W["\x75\156\x69\141\x63\151\144"], "\x6d\x6f\x6e\145\x79" => floatval($shop["\155\157\156\x65\x79"]), "\x6d\x6f\x6e\145\171\x5f\160\x61\171" => floatval($shop["\x70\x61\x79\x6d\x6f\x6e\145\171"]), "\155\x6f\156\x65\171\x5f\x65\170\160\x72\145\x73\163" => floatval($shop["\x65\170\160\162\151\x63\145"]), "\x73\164\x61\164\165\163" => 0, "\x73\x65\x6e\x64\x5f\167\141\x79" => intval($_GPC["\x73\x65\156\144\167\x61\171"]), "\x70\162\x6f\x76\151\x6e\x63\x65" => $_POST["\x70\x72\157\166"], "\x63\x69\x74\171" => $_POST["\143\151\x74\171"], "\143\157\165\x6e\164\171" => $_POST["\x63\x6f\165\x6e\164\171"], "\163\164\x72\145\145\x74" => $_POST["\x73\164\162\145\145\164"], "\x63\157\x6e\164\141\143\x74" => $_POST["\x6e\x61\155\145"], "\x6d\157\x62\151\x6c\x65" => $_POST["\155\x6f\142\151\154\x65"], "\x61\143\164\x69\166\x65\151\x64" => $_POST["\x61\143\164\x69\166\145\151\144"], "\160\141\x79\x5f\167\141\x79" => intval($shop["\160\x61\x79\x77\141\x79"]), "\x70\141\x79\x5f\x73\164\x61\164\165\163" => 0, "\162\145\155\141\x72\x6b" => $shop["\162\x65\x6d\141\162\x6b"], "\x72\145\144\165\143\x65\137\155\x6f\x6e\x65\171" => $shop["\162\145\144\165\143\x65\x5f\143\x6f\165\160\x6f\156"], "\162\145\x64\x75\x63\145\137\144\x65\163\x63" => $reduce_desc, "\x64\151\x73\x63\x6f\x75\x6e\164\x67\162\157\x75\x70" => intval($discountgroupid), "\x64\x69\163\143\157\165\x6e\164\x73\x74\141\164\165\x73" => 0, "\141\147\145\x6e\x74\137\160\60" => intval($member["\141\x67\145\156\164\137\x70\x30"]), "\x61\x67\x65\x6e\x74\137\x70\61" => intval($member["\x61\147\x65\x6e\x74\x5f\x70\x31"]), "\x61\147\145\x6e\164\x5f\160\x32" => intval($member["\141\147\145\156\164\x5f\x70\62"]), "\144\x61\x74\145" => date("\131\x2d\155\55\144\40\x48\x3a\x69\72\163", $time), "\142\141\x6c\x61\156\x63\145\137\163\164\x61\x74\x75\x73" => 0); goto MvO3D; jRuwG: XOdJz: goto m_KUa; sL7aw: $reduce_money = $couponorderr["\162\145\144\x75\143\x65"]; goto zgHBV; ei3w9: $mone = $onemoneybuyend + $mone; goto hf0jx; Pwcwg: $onemoneygoodscount = intval($val["\147\157\x6f\144\163\143\x6f\x75\x6e\164"]); goto ltu1B; MvO3D: $onemoney = intval($_GPC["\x6f\x6e\x65\155\157\x6e\x65\x79"]); goto ix36s; zgHBV: $reduce_desc = ''; goto c1m9E; yWYCh: if (!(strlen($cartid) > 0)) { goto ZqWWX; } goto J7R6s; JXxLu: $reduce_desc .= "\xe4\274\x98\346\x83\xa0\345\x88\xb8\xef\xbc\232\55" . $shop["\162\145\x64\165\143\x65\137\x63\x6f\x75\160\x6f\156"] . "\357\xbc\233"; goto gXH6T; CSm3o: $order["\x64\151\x73\x63\x6f\x75\156\164\x74\x79\x70\145"] = intval($discount["\x74\x79\x70\x65"]); goto NynUr; PzP0R: $cases = $shop["\143\141\163\x65\x73"]; goto V2Lm9; jwkFu: rvrjZ: goto sB61P; nXVuL: $coupon = $shop["\x63\157\x75\x70\157\x6e"]; goto qDBsI; umPMy: if (empty($discount)) { goto Y99XD; } goto K1CGh; K1CGh: $order["\144\151\163\143\157\165\x6e\164\151\144"] = intval($discount["\151\x64"]); goto CSm3o; tmENA: $this->destroyCoupon(intval($coupon["\x69\x64"])); goto ZhuCc; LpyD1: $shops[$key]["\157\x72\x64\x65\162\x5f\156\157"] = $no; goto FnkuD; Kh999: $caseid = ''; goto FSlDr; yxLhz: $details = array(); goto PqjxY; xEz__: $m3 = Model("\x64\x69\x73\x63\157\165\x6e\x74\147\x72\157\x75\x70"); goto k7oVh; hf0jx: if (!($mone <= $onemoneygoodsnum)) { goto WMfaS; } goto qsOPg; mbni4: $shops[$key]["\157\x72\144\145\x72"] = $order; goto HFAYA; aL14n: $order["\x6c\x69\x6d\x69\164\x74\x69\x6d\x65"] = $limittime; goto rnAzn; ix36s: if (!($onemoney == 1)) { goto M6DDu; } goto l0GHh; NynUr: if (!($discount["\x74\x79\160\145"] == 4)) { goto r6qAj; } goto zEl1_; J7R6s: $mc = Model("\x6d\145\155\142\x65\162\x63\x61\162\x74"); goto HuwFV; V2Lm9: if (!(count($cases) > 0)) { goto xtty8; } goto WuKHd; rw06q: AgWuO: goto BPvsc; mtple: $model = Model("\157\162\x64\145\162\144\145\x74\141\151\x6c"); goto cm58P; n8yfm: $activeid = Model("\x6f\x72\144\145\x72")->where("\x77\170\160\x61\x79\x5f\x6e\x6f\75" . $wxpay_no)->get(); goto DjV_k; e1Tgi: if (!(count($shops) == 1)) { goto vqxfc; } goto TadPP; KLwux: $onemoneybuyend = intval($onemoney["\x62\x75\x79\145\156\x64"]); goto Pwcwg; IdDaC: M6DDu: goto e1Tgi; Ke0Ou: $reduce_desc .= "\345\210\206\351\224\200\xe5\225\206\xe4\274\x98\346\x83\240\xef\274\x9a\55" . $shop["\162\145\x64\165\x63\145\137\141\147\145\156\164"] . "\357\274\x9b"; goto jRuwG; c1m9E: if (!(floatval($shop["\162\145\144\x75\x63\x65\137\x76\151\160"]) > 0)) { goto v_d87; } goto TGPuS; tAR09: WMfaS: goto jwkFu; sB61P: e1jhn: goto Kh999; R38cY: } goto n7C9m; NUSwL: if (count($shops) > 1 || count($shops[0]["\143\141\163\145\163"]) > 1) { goto oTrAs; } goto v3MuK; jij6W: $out["\157\x72\144\145\162\x73"] = array(); goto viCPQ; muA1p: pdo_query("\123\124\101\122\x54\40\x54\x52\101\x4e\123\101\103\x54\x49\x4f\116\x20"); goto N3Wbj; or4Ty: $dfmoneyallr = 0; goto ARlD6; A5cw4: $out["\x77\x78\160\141\171\x5f\156\x6f"] = $wxpay_no; goto jij6W; t5rNs: $member = json_decode($_POST["\x6d\x65\x6d\142\x65\162"], true); goto Vspzs; N3Wbj: $wxpay = new Wxpay($setting); goto veJ2v; xHW87: $m = Model("\x6f\162\144\x65\162"); goto N_vPw; sJ56N: $out["\144\146\155\157\x6e\x65\x79\x61\x6c\154\162"] = $dfmoneyallr; goto dZ00D; TTGKV: oTrAs: goto keKd5; ARlD6: $_POST["\x70\x61\171\x77\141\171"] = 1; goto sm3mJ; DJxhy: if (intval($_GPC["\147\x72\157\x75\160\151\144"])) { goto vYYm6; } goto G_vVr; FPG5x: foreach ($shops as $key => $shop) { goto j2u0H; BIaRD: $out["\x6f\x72\x64\x65\162\137\x73\165\x63\143\x65\x73\x73"] = $this->orderSuccess($shop["\x6f\x72\144\145\x72"]); goto Crpxa; O2KUi: kMgkB: goto LRAo1; Crpxa: if (strlen($setting["\x77\170\137\x63\157\x6e\146"]["\164\160\x6c\151\144\x5f\x6f\162\x64\145\162\x5f\156\145\x77"]) > 10) { goto rNB7a; } goto oIPX4; C83p1: $tabm = $m->tablename("\x6d\145\155\x62\145\x72"); goto l0FCM; wUVIk: $out["\x77\170\137\x70\165\x73\x68"] = sendOrderNotice($shop["\x6f\162\x64\x65\x72"]); goto O2KUi; oIPX4: $out["\160\x75\x73\150"] = sendOrderMail($_SESSION["\160\165\x73\x68\163\164\x72\x5f" . $shop["\x6f\x72\144\145\162\137\x6e\x6f"]], $shop["\157\x72\x64\x65\162"]); goto MfAoP; j2u0H: if (!($shop["\160\141\x79\x77\141\171"] == 2)) { goto zSV0t; } goto BIaRD; F0qn4: cK6wZ: goto x70ii; LRAo1: Model("\x6f\162\x64\145\162")->where("\x6f\x72\x64\145\x72\x5f\x6e\157\x3d\x27" . $shop["\157\162\144\x65\162"]["\157\x72\144\x65\x72\137\x6e\x6f"] . "\47\40\x61\x6e\144\x20\x75\x6e\x69\141\143\151\144\75" . intval($_W["\165\156\x69\x61\143\151\144"]))->limit(1)->save(array("\x73\x74\x61\x74\x75\163" => 1)); goto C83p1; jRrXQ: zSV0t: goto F0qn4; iB7Yw: $m->query($sql); goto jRrXQ; MfAoP: goto kMgkB; goto o4aiX; l0FCM: $sql = "\125\120\x44\101\124\105\40{$tabm}\x20\x53\x45\x54\x20\155\x6f\156\145\x79\x74\x6f\164\141\x6c\75\x6d\157\156\x65\171\164\157\164\141\x6c\x2b" . $shop["\160\141\x79\x6d\x6f\x6e\x65\x79"] . "\x20\127\110\x45\x52\105\40\165\156\151\141\143\151\144\75" . $_W["\165\156\151\x61\x63\x69\144"] . "\x20\x61\x6e\x64\40\157\x70\145\156\x69\144\75\47" . $openid . "\x27\x20\114\111\115\111\124\x20\x31"; goto iB7Yw; o4aiX: rNB7a: goto wUVIk; x70ii: } goto ZGZZa; Mi0bY: $uniacid = intval($_W["\165\x6e\x69\x61\x63\x69\x64"]); goto xHW87; v3MuK: $moneyallr = 0; goto or4Ty; G_vVr: if (time() + intval($discount["\x73\145\x63\x6f\156\x64\x73"]) > strtotime($discount["\x73\164\157\160\164\151\155\145"])) { goto uQ0xt; } goto XqyLx; N_vPw: $shops = json_decode($_POST["\152\163\x6f\x6e\123\164\162"], true); goto t5rNs; I38jc: f3G0O: goto jPMGM; BQSm2: vYYm6: goto Qfp1O; jPMGM: $out["\x6d\x6f\156\x65\x79\141\154\154\x72"] = $moneyallr; goto sJ56N; WeDUs: $group = Model("\x67\x72\157\165\160")->where("\x69\144\x3d{$discountgroupid}")->get(); goto GXMbZ; o9hkP: KlVTG: goto QRz89; QLK_r: $dfmoneyallr = 0; goto TkK8l; ZgUeE: mCWE9: goto NUSwL; ZGZZa: XgCly: goto I38jc; ebo4M: goto KlVTG; goto TTGKV; GXMbZ: fxkM0: goto ZgUeE; sm3mJ: foreach ($shops as $key => $shop) { goto W8sLa; tZJjk: $daofumoneyr = 0; goto mPFbq; mPFbq: foreach ($shop["\143\x61\x73\x65\x73"] as $key2 => $val) { goto nMiV6; COBJV: SjUHs: goto lDTkr; nMiV6: if ($val["\160\x61\171\167\x61\x79\162"] == "\61") { goto CrJiV; } goto Urhbl; ORegO: $moneyallr = $shop["\160\141\x79\155\x6f\x6e\x65\x79"]; goto HfGhe; UJVA7: $_POST["\x70\x61\x79\167\141\171"] = 2; goto JdVy0; yx2bA: $dfmoneyallr = $shop["\160\x61\x79\x6d\x6f\156\x65\171"]; goto h5oED; h5oED: $shops[$key]["\160\141\171\167\x61\171"] = 2; goto UJVA7; Hp_QH: CrJiV: goto ORegO; Urhbl: if (!($val["\x70\141\x79\167\x61\x79\162"] == "\62")) { goto oeC0r; } goto yx2bA; dv4yw: goto YhOUn; goto Hp_QH; HfGhe: $shops[$key]["\x70\141\x79\x77\x61\171"] = 1; goto P0WVf; P0WVf: YhOUn: goto COBJV; JdVy0: oeC0r: goto dv4yw; lDTkr: } goto vi3Ca; vi3Ca: EDyqq: goto RiTkw; W8sLa: $weixinmoneyr = 0; goto tZJjk; RiTkw: oysMi: goto uzUvt; uzUvt: } goto ThWwl; TkK8l: foreach ($shops as $key => $shop) { goto L_fDm; lkZ8J: $daofushop["\x63\x61\163\145\163"] = $daofucasesr; goto N1rsn; UjWIg: $weixinshop["\160\141\171\167\141\171"] = 1; goto FvgKl; CAx1F: gcgYD: goto Z157Z; sWoH1: $weixinshop["\155\157\156\x65\171"] = $weixinmoneyr; goto bxITy; HB0AM: $daofucasesr = []; goto yf3YA; L_fDm: $weixinmoneyr = 0; goto sgBPK; jgfxk: if (!(!empty($weixincasesr) && empty($daofucasesr))) { goto r3kgW; } goto NlrdF; rkkd6: $shops[] = $daofushop; goto wSvil; TA19i: $shops[] = $weixinshop; goto y3lwh; N1unA: $weixinshop["\x70\x61\171\167\x61\171"] = 1; goto TA19i; sgBPK: $daofumoneyr = 0; goto aG5iF; BpUHt: $daofushop = $shop; goto NdjP_; mlTIU: $daofushop["\x70\141\x79\x77\x61\171"] = 2; goto uktu3; iaNBB: Wu0XU: goto OcEDK; B_CJO: $shops[] = $weixinshop; goto iaNBB; liLSK: $moneyallr = $moneyallr + $weixinshop["\160\x61\x79\155\x6f\156\x65\x79"]; goto N1unA; FpeQw: if (!(!empty($daofucasesr) && empty($weixincasesr))) { goto dMUfS; } goto lkZ8J; WfrjD: $daofushop["\160\x61\171\x6d\x6f\156\145\171"] = $daofumoneyr; goto mlTIU; NdjP_: $weixincasesr = []; goto HB0AM; bxITy: $weixinshop["\160\x61\x79\x6d\x6f\156\x65\171"] = $weixinmoneyr + $shop["\145\170\160\x72\151\x63\145"]; goto UjWIg; wSvil: TVfLS: goto jgfxk; M310F: unset($shops[$key]); goto ke7Dq; FvgKl: $moneyallr = $moneyallr + $weixinshop["\160\141\x79\155\157\156\x65\171"]; goto B_CJO; FGow5: $daofushop["\155\157\x6e\145\171"] = $daofumoneyr; goto WfrjD; R8CGV: dMUfS: goto M310F; qq4vd: $daofushop["\143\141\163\145\x73"] = $daofucasesr; goto FGow5; N1rsn: $dfmoneyallr = $dfmoneyallr + $daofushop["\x70\141\171\155\157\x6e\145\171"]; goto haPPR; OcEDK: if (!(!empty($daofucasesr) && !empty($weixincasesr))) { goto TVfLS; } goto qq4vd; uktu3: $dfmoneyallr = $dfmoneyallr + $daofushop["\160\x61\171\155\157\156\x65\171"]; goto rkkd6; y3lwh: r3kgW: goto FpeQw; aG5iF: $weixinshop = $shop; goto BpUHt; yf3YA: foreach ($shop["\x63\x61\163\x65\x73"] as $key2 => $val) { goto uZwGh; lHR4N: nU8T6: goto XxQsU; t2j7I: k4ZrQ: goto MbxkX; MbxkX: $weixinmoneyr = $weixinmoneyr + $val["\147\157\x6f\144\163\160\x72\151\143\145"] * $val["\x67\x6f\x6f\144\x73\143\x6f\x75\x6e\164"]; goto GI9j8; GI9j8: $weixincasesr[] = $val; goto ns45Z; cjiKW: $daofucasesr[] = $val; goto lHR4N; oWeUp: if (!($val["\160\141\x79\167\x61\171\x72"] == "\62")) { goto nU8T6; } goto dYJDd; uZwGh: if ($val["\x70\x61\171\167\141\x79\162"] == "\61") { goto k4ZrQ; } goto oWeUp; dvVoo: WhthB: goto TdHyI; dYJDd: $daofumoneyr = $daofumoneyr + $val["\x67\x6f\157\x64\163\x70\x72\151\143\145"] * $val["\x67\x6f\x6f\x64\x73\143\157\x75\156\x74"]; goto cjiKW; ns45Z: gWqAp: goto dvVoo; XxQsU: goto gWqAp; goto t2j7I; TdHyI: } goto CAx1F; NlrdF: $weixinshop["\143\x61\163\145\x73"] = $weixincasesr; goto liLSK; haPPR: $daofushop["\160\141\171\167\141\171"] = 2; goto xvNdV; ke7Dq: roK_k: goto qA5be; DKLFT: $weixinshop["\x63\x61\163\145\x73"] = $weixincasesr; goto sWoH1; xvNdV: $shops[] = $daofushop; goto R8CGV; Z157Z: if (!(!empty($weixincasesr) && !empty($daofucasesr))) { goto Wu0XU; } goto DKLFT; qA5be: } goto I9U5g; dZ00D: echo JSON_OUT($out); goto d20Fi; mS8aR: $discount = Model("\144\151\x73\x63\157\165\156\164")->where("\x75\x6e\x69\x61\x63\151\x64\75{$uniacid}\40\141\156\x64\x20\151\144\x3d{$discountid}")->get(); goto TjHKx; viCPQ: $discountid = intval($_GPC["\144\151\163\143\x6f\x75\156\x74\x69\x64"]); goto k8eZU; XqyLx: $limittime = time() + intval($discount["\163\x65\143\157\156\x64\x73"]); goto q4TiN; LcCMu: goto fxkM0; goto BQSm2; UtOu6: $openid = $_POST["\157\160\x65\156\x69\x64"]; goto vNGQ3; veJ2v: $wxpay_no = $wxpay->orderNumber(); goto A5cw4; Qfp1O: $discountgroupid = intval($_GPC["\x67\162\157\x75\x70\x69\x64"]); goto WeDUs; ycfpv: $time = time(); goto UtOu6; bwGiy: uQ0xt: goto ygzpl; nvTgQ: $setting = getSetting("\x70\141\x79"); goto Mi0bY; q1_Iw: if (!($out["\163\164\x73"] == 1)) { goto f3G0O; } goto FPG5x; xHjQY: global $_W, $_GPC; goto nvTgQ; k8eZU: if (!$discountid) { goto qgUj1; } goto mS8aR; ThWwl: MHkRT: goto ebo4M; n7C9m: dLgkM: goto k8X3Q; I9U5g: n8Pix: goto o9hkP; iauMt: if (!(!empty($discount) && intval($discount["\164\x79\160\145"]) == 4)) { goto mCWE9; } goto DJxhy; aJ0nK: $group = array("\165\156\x69\141\143\x69\144" => $uniacid, "\157\160\145\156\x69\144" => $openid, "\143\x72\145\x61\164\x65\x74\x69\x6d\x65" => time(), "\154\151\x6d\151\x74\164\x69\x6d\x65" => $limittime, "\147\157\x6f\x64\x73\151\144" => $val["\147\x6f\157\144\x73\151\144"], "\164\171\160\x65" => 4, "\144\151\x73\x63\x6f\x75\x6e\x74\x5f\x69\x64" => $discount["\x69\x64"], "\143\x61\x73\x65\x69\144" => intval($shops[0]["\x63\141\163\145\163"][0]["\151\x64"]), "\x6e\x6f\167\x5f\x70\145\x6f\x70\154\145" => 0, "\x73\x68\x6f\x70\151\144" => $discount["\x73\150\157\x70\151\144"], "\157\167\x6e\145\x72\x5f\156\151\x63\x6b" => $member["\x6e\151\x63\x6b\156\141\155\145"]); goto XL3Ld; q4TiN: goto y9RnN; goto bwGiy; k8X3Q: pdo_query("\103\117\x4d\115\111\x54"); goto q1_Iw; XL3Ld: $discountgroupid = Model("\x64\151\x73\x63\x6f\165\x6e\x74\x67\162\x6f\x75\x70")->add($group); goto LcCMu; keKd5: $moneyallr = 0; goto QLK_r; d20Fi: } public function destroyCoupon($cid) { goto Awnb2; xUvut: $sts = $model->limit(1)->where("\x75\156\151\141\143\151\x64\x3d{$uniacid}\x20\x61\156\144\x20\157\x70\145\x6e\151\144\75\47{$openid}\x27\40\141\156\144\x20\x63\x6f\x75\160\x6f\156\x69\x64\75{$cid}")->save(array("\x73\x74\141\164\165\x73" => 0)); goto Deg87; Deg87: return $sts; goto ob0oO; O0K3S: $uniacid = intval($_W["\165\x6e\x69\141\x63\151\x64"]); goto xUvut; bzAQ8: $model = Model("\x6d\x65\155\142\x65\x72\143\157\165\x70\157\x6e"); goto o8qDx; Awnb2: global $_W, $_GPC; goto bzAQ8; o8qDx: $openid = $_GPC["\x6f\160\145\156\x69\144"]; goto O0K3S; ob0oO: } public function ApplyPay() { goto RCNEm; O_yyp: $model = Model("\157\x72\x64\145\x72"); goto sGNhi; WXVLe: ksqCO: goto l34MS; xksZf: $wxapp["\160\141\171\x53\151\147\x6e"] = MD5($str); goto TdHRF; mTAjL: $wxapp["\153\x65\171"] = $wxpay->conf["\167\x78\160\141\171\x5f\x6b\x65\171"]; goto XbsM2; yfSf9: $res["\157\162\144\145\162\x73\164\163"] = 1; goto MdPme; UUnNw: $msg["\170\155\x6c"] = $xml; goto XZDab; hRWCh: $goods = json_decode($_POST["\x67\x6f\x6f\144\163\x4a\163\157\x6e"], true); goto i9MkI; VRHIb: foreach ($orders as $key => $val) { goto WFgL2; Ic7Yw: TKEzr: goto n1gWT; ZDREO: Df6vg: goto zvII3; JkIrq: $out["\x70\x75\163\150"] = sendOrderMail($_SESSION["\x70\165\163\150\x73\x74\x72\137" . $val["\157\162\144\145\162\137\x6e\157"]], $val); goto m4Rrt; wlAFr: chFn0: goto l187U; m4Rrt: goto TKEzr; goto ZDREO; zvII3: $out["\x77\x78\x5f\x70\x75\x73\x68"] = sendOrderNotice($val); goto Ic7Yw; n1gWT: Model("\157\162\144\145\x72")->where("\x6f\x72\144\x65\162\x5f\x6e\x6f\75\47" . $val["\x6f\x72\x64\x65\x72\137\x6e\x6f"] . "\47\40\141\156\144\40\x75\156\151\x61\143\x69\144\75" . intval($_W["\165\x6e\x69\141\143\x69\144"]))->limit(1)->save(array("\163\164\141\x74\165\163" => 1)); goto wlAFr; WFgL2: $out["\x6f\x72\x64\145\x72\137\x73\165\143\143\x65\x73\x73"] = $this->orderSuccess($val); goto CyBc6; CyBc6: if (strlen($setting["\x77\x78\137\143\x6f\156\x66"]["\164\160\x6c\x69\144\137\157\x72\x64\x65\x72\137\156\145\x77"]) > 10) { goto Df6vg; } goto JkIrq; l187U: } goto Lv8Wb; PXtNO: $wxpay = new Wxpay($setting); goto ccVZu; Es8bL: $wxpay_no = $wxpay->orderNumber(); goto zWlA0; TdHRF: $wxapp["\167\x78\x70\x61\171\x5f\156\x6f"] = trim($_POST["\167\170\x70\141\x79\x5f\x6e\x6f"]); goto DXMUr; eYAPz: $str = substr($str, 1, strlen($str) - 1); goto xksZf; UIXoA: foreach ($wxapp as $key => $val) { $str .= "\46" . $key . "\75" . $val; JYAy0: } goto wiwg2; zWlA0: $model->where("\157\x72\144\145\162\137\156\157\75\47{$order_no}\x27")->limit(1)->save(array("\x77\170\x70\141\x79\137\156\x6f" => $wxpay_no)); goto AkxZc; i9MkI: $wxpay_no = $_GPC["\x77\x78\x70\141\x79\x5f\156\157"]; goto u3puH; Lv8Wb: F7J0M: goto k9AZK; LR71l: $wxapp["\160\x61\143\x6b\141\147\x65"] = "\x70\x72\x65\x70\x61\x79\x5f\x69\144\75" . $msg["\x70\x72\x65\x70\x61\x79\137\x69\x64"]; goto xyZdg; XbsM2: $str = ''; goto UIXoA; wiwg2: UtVDq: goto eYAPz; W2Plo: $setting = getSetting("\x70\x61\x79"); goto PXtNO; asCMO: $order_no = $_GPC["\x6e\157"]; goto Es8bL; cA1Yg: $orders = Model("\157\162\144\145\x72")->where("\x77\x78\x70\x61\x79\137\156\x6f\75\x27" . $wxpay_no . "\47")->getall(); goto VRHIb; ccVZu: $tab0 = $model->tablename("\157\162\x64\145\162"); goto YFY3q; k9AZK: $res = $this->paySuccess($wxpay_no); goto l8sMK; XZDab: if (floatval($order["\x6d\x6f\156\x65\171\x5f\160\141\171"]) == 0) { goto l9pq2; } goto rp1nM; TcjIk: $msg = $wxpay->unifiedorder($xml); goto UUnNw; YTD73: echo JSON_OUT($wxapp, true); goto CSPIS; sGNhi: $uniacid = intval($_W["\x75\x6e\x69\141\143\x69\x64"]); goto ycm3X; JquzE: $xml = array("\x61\164\164\x61\x63\150" => "\345\260\217\347\250\x8b\345\272\217\345\x95\206\xe5\x93\201\344\xba\244\xe6\230\223", "\x62\x6f\x64\171" => "\xe5\xb0\x8f\347\250\213\345\xba\217\xe5\225\206\xe5\223\x81\xe4\272\244\346\230\x93", "\x64\x65\x76\151\x63\x65\137\151\x6e\146\x6f" => "\345\xb0\217\347\xa8\213\345\xba\217\345\x95\206\345\237\216", "\144\x65\164\141\x69\154" => "\xe5\260\x8f\xe7\xa8\x8b\345\xba\x8f\345\225\206\xe5\223\201\xe4\272\xa4\346\230\223", "\x73\160\x62\151\154\154\x5f\143\162\x65\x61\x74\x65\x5f\x69\x70" => $_SERVER["\x52\105\115\117\124\105\x5f\x41\x44\104\122"], "\x6f\x75\x74\x5f\164\162\x61\144\x65\x5f\156\x6f" => trim($wxpay_no), "\157\x70\x65\156\151\144" => $openid, "\156\x6f\164\x69\146\171\137\x75\162\154" => $_W["\x77\170\x70\141\x79\x63\x61\154\x6c\x62\141\x63\153\165\162\x6c"], "\x74\162\141\x64\x65\137\164\171\x70\145" => "\112\x53\101\120\x49", "\x74\x6f\164\141\154\x5f\x66\x65\145" => floatval($order["\x6d\157\156\145\x79\137\160\141\171"]) * 100); goto TcjIk; YFY3q: $singlePay = intval($_GPC["\x73\x69\156\147\x6c\x65"]); goto iFCb6; iFCb6: if ($singlePay > 0) { goto gqf4J; } goto xrF7o; MdPme: echo JSON_OUT($res); goto lBvFN; v2jyv: YgmUS: goto r2_FR; W1GfL: $shop = json_decode($_POST["\x73\x68\x6f\160\112\163\157\156"], true); goto hRWCh; RCNEm: global $_W, $_GPC; goto O_yyp; VQSys: $wxapp["\164\x69\155\145\x53\x74\x61\x6d\160"] = time(); goto mTAjL; AV_E1: l9pq2: goto cA1Yg; l34MS: $wxapp = array("\x61\x70\160\x49\x64" => $setting["\x61\x70\160\x69\x64"]); goto t_XI6; cYzGB: echo JSON_OUT($res); goto DrkyK; xrF7o: $sql = "\x53\x45\x4c\x45\x43\x54\x20\123\125\x4d\50\x6d\x6f\156\145\171\137\160\141\x79\51\40\141\x73\40\x60\x6d\157\156\145\171\137\x70\x61\171\140\x20\106\x52\117\x4d\x20{$tab0}\40\x57\x48\x45\122\105\40\x77\170\x70\141\x79\137\x6e\157\x3d\x27{$wxpay_no}\x27\40\x61\x6e\144\40\160\x61\x79\x5f\x77\141\171\75\61"; goto i8V4d; XD483: $wxapp["\x6d\163\147"] = $msg; goto W2rLf; xyZdg: $wxapp["\x73\x69\x67\156\x54\171\160\145"] = "\115\x44\65"; goto VQSys; rp1nM: if (!($msg["\145\162\162\x5f\x63\157\144\145"] == "\x4f\122\x44\x45\x52\x50\101\111\104")) { goto YgmUS; } goto fT9ap; r2_FR: goto ksqCO; goto AV_E1; i8V4d: $order = pdo_fetch($sql); goto rI50J; W2rLf: $wxapp["\143\x6f\156\x66"] = $wxpay->conf; goto YTD73; l8sMK: $res["\x7a\x65\162\x6f"] = 1; goto cYzGB; DrkyK: exit; goto WXVLe; ycm3X: $user2 = json_decode($_POST["\165\x73\x65\x72\112\163\157\x6e"], true); goto W1GfL; fT9ap: $res = $this->paySuccess($wxpay_no); goto yfSf9; u3puH: $openid = $_GPC["\x6f\x70\145\x6e\x69\x64"]; goto W2Plo; DXMUr: $wxapp["\160\x72\145\x70\141\x79\137\151\x64"] = $msg["\160\x72\x65\160\141\x79\x5f\151\x64"]; goto XD483; t_XI6: $wxapp["\156\x6f\156\143\145\x53\x74\162"] = $wxpay->nonce_str(20); goto LR71l; RKUD3: gqf4J: goto asCMO; rI50J: goto wdBvy; goto RKUD3; Vt_e1: wdBvy: goto JquzE; lBvFN: exit; goto v2jyv; AkxZc: $order = $model->where("\157\x72\144\x65\162\x5f\x6e\157\x3d\47{$order_no}\x27")->get(); goto Vt_e1; CSPIS: } public function noticePintuan($order) { goto tc42g; k6NVO: $order["\x72\x65\155\141\x72\x6b"] = "\345\217\202\xe4\xb8\x8e\346\x8b\274\xe5\x9b\242\346\210\220\345\212\237\357\xbc\x8c\347\xad\x89\345\276\x85\346\213\274\xe5\233\242\xe4\xba\272\xe6\x95\260\xe8\276\xbe\xe6\210\220"; goto Rogc9; tc42g: global $_W, $_GPC; goto ygqWw; Tug3w: return $res; goto RGLpa; ygqWw: $model = Model("\x6f\x72\144\145\x72"); goto e0V77; e0V77: $uniacid = intval($_W["\165\x6e\151\x61\x63\151\x64"]); goto k6NVO; Rogc9: $res = pintuan_tpl($order["\157\x70\x65\x6e\151\x64"], $order); goto Tug3w; RGLpa: } public function paySuccess($wxpay_no = null) { goto Q3lDF; JvEJy: $tab0 = $model->tablename("\x61\x67\x65\x6e\x74\147\x72\157\x75\x70"); goto K8L63; ZJtef: MYrE6: goto FSgzK; hjAA_: $orders = $model->where("\167\x78\160\141\171\x5f\x6e\x6f\x3d\47" . $wxpay_no . "\x27\40")->getall(); goto qRUQE; bOYjj: $tab0 = $model->tablename("\x73\x68\157\160"); goto HJ08L; Y4EM8: return $res; goto Q5jlL; CwXPY: xgkS6: goto y6Oib; vQDQs: RaG7A: goto bQBIY; NptCQ: $model->query($sql); goto eAdK3; NPlwZ: $uniacid = intval($_W["\165\x6e\x69\141\x63\151\x64"]); goto xlfdy; K8L63: $tab1 = $model->tablename("\x61\x67\145\x6e\x74"); goto uqblj; xlfdy: if (!empty($wxpay_no)) { goto MYrE6; } goto cswpd; cswpd: $wxpay_no = $_GPC["\x77\x78\160\141\x79\137\156\157"]; goto ZJtef; jMqDq: foreach ($orders as $key => $val) { goto Nvu6w; seHO5: $tab = $model->tablename("\x6f\162\144\x65\162"); goto PrDoo; p9kVo: $tab0 = $model->tablename("\141\x67\x65\x6e\164"); goto dZ8LT; BZa9e: YtN_1: goto LlHnn; wE_kS: W56eA: goto u02Df; Z51zQ: if (!(intval($count) >= intval($discount["\147\162\157\165\160\137\x73\x74\141\x72\164"]))) { goto s1N8x; } goto n9wGQ; dGpR6: $sql = "\125\x50\104\101\124\x45\40{$tab0}\40\123\x45\x54\x20\142\141\x6c\x61\x6e\x63\145\137\146\162\145\145\172\x69\156\147\x3d\142\x61\x6c\141\156\143\145\137\146\x72\x65\x65\x7a\x69\156\x67\x2b{$income}\x20\127\110\105\x52\105\x20\x75\x6e\151\x61\x63\151\144\75{$uniacid}\x20\141\x6e\144\x20\143\157\x64\145\75\47" . $val["\141\147\x65\x6e\x74\x5f\x70\62"] . "\x27\x20\x4c\x49\x4d\x49\124\x20\x31"; goto FuNJl; Iw8X3: $this->orderSuccess($val); goto NQCO2; Nvu6w: if (!(intval($val["\142\x61\x6c\141\x6e\143\145\x5f\163\x74\x61\164\165\163"]) > 0)) { goto Rc5f4; } goto JT9OD; c8sQI: $tab88 = $model->tablename("\144\x69\163\x63\157\165\156\x74"); goto rb1Cr; n9GRQ: $res["\x64\x69\163\143\x64\x65\x61\154"] = $sql; goto qX3IZ; Ct9Nl: $agent = $model->fetch($sql); goto u99vP; LlHnn: if (!intval($val["\x61\147\x65\156\x74\x5f\x70\x32"])) { goto uby8b; } goto kVjqY; cXXmj: if (!(intval($discount["\164\171\160\145"]) == 4)) { goto rFrLi; } goto c8sQI; evtaX: $balance = floatval($val["\155\157\156\145\171\137\x70\141\171"]) - floatval($ord["\x6d\157\156\x65\x79\137\141\147\145\156\164\x30"]) - floatval($ord["\x6d\157\156\145\x79\137\141\x67\145\x6e\164\x31"]) - floatval($ord["\x6d\157\156\145\171\x5f\141\147\x65\x6e\x74\62"]) - floatval($ord["\x6d\157\x6e\x65\171\x5f\x61\x67\x65\156\x74\x62\x75\x79"]); goto HuKmt; Q9kgR: $income = floor(floatval($agent["\160\145\x72\x63\x65\x6e\164\x30"]) * floatval($val["\155\x6f\156\x65\x79\137\x70\x61\x79"]) * 100) / 100; goto pOtIu; pOtIu: if (!($income > 0)) { goto vpBnZ; } goto bDDP3; hw_qh: $res["\143\157\x75\156\164"] = $count; goto YaI1l; YaI1l: $res["\x67\x72\157\165\160\137\163\164\x61\x72\164"] = intval($discount["\x67\162\157\x75\x70\137\163\164\x61\162\x74"]); goto Z51zQ; NQCO2: if (!(intval($val["\x64\151\x73\143\x6f\x75\x6e\164\x69\x64"]) > 0 && intval($val["\x64\x69\x73\x63\x6f\165\156\164\x74\171\160\x65"]) != 1)) { goto I0bqe; } goto L9Tlx; nY9ZD: yBGNq: goto evtaX; L9Tlx: $discount = Model("\x64\151\163\x63\x6f\x75\156\x74")->where("\165\x6e\x69\141\x63\151\x64\75{$uniacid}\x20\x61\x6e\x64\40\151\x64\75" . intval($val["\144\151\x73\x63\157\x75\156\164\x69\144"]))->get(); goto cYlXl; kVjqY: $tab0 = $model->tablename("\x61\x67\145\x6e\164"); goto zZDRJ; zZDRJ: $tab1 = $model->tablename("\141\147\x65\156\164\x67\x72\157\x75\160"); goto UcVkp; pkDrh: $res["\x6e\157\x74\x69\x63\145"] = $this->noticePintuan($val); goto dPufc; fU4tX: $agent = $model->fetch($sql); goto Q9kgR; qX3IZ: $tab99 = $model->tablename("\144\151\163\143\157\x75\156\164\147\162\157\x75\160"); goto TWmfd; zI6bI: Model("\x64\151\163\143\157\165\156\x74\x67\162\x6f\x75\160")->where("\x69\x64\75" . intval($val["\x64\x69\163\143\x6f\165\156\164\147\x72\157\165\x70"]))->save(array("\163\164\x61\164\x75\x73" => 2)); goto gcecQ; jIvn2: if (!($income > 0)) { goto xa4FP; } goto WbOQ0; HEWsW: if (!intval($val["\141\147\x65\x6e\164\x5f\160\x30"])) { goto v7csp; } goto p9kVo; t3sAh: $tab0 = $model->tablename("\141\147\145\x6e\x74"); goto b6kl3; A6Pnq: if (empty($ord)) { goto U4n36; } goto vDqDQ; rkY2H: $model->query($sql); goto yvWKA; k_Cl8: vpBnZ: goto YJ0kc; n9wGQ: $res["\157\x72\x64\x65\x72\x64\145\x61\x6c"] = Model("\x6f\162\x64\x65\162")->where("\144\151\x73\143\157\165\156\164\x67\x72\157\x75\160\x3d" . intval($val["\144\x69\163\x63\x6f\x75\x6e\x74\x67\x72\157\x75\160"]))->save(array("\144\x69\163\x63\157\x75\x6e\x74\163\x74\141\x74\x75\x73" => 2)); goto zI6bI; plAmC: $model->query($sql); goto k_Cl8; gcecQ: s1N8x: goto pkDrh; dZ8LT: $tab1 = $model->tablename("\141\147\145\x6e\x74\x67\162\157\165\160"); goto YJcXC; u02Df: I0bqe: goto pos1D; XIQj8: Rc5f4: goto kbK3K; IwU0O: kPsyK: goto LqVBG; kbK3K: Model("\157\x72\144\x65\162")->where("\x6f\x72\144\145\x72\137\x6e\157\x3d\x27" . $val["\157\x72\x64\145\162\137\156\x6f"] . "\x27")->save(["\142\141\x6c\141\x6e\143\145\x5f\163\164\141\164\165\163" => 1]); goto QrgCM; WbOQ0: $ord["\x6d\157\156\145\171\x5f\141\147\145\x6e\164\61"] = $income; goto hIE5J; cYlXl: if (empty($discount)) { goto W56eA; } goto cXXmj; QrgCM: $ids = ''; goto mVHAh; GbOzd: $agent = $model->fetch($sql); goto hbvU7; H5PoH: $model->query($sql); goto seHO5; hIE5J: $sql = "\125\120\104\x41\x54\x45\x20{$tab0}\x20\123\x45\124\x20\142\141\154\x61\156\x63\x65\137\x66\x72\x65\145\x7a\151\x6e\x67\x3d\142\x61\154\x61\156\x63\x65\x5f\146\x72\145\x65\x7a\x69\156\147\x2b{$income}\x20\x57\110\x45\x52\x45\x20\165\x6e\x69\141\143\151\144\x3d{$uniacid}\40\x61\156\x64\x20\143\x6f\x64\145\x3d\x27" . $val["\141\147\x65\x6e\164\x5f\160\61"] . "\47\x20\114\111\x4d\x49\124\x20\x31"; goto rkY2H; b6kl3: $tab1 = $model->tablename("\141\x67\145\x6e\x74\x67\x72\157\x75\160"); goto Zo1SC; mVHAh: $res["\167\x78\x5f\160\x75\x73\x68"] = sendOrderNotice($order); goto Iw8X3; EqYS3: $model->query($sql); goto n9GRQ; HuKmt: $casestr .= "\40\x57\110\105\116\40" . intval($val["\x73\x68\157\x70\151\x64"]) . "\x20\124\x48\105\116\x20\x62\x61\154\x61\156\143\145\x5f\x66\x72\145\x65\x7a\151\x6e\147\x20\x2b\x20" . $balance . "\x20"; goto fNha2; YJ0kc: v7csp: goto wZCjQ; pos1D: $income_agent = 0; goto Ksvla; PrDoo: $sql = "\123\105\114\105\103\124\40\x63\157\x75\156\x74\x28\52\51\x20\x46\x52\x4f\115\x20{$tab}\x20\127\x48\x45\122\105\x20\x75\x6e\151\x61\143\151\144\75{$uniacid}\x20\x61\156\144\x20\144\151\x73\143\157\165\x6e\x74\x67\162\x6f\165\160\x3d" . $val["\x64\151\x73\143\x6f\165\x6e\164\147\162\157\165\x70"] . "\40\x61\x6e\144\40\164\x72\141\x64\x65\137\163\x74\x61\x74\x65\75\47\x53\x55\x43\103\x45\x53\x53\x27"; goto B7cKy; fNha2: $ids .= intval($val["\163\x68\x6f\x70\x69\x64"]); goto IwU0O; HgFV4: if (!($income > 0)) { goto mI8yM; } goto P33Bh; vDqDQ: $model->where("\165\x6e\151\x61\x63\x69\144\75{$uniacid}\40\x61\156\x64\40\157\x72\x64\x65\x72\137\x6e\157\75\47" . $val["\x6f\x72\x64\145\162\137\156\157"] . "\47")->limit(1)->save($ord); goto d4PRk; d4PRk: U4n36: goto nY9ZD; hbvU7: $income = floor(floatval($agent["\x70\145\162\143\x65\156\x74\62"]) * floatval($val["\155\157\x6e\x65\171\137\x70\141\x79"]) * 100) / 100; goto HgFV4; wZCjQ: if (!intval($val["\x61\147\x65\156\x74\137\x70\x31"])) { goto YtN_1; } goto t3sAh; TWmfd: $sql = "\125\x50\x44\101\124\x45\40{$tab99}\40\163\145\164\x20\156\157\x77\137\x70\145\x6f\160\x6c\145\x3d\156\x6f\167\137\x70\145\157\x70\154\145\x2b\x31\54\163\x74\x61\164\x75\163\75\61\x20\x77\x68\x65\x72\x65\x20\151\144\75" . intval($val["\x64\x69\x73\143\157\x75\x6e\x74\147\x72\x6f\165\x70"]); goto ivdnU; lrJ0f: $sql = "\125\120\x44\101\124\x45\40{$tab0}\x20\x53\x45\x54\40\142\141\154\141\156\x63\x65\x5f\146\x72\x65\145\x7a\x69\156\147\75\x62\141\154\x61\156\143\145\137\x66\162\x65\145\x7a\x69\x6e\147\x2b{$income}\40\x57\110\105\x52\x45\x20\x75\156\x69\141\x63\x69\x64\75{$uniacid}\x20\x61\x6e\x64\x20\143\157\x64\x65\75\x27" . $val["\141\147\145\156\x74\137\x70\60"] . "\47\x20\x4c\x49\115\111\124\x20\61"; goto plAmC; ivdnU: $res["\x67\162\x6f\x75\160\x64\145\x61\154"] = $sql; goto H5PoH; Ksvla: if (!(floatval($val["\155\x6f\x6e\x65\171\137\160\x61\x79"]) >= 1)) { goto yBGNq; } goto VmRVo; bDDP3: $ord["\155\x6f\156\x65\171\137\141\x67\x65\156\x74\60"] = $income; goto lrJ0f; FuNJl: $model->query($sql); goto ukbkH; rb1Cr: $sql = "\125\x50\104\101\x54\x45\40{$tab88}\x20\x73\145\164\40\156\157\167\x5f\160\145\157\x70\x6c\x65\x3d\x6e\x6f\167\137\x70\x65\157\160\154\145\53\61\40\x77\x68\145\162\145\x20\151\144\75" . intval($val["\x64\x69\x73\143\x6f\x75\x6e\164\151\144"]); goto EqYS3; ukbkH: mI8yM: goto rgRcS; rgRcS: uby8b: goto A6Pnq; B7cKy: $count = pdo_fetchcolumn($sql); goto hw_qh; UcVkp: $sql = "\x53\105\x4c\105\103\124\x20{$tab0}\x2e\x69\x64\x2c{$tab0}\x2e\x63\x6f\144\145\54{$tab1}\x2e\x70\145\x72\x63\145\156\x74\x30\54{$tab1}\56\x70\145\162\143\145\x6e\164\61\x2c{$tab1}\x2e\x70\x65\162\x63\145\x6e\x74\62\40\x46\x52\117\x4d\40{$tab0}\x20\x4c\105\106\124\x20\112\117\111\x4e\40{$tab1}\x20\x4f\x4e\x20{$tab0}\56\x67\162\157\165\x70\151\144\75{$tab1}\x2e\x69\x64\x20\x57\x48\x45\x52\105\x20{$tab0}\x2e\x63\x6f\x64\x65\x3d\47" . $val["\141\x67\145\156\164\137\160\62"] . "\x27\x20\x61\x6e\144\40{$tab0}\56\x73\x74\141\164\x75\163\75\x31\40\x61\x6e\x64\40{$tab0}\x2e\165\x6e\x69\141\x63\151\144\75{$uniacid}\x20\114\x49\x4d\x49\124\x20\x31"; goto GbOzd; yvWKA: xa4FP: goto BZa9e; JT9OD: goto kPsyK; goto XIQj8; dPufc: rFrLi: goto wE_kS; VmRVo: $ord = array(); goto HEWsW; YJcXC: $sql = "\x53\x45\x4c\105\x43\x54\x20{$tab0}\x2e\151\x64\x2c{$tab0}\56\143\x6f\x64\145\54{$tab1}\56\x70\x65\x72\143\145\x6e\x74\60\x2c{$tab1}\x2e\x70\145\x72\143\145\x6e\x74\61\54{$tab1}\x2e\160\145\x72\143\145\x6e\164\x32\x20\x46\122\117\x4d\40{$tab0}\40\x4c\105\x46\124\40\x4a\x4f\111\116\x20{$tab1}\x20\x4f\x4e\x20{$tab0}\56\147\162\157\x75\x70\x69\144\x3d{$tab1}\56\151\144\40\127\110\x45\x52\x45\x20{$tab0}\x2e\x63\157\x64\145\x3d\x27" . $val["\141\x67\x65\x6e\x74\137\160\60"] . "\47\40\141\156\x64\40{$tab0}\x2e\163\164\x61\164\x75\x73\75\61\40\x61\156\x64\x20{$tab0}\x2e\x75\156\x69\x61\x63\151\144\75{$uniacid}\x20\x4c\x49\x4d\x49\x54\x20\61"; goto fU4tX; Zo1SC: $sql = "\123\x45\114\x45\x43\x54\x20{$tab0}\x2e\x69\144\x2c{$tab0}\x2e\143\157\x64\145\x2c{$tab1}\56\x70\145\x72\143\145\x6e\x74\x30\x2c{$tab1}\56\160\x65\x72\x63\145\156\x74\x31\x2c{$tab1}\x2e\160\x65\162\143\145\x6e\x74\62\40\x46\122\x4f\x4d\x20{$tab0}\40\x4c\x45\x46\124\x20\112\x4f\x49\x4e\40{$tab1}\x20\117\116\40{$tab0}\56\x67\162\157\x75\x70\151\144\75{$tab1}\x2e\151\144\x20\x57\110\105\122\105\40{$tab0}\56\143\157\x64\145\75\47" . $val["\x61\147\x65\156\164\x5f\160\x31"] . "\x27\40\141\156\144\x20{$tab0}\x2e\x73\x74\141\164\x75\x73\x3d\61\40\x61\x6e\144\40{$tab0}\x2e\x75\156\x69\141\143\151\x64\x3d{$uniacid}\x20\114\111\115\111\x54\x20\61"; goto Ct9Nl; u99vP: $income = floor(floatval($agent["\160\145\x72\143\145\156\x74\x31"]) * floatval($val["\x6d\157\x6e\x65\171\137\160\141\171"]) * 100) / 100; goto jIvn2; P33Bh: $ord["\155\x6f\156\145\x79\x5f\141\x67\x65\156\x74\x32"] = $income; goto dGpR6; LqVBG: } goto CwXPY; eAdK3: $res["\142\141\154\x61\156\143\145"] = $sql; goto vQDQs; bQBIY: $res["\x6f\162\x64\145\x72\x73"] = $orders; goto Y4EM8; Ba_40: $model = Model("\157\162\144\145\162"); goto NPlwZ; qRUQE: $openid = $_GPC["\x6f\x70\145\156\151\x64"]; goto JvEJy; Q3lDF: global $_W, $_GPC; goto Ba_40; FSgzK: $model->where("\167\x78\160\141\171\137\x6e\157\75\47" . $wxpay_no . "\47\40")->save(array("\x73\164\x61\164\x75\x73" => 1, "\144\151\x73\x63\157\165\x6e\x74\x73\164\x61\164\165\x73" => 1)); goto hjAA_; uqblj: $res = []; goto jMqDq; HJ08L: $sql = "\x55\120\x44\x41\x54\x45\x20{$tab0}\x20\x53\x45\124\x20\142\141\x6c\141\x6e\143\145\137\146\x72\145\145\172\151\x6e\x67\40\75\x20\x43\x41\x53\105\40\151\x64\40{$casestr}\x20\105\x4e\x44\40\x57\110\x45\122\105\x20\151\144\40\x69\x6e\40\x28{$ids}\51"; goto NptCQ; y6Oib: if (!(strlen($ids) > 0)) { goto RaG7A; } goto bOYjj; Q5jlL: } public function orderSuccess($order) { goto cpT2S; jNKBi: j5f5w: goto JKtJM; ovPKs: $res = $model->where("\x6f\x72\144\x65\162\x5f\x6e\x6f\x3d\47" . trim($order["\x6f\x72\144\x65\162\137\x6e\157"]) . "\x27\40\141\156\144\40\x75\x6e\151\141\x63\151\x64\75\47" . intval($_W["\x75\156\x69\x61\143\x69\144"]) . "\47")->limit(1)->save(array("\163\164\x61\164\x75\x73" => 1)); goto HYUB1; BeRKL: return $out; goto eoxvQ; JKtJM: $tab1 = $model->tablename("\x67\157\x6f\144\x73"); goto nmy7U; kl4Tf: Z8Tjl: goto co287; ELt3A: $cases = $m3->where("\157\162\x64\x65\x72\x5f\x6e\x6f\75\x27" . trim($order["\x6f\x72\x64\x65\x72\x5f\156\x6f"]) . "\47")->getall("\147\157\x6f\x64\x73\151\144\40\x61\x73\40\x67\x69\x64\x2c\x67\157\x6f\144\163\x63\141\163\145\x69\144\x20\141\163\40\143\x69\x64\x2c\143\157\165\156\x74"); goto HyR9s; sWP3E: $out = array(); goto ovPKs; u0HqR: $discount = Model("\x64\x69\163\143\157\165\x6e\x74")->where("\151\x64\75" . intval($order["\x64\x69\163\x63\157\165\x6e\x74\x69\x64"]))->get(); goto cBozQ; RaTOy: Model("\x64\x69\163\143\x6f\x75\156\164")->where("\x69\144\x3d" . intval($discount["\151\x64"]) . "\x20\141\x6e\144\x20\x75\156\151\141\143\151\144\x3d{$uniacid}")->limit(1)->save(array("\x63\141\163\x65\152\163\157\x6e" => json_encode($discase))); goto MybEu; aRb30: if (!(strlen($instr) > 1)) { goto j5f5w; } goto Nz_up; eoojU: $sql2 = "\123\105\x4c\105\103\124\x20\163\x75\x6d\50\140\143\157\165\156\164\140\51\x20\x61\x73\40\x60\163\165\x6d\x60\54\x67\157\x6f\144\163\151\144\x20\141\x73\x20\147\x69\144\x20\106\x52\x4f\x4d\40{$tab1}\40\114\105\106\x54\x20\112\117\111\x4e\40{$tab2}\40\117\x4e\x20{$tab1}\56\x69\x64\75{$tab2}\56\147\157\157\x64\x73\x69\144\40\40\127\110\105\122\x45\x20\x20\157\162\144\x65\x72\x5f\156\x6f\75\47" . trim($order["\x6f\x72\144\x65\x72\137\156\x6f"]) . "\x27\40\x61\x6e\144\40{$tab1}\x2e\x75\x6e\x69\141\143\151\x64\75\47" . $_W["\x75\x6e\x69\x61\143\151\144"] . "\47\x20\107\122\117\x55\120\40\x42\131\40\147\x6f\157\x64\x73\x69\144\40"; goto xoC9A; csdl4: $out["\163\x71\x6c\62"] = $sql5; goto epal3; As7zr: $out["\157\162\144\145\x72\137\156\157\x74\151\x63\x65"] = order_notice($order["\x6f\160\x65\x6e\151\x64"], $order); goto BeRKL; EP6UD: foreach ($cases as $key => $val) { goto zfPXl; qgg1P: foreach ($discase as $k => $v) { goto tILm1; xPp6a: yTdiq: goto Pp5Ny; lkJ7r: $discase[$k]["\x73\x74\x6f\x63\x6b"] = intval($discase[$k]["\x73\164\x6f\143\x6b"]) - 1; goto xPp6a; tILm1: if (!($v["\x63\141\163\x65\151\144"] == $val["\x63\x69\144"] && intval($v["\163\x74\157\143\x6b"]) > 0)) { goto yTdiq; } goto lkJ7r; Pp5Ny: g6QXG: goto m5mvl; m5mvl: } goto XBu5h; gMlku: QYK4S: goto W4XCL; Ba9ZQ: $instr .= "\x2c" . intval($val["\143\151\x64"]); goto kpLa1; W4XCL: $when .= "\40\x57\x48\x45\116\x20" . $val["\x63\151\144"] . "\40\x54\110\105\x4e\40\163\x74\x6f\x63\x6b\55" . intval($val["\143\x6f\x75\156\x74"]) . "\40"; goto Ba9ZQ; XBu5h: o4o2X: goto gMlku; kpLa1: KlR6G: goto lPiib; zfPXl: if (!count($discase)) { goto QYK4S; } goto qgg1P; lPiib: } goto kl4Tf; aIVqT: $sql5 = "\x55\x50\104\101\124\105\40" . $model->tablename("\147\157\x6f\x64\x73") . "\x20\123\105\124\40\163\x74\157\143\x6b\40\x3d\x20\103\101\123\x45\x20\x69\x64\40{$when5}\x20\x45\116\104\40\54\x20\x73\x65\x6c\x6c\x43\x6f\165\x6e\x74\x20\75\40\x43\101\x53\105\40\x69\x64\40{$when6}\x20\x45\x4e\104\x20\x57\110\x45\122\x45\x20\x69\144\40\111\x4e\x20\50{$idstr}\x29"; goto csdl4; zUqGV: $model = Model("\157\162\144\x65\162"); goto vwb02; HYUB1: $order = $model->where("\x6f\x72\144\145\162\137\156\157\x3d\x27" . trim($order["\x6f\162\x64\145\162\x5f\156\157"]) . "\47\40\x61\156\144\40\x75\156\x69\x61\143\151\x64\75\47" . intval($_W["\165\156\x69\x61\x63\151\x64"]) . "\47")->get(); goto u0HqR; fJPz7: $instr = ''; goto YvRka; Nz_up: $instr = substr($instr, 1, strlen($instr) - 1); goto ElNKD; zB3s_: $out["\163\161\x6c\61"] = $sql; goto jNKBi; RJNRi: Ynp5c: goto V5RyO; HyR9s: $when = ''; goto fJPz7; vwb02: $uniacid = intval($_W["\x75\x6e\x69\141\143\x69\x64"]); goto sWP3E; nmy7U: $tab2 = $model->tablename("\157\162\x64\145\x72\x64\145\x74\x61\x69\x6c"); goto eoojU; jJDcw: $out["\147\x6f\157\144\x73"] = $goods; goto nlbZe; YvRka: $out["\x63\141\x73\145\x73"] = $cases; goto EP6UD; V5RyO: if (!(strlen($idstr) > 0)) { goto X6guB; } goto JRbi6; JRbi6: $idstr = substr($idstr, 1, strlen($idstr) - 1); goto aIVqT; Ry64K: X6guB: goto As7zr; cpT2S: global $_W, $_GPC; goto zUqGV; co287: if (empty($discase)) { goto T7lI8; } goto RaTOy; xoC9A: $goods = pdo_fetchall($sql2); goto jJDcw; epal3: pdo_query($sql5); goto Ry64K; TYcK0: $m3 = Model("\x6f\x72\x64\x65\162\x64\145\164\x61\151\x6c"); goto ELt3A; ElNKD: $sql = "\x55\120\104\101\124\x45\40" . $model->tablename("\147\157\157\x64\163\143\x61\163\145") . "\x20\123\105\x54\x20\x73\164\x6f\x63\x6b\40\75\x20\x43\101\123\105\40\x69\x64\40{$when}\x20\105\116\x44\40\127\110\105\x52\x45\40\151\x64\40\x49\116\x20\50{$instr}\x29"; goto jEKWy; nlbZe: foreach ($goods as $key => $val) { goto d1vuF; d1vuF: $when5 .= "\40\x57\x48\x45\116\x20" . $val["\x67\151\144"] . "\40\x54\110\x45\116\x20\163\164\157\x63\153\x2d" . intval($val["\163\165\x6d"]) . "\x20"; goto NVvhz; wFoxH: ipXL7: goto ibQT5; n6Lk2: $idstr .= "\54" . intval($val["\147\x69\144"]); goto wFoxH; NVvhz: $when6 .= "\x20\x57\x48\105\116\x20" . $val["\147\x69\x64"] . "\40\x54\x48\105\x4e\40\x73\x65\x6c\x6c\103\x6f\165\x6e\164\x2b" . intval($val["\x73\165\x6d"]) . "\40"; goto n6Lk2; ibQT5: } goto RJNRi; jEKWy: pdo_query($sql); goto zB3s_; MybEu: T7lI8: goto aRb30; cBozQ: $discase = json_decode($discount["\x63\141\163\145\152\163\x6f\x6e"], true); goto TYcK0; eoxvQ: } public function payOrderSts() { goto knX9k; adL0z: $res = $wxpay->orderquery($xml); goto THgfN; kiFQC: if (!($res["\x74\162\141\144\x65\137\x73\x74\141\164\x65"] == "\123\125\103\103\105\x53\123" || $res["\162\145\164\x75\162\x6e\137\x63\x6f\144\145"] == "\123\x55\x43\x43\x45\x53\123")) { goto JXNaP; } goto nINFb; CSH1Q: if (!(intval($_GPC["\x73\x69\156\147\x6c\145"]) && strlen($_GPC["\156\157"]) > 10)) { goto O1tpM; } goto FSi5S; jKuZO: $pushsts = 0; goto K0mks; ZzSBf: $out["\x6f\162\144\145\x72\x51\x75\145\x72\171"] = $res; goto kiFQC; BOc3Q: O1tpM: goto bCJtV; rHVoQ: $buff = false; goto wuj7O; DaHj2: echo JSON_OUT($out); goto v_C2z; Cnbl8: $model = Model("\157\162\144\145\x72"); goto jeBk4; ytRHl: JXNaP: goto DaHj2; n52DU: $xml = array("\157\x75\x74\x5f\164\162\x61\144\145\137\156\x6f" => $wxpay_no); goto adL0z; EuJPf: $model->where("\140\167\170\x70\x61\x79\x5f\x6e\157\x60\75\x27" . $wxpay_no . "\47\x20\x61\x6e\144\40\160\x61\x79\x5f\x77\x61\171\75\x31")->save(["\164\162\141\x64\x65\x5f\163\x74\x61\164\145" => "\x53\125\103\103\105\123\123", "\160\141\x79\137\163\x74\141\164\x75\163" => 1]); goto SavIb; M0ytH: $moneytotal = 0; goto EuJPf; LSsnx: PX_VA: goto kkm4B; tlFSt: foreach ($orders as $key => $order) { goto h2yb6; RInBo: KecSx: goto qEgXc; ieZLu: $out["\167\x78\x5f\160\165\163\x68"] = sendOrderNotice($order); goto pBJ0F; vzKC9: $moneytotal += floatval($order["\155\157\x6e\x65\171\137\x70\x61\x79"]); goto M2A1o; LYftX: KsMuf: goto ieZLu; h2yb6: if (!($order["\x74\x72\141\144\x65\137\163\x74\x61\164\145"] != "\x53\x55\x43\103\x45\x53\x53")) { goto KecSx; } goto vzKC9; pBJ0F: xzEOU: goto RInBo; PBKiz: goto xzEOU; goto LYftX; qEgXc: JCJDi: goto S_ObW; sMDdb: $out["\x65\155\x61\151\x6c\x5f\x70\x75\163\x68"] = sendOrderMail($_SESSION["\x70\165\163\x68\x73\164\x72\x5f" . $order["\x6f\x72\x64\145\162\x5f\156\x6f"]], $order); goto PBKiz; M2A1o: if (strlen($setting["\167\x78\x5f\x63\x6f\156\146"]["\164\160\x6c\x69\144\137\157\x72\x64\145\162\x5f\x6e\x65\167"]) > 10) { goto KsMuf; } goto sMDdb; S_ObW: } goto LSsnx; jeBk4: $uniacid = intval($_W["\165\156\x69\x61\x63\x69\x64"]); goto rHVoQ; ZU97P: $out["\157\x72\x64\145\x72\x73"] = $orders; goto fGtwO; FSi5S: $wxpay_no = trim($_GPC["\156\x6f"]); goto BOc3Q; K0mks: $orders = $model->where("\x60\x77\x78\x70\x61\x79\137\156\x6f\140\75\x27" . $wxpay_no . "\47")->getall("\52"); goto M0ytH; bCJtV: $wxpay = new Wxpay($setting); goto n52DU; nINFb: $out["\163\164\163"] = 1; goto jKuZO; UX_Nj: $buff = true; goto ytRHl; SavIb: $model->where("\140\157\x72\144\x65\162\x5f\156\157\140\x3d\47" . $wxpay_no . "\47\x20\141\x6e\x64\x20\160\x61\171\137\167\141\x79\75\61")->save(["\164\x72\x61\x64\145\x5f\163\164\x61\x74\x65" => "\x53\125\103\103\x45\123\123", "\163\x74\141\x74\x75\x73" => 1]); goto tlFSt; fGtwO: $out["\x70\141\x79\137\x6f\x6b"] = $this->paySuccess($order["\x77\x78\160\x61\171\x5f\x6e\157"]); goto zgK2f; THgfN: $out["\x78\155\154"] = $wxpay->xml; goto ZzSBf; kkm4B: if (!($orders[0]["\x74\162\141\144\x65\137\x73\164\x61\164\x65"] != "\x53\125\103\x43\105\x53\123")) { goto IRpp2; } goto h17WC; h8jS_: $sql = "\x55\120\104\101\124\x45\40{$tabm}\40\123\105\x54\40\155\157\156\145\171\x74\x6f\164\x61\154\x3d\155\157\156\145\x79\x74\x6f\164\x61\154\53" . $moneytotal . "\40\x57\x48\105\122\105\40\165\x6e\x69\x61\143\151\144\75" . $uniacid . "\x20\x61\x6e\144\x20\157\160\145\156\151\x64\x3d\47" . $orders[0]["\x6f\160\x65\x6e\x69\x64"] . "\47\40\x4c\111\x4d\x49\124\x20\x31"; goto mvQBS; knX9k: global $_W, $_GPC; goto Cnbl8; SmLPj: $out["\x73\164\x73"] = 0; goto sJ9fF; zgK2f: IRpp2: goto UX_Nj; wuj7O: $setting = getSetting("\x70\x61\171", true); goto SmLPj; mvQBS: $model->query($sql); goto ZU97P; sJ9fF: $wxpay_no = trim($_GPC["\x77\170\160\141\x79\x5f\x6e\x6f"]); goto CSH1Q; h17WC: $tabm = $model->tablename("\155\x65\155\142\x65\x72"); goto h8jS_; v_C2z: } public function CancelOrder() { goto N8CpZ; dEoIr: if ($count >= 0) { goto VfxDs; } goto BiOoC; t33YE: VfxDs: goto vGCD1; XT7_l: $uniacid = intval($_W["\x75\156\x69\x61\x63\151\144"]); goto FdfCc; N8CpZ: global $_W, $_GPC; goto faJqb; idjE9: if (!$ret) { goto Tv6x7; } goto JCz6Y; FAFlx: ay3oB: goto mvp4w; m8Zf0: $model->query($sql); goto YdlMF; URsqS: Tv6x7: goto rwQfs; BiOoC: Model("\x61\143\x74\x69\166\x69\164\x69\x65\x73")->where("\x69\144\75" . $res[0]["\151\144"])->save(["\x62\x75\x79\145\156\x64" => 0]); goto NFJH0; YdlMF: UwLOC: goto ALoj8; rwQfs: joJ01: goto V3Fda; ojWXn: $b = Model("\141\143\x74\151\166\x69\164\x69\x65\x73")->tablename("\141\143\x74\x69\166\151\x74\151\145\163"); goto ZNAlQ; ELR7h: $out = array("\163\164\163" => 0); goto Z9Qqw; qdmMh: $num = trim($_POST["\x6e\165\x6d"]); goto ELR7h; V3Fda: $order = $model->where("\157\x72\x64\x65\x72\x5f\x6e\157\x3d\x27" . $num . "\x27\x20\x61\156\144\40\x6f\x70\145\156\151\144\75\47" . $openid . "\x27")->get("\52"); goto j6O9v; s6oqy: YkLMa: goto URsqS; Z9Qqw: if (!(strlen($num) > 15 && strlen($num) < 30 && strlen($openid) > 20)) { goto ay3oB; } goto cn15_; AoiEA: if (!$ress) { goto joJ01; } goto rdwBE; FdfCc: $openid = trim($_POST["\x6f\160\145\156\151\x64"]); goto qdmMh; ZNAlQ: $sql = "\123\105\x4c\105\103\124\40{$b}\x2e\52\40\106\122\117\115\40{$a}\x20\x49\116\116\105\x52\40\112\x4f\x49\116\40{$b}\x20\117\x4e\x20{$a}\56\x69\x64\40\75\x20{$b}\x2e\141\x63\x74\151\166\151\164\x79\151\144\x20\127\x48\105\x52\x45\40{$b}\x2e\x67\x6f\157\144\163\151\x64\75" . $res["\147\x6f\x6f\x64\163\x69\x64"] . "\40\141\x6e\x64\40{$b}\x2e\152\165\144\x67\145\151\x64\75\x31\40\x61\x6e\144\x20{$b}\x2e\151\x64\x3d" . $ress["\x61\x63\x74\x69\x76\x65\x69\x64"]; goto pekoW; ALoj8: echo json_encode($out); goto PqtA9; j6O9v: if (!($order["\160\141\171\137\167\x61\171"] == 2)) { goto UwLOC; } goto B59g6; NFJH0: goto YkLMa; goto t33YE; rdwBE: $res = Model("\157\162\x64\145\x72\x64\145\x74\141\151\x6c")->where("\157\162\x64\145\x72\x69\x64\x3d" . $ress["\151\144"])->get(); goto YxQVR; faJqb: $model = Model("\157\162\x64\145\162"); goto XT7_l; JCz6Y: $count = intval($ret["\142\165\x79\x65\156\x64"]) - intval($res["\x63\157\x75\156\164"]); goto dEoIr; pUycW: $sql = "\x55\x50\x44\101\x54\105\40{$tabm}\40\123\x45\124\x20\x6d\157\156\x65\x79\x74\x6f\164\141\x6c\x3d\155\x6f\156\145\x79\164\157\x74\x61\x6c\x2d" . $order["\155\x6f\x6e\x65\x79\137\160\141\171"] . "\x20\127\x48\105\x52\105\40\165\156\x69\141\x63\x69\144\75" . $_W["\x75\x6e\x69\141\143\151\144"] . "\x20\x61\x6e\x64\40\157\160\x65\156\x69\144\75\x27" . $openid . "\x27\40\x4c\111\x4d\111\124\x20\61"; goto m8Zf0; B59g6: $tabm = $model->tablename("\x6d\x65\155\x62\145\162"); goto pUycW; vGCD1: Model("\x61\x63\x74\151\166\151\x74\151\145\x73")->where("\x69\x64\75" . $res[0]["\151\144"])->save(["\x62\x75\171\145\156\144" => $count]); goto s6oqy; pekoW: $ret = Model("\x61\x63\x74\151\x76\151\x74\x69\x65\163")->query($sql); goto idjE9; cn15_: $out["\x73\164\163"] = $model->where("\157\x72\144\145\162\x5f\156\x6f\75\x27" . $num . "\x27\40\x61\156\144\40\157\160\145\156\151\144\75\x27" . $openid . "\x27")->limit(1)->save(array("\163\x74\x61\x74\165\163" => -1)); goto FAFlx; YxQVR: $a = Model("\x61\143\164\151\166\x69\x74\151\145\163")->tablename("\163\156\141\160\x75\x70"); goto ojWXn; mvp4w: $ress = $model->where("\x6f\x72\x64\x65\162\137\x6e\157\75\x27" . $num . "\47\x20\141\x6e\144\x20\157\x70\x65\156\151\x64\75\47" . $openid . "\47\40\141\x6e\144\x20\x64\151\x73\x63\x6f\x75\156\x74\x74\x79\160\x65\x3d\61\60")->get(); goto AoiEA; PqtA9: } public function ArriveOrder() { goto n8vG3; vwCJj: $balance_freezing = $shop["\142\x61\x6c\x61\x6e\x63\145\137\146\162\145\x65\x7a\x69\x6e\x67"] - $order["\x6d\157\156\145\x79\137\x70\141\x79"]; goto DKVz9; dPqyH: BX1NV: goto IYukL; Rvq0Q: $smsdata["\x70\x68\x6f\156\145"] = $order["\x6d\x6f\142\x69\x6c\145"]; goto gMaiN; CmyBE: if (!($sms["\143\x6b\147\157\157\144\x73"] == 1)) { goto ZxQaL; } goto Cqi0D; V4r0y: $model = Model("\157\x72\144\x65\x72"); goto scQxb; n8vG3: global $_W, $_GPC; goto V4r0y; gMaiN: $smsdata["\x61\x64\x64\162\145\x73\x73"] = $order["\x70\162\157\x76\x69\156\x63\x65"] . $order["\x63\151\x74\x79"] . $order["\143\x6f\165\156\x74\x79"] . $order["\x73\x74\162\x65\x65\164"]; goto SSg1Z; aoMn_: echo json_encode($out); goto tddEz; IYukL: vv9TQ: goto aoMn_; OfrDo: $openid = trim($_POST["\157\160\145\156\151\x64"]); goto peugq; Ltzlh: $shop = $model2->where("\x69\x64\x3d\42" . $order["\163\x68\x6f\160\x69\x64"] . "\42")->get(); goto mCl__; FyZN5: $type = true; goto CmyBE; ygTO_: S2qfB: goto eZ_VY; SbqDv: $out = array("\x73\164\x73" => 0); goto U1qDX; yLS9H: if (!($order["\160\141\x79\x5f\x77\x61\171"] == 1)) { goto BX1NV; } goto w8CUa; Cqi0D: $smsdata["\164\160\154\x5f\151\x64"] = $sms["\147\x6f\157\144\163\151\144"]; goto tVbxk; tVbxk: $smsdata["\156\x61\155\x65"] = $order["\x63\x6f\x6e\164\141\x63\164"]; goto xsF6U; DKVz9: $sms = Model("\x73\x6d\163\x63\157\156\146\x69\147")->where("\165\x6e\x69\141\143\x69\144\75" . $_W["\165\x6e\151\x61\143\151\144"])->get(); goto SzU3g; scQxb: $model2 = Model("\x73\x68\157\160"); goto YHBU5; eZ_VY: if (!(strlen($num) > 15 && strlen($num) < 30 && strlen($openid) > 20)) { goto vv9TQ; } goto L82Ow; L82Ow: $out["\x73\164\x73"] = $model->limit(1)->where("\x6f\162\144\x65\x72\137\156\x6f\x3d\47" . $num . "\47\x20\x61\156\144\40\x6f\160\x65\156\x69\144\75\47" . $openid . "\47")->save(array("\x73\x74\x61\164\x75\x73" => 3)); goto yLS9H; xsF6U: $smsdata["\147\x6f\x6f\x64\x73\x6e\x61\155\145"] = $order["\141\x62\x73\164\x72\x61\143\x74"]; goto Rvq0Q; SzU3g: if (!$sms) { goto S2qfB; } goto FyZN5; SSg1Z: sendsms($sms["\141\x70\x69\153\x65\x79"], $sms["\x73\x69\x67\x6e\x61\x74\x75\x72\x65"], '', $order["\x6d\x6f\142\151\x6c\x65"], $type, false, $smsdata); goto BS3IF; mCl__: $balance = $shop["\142\141\x6c\141\x6e\143\145"] + $order["\155\x6f\156\145\171\137\x70\141\171"]; goto vwCJj; w8CUa: $out["\163\164\x73\62"] = $model2->limit(1)->where("\151\144\75\47" . $order["\163\x68\x6f\160\x69\x64"] . "\x27")->save(array("\142\141\154\x61\156\x63\x65" => $balance, "\x62\x61\154\141\x6e\x63\x65\137\x66\162\x65\145\172\151\156\147" => $balance_freezing)); goto dPqyH; BS3IF: ZxQaL: goto ygTO_; peugq: $num = trim($_POST["\x6e\x75\x6d"]); goto SbqDv; YHBU5: $uniacid = intval($_W["\x75\156\x69\x61\x63\x69\144"]); goto OfrDo; U1qDX: $order = $model->where("\157\x72\x64\145\x72\137\156\x6f\x3d\42" . $num . "\42")->get(); goto Ltzlh; tddEz: } public function detail() { goto FXBAY; INRLZ: $out["\x65\170\160\162\145\163\x73"] = $express; goto SQysn; sYak4: $out["\157\x72\144\145\x72"] = $order; goto DYfuS; lY56y: $out["\x61\164\x74\141\x63\150\165\x72\x6c"] = $_W["\141\x74\164\141\143\x68\165\162\154"]; goto Tygtr; U9eGX: $uniacid = intval($_W["\165\x6e\151\141\143\151\144"]); goto zLU21; DYfuS: $out["\144\145\x74\141\151\x6c\163"] = $details; goto Ibtlk; XQBDG: if ($_GPC["\141\x63\164\x69\x6f\156"] == "\x6d\x61\156\141\x67\x65") { goto mbZ8D; } goto rKNxh; ugelk: $setting = getSetting("\141\154\x6c"); goto ol5OQ; RaBRU: $det = $model->tablename("\157\x72\x64\x65\x72\x64\x65\164\141\151\x6c"); goto JQBOv; O5648: $shop = Model("\163\150\x6f\x70")->where("\x69\144\x3d" . intval($order["\x73\150\157\160\151\144"]))->get("\x69\144\54\156\x61\x6d\x65\54\x6c\157\x67\157"); goto nN91F; aY5SJ: if (!(strlen($num) > 15 && strlen($num) < 30)) { goto GTyLa; } goto XQBDG; FXBAY: global $_W, $_GPC; goto QmG_B; nN91F: $sql = "\x73\x65\x6c\x65\143\164\x20{$det}\56\x2a\54{$goods}\x2e\x70\151\143\x74\165\x72\145\x20\106\122\x4f\x4d\x20{$det}\x20\114\105\106\x54\x20\x4a\117\x49\116\x20{$goods}\x20\x4f\116\40{$det}\x2e\147\x6f\x6f\144\163\151\144\75{$goods}\x2e\x69\144\x20\127\x48\x45\x52\105\x20{$det}\56\x6f\162\x64\x65\162\151\x64\x3d" . intval($order["\151\144"]); goto t1DNw; t1DNw: $details = pdo_fetchall($sql); goto sCoOy; Uikb_: foreach ($express["\x54\162\141\x63\145\x73"] as $key => $val) { goto Zd1cK; mNMNd: $express["\124\x72\x61\x63\145\x73"][$key]["\164\151\x6d\145"] = substr($val["\x41\143\143\145\x70\164\124\151\155\145"], 11, 5); goto STQMW; uRWTD: $express["\x54\x72\x61\143\x65\x73"][$key]["\x64\x61\x74\x65"] = substr($val["\x41\x63\x63\x65\160\x74\124\x69\155\145"], 5, 5); goto mNMNd; STQMW: UBoe1: goto pvgdg; Zd1cK: $express["\124\x72\x61\x63\145\163"][$key]["\163\164\145\x70"] = intval($key) + 1; goto uRWTD; pvgdg: } goto N8saP; b6NH7: cfmK8: goto KZOER; i7MCa: mbZ8D: goto asBwA; a17WV: $out = array("\x73\164\x73" => 0); goto aY5SJ; N8saP: bNNab: goto sUJhY; zLU21: $openid = trim($_POST["\157\x70\145\156\151\144"]); goto sMbYB; JruLW: ZfFUj: goto j0KwI; Tygtr: echo JSON_OUT($out, true); goto iyAn1; lEIE3: $out["\143\157\x6d\155\145\x6e\164"] = $comment; goto lY56y; sUJhY: $express["\163\x74\x65\160"] = count($express["\x54\162\x61\143\x65\x73"]); goto INRLZ; j0KwI: rRtWK: goto GRV7S; E5xS6: GTyLa: goto SUOX1; sMbYB: $num = trim($_POST["\x6e\165\155"]); goto a17WV; rKNxh: $order = $model->where("\157\162\x64\145\162\x5f\x6e\x6f\75\42" . $num . "\42\40\x61\x6e\x64\40\x20\157\160\x65\156\151\x64\x3d\42" . $openid . "\42")->get(); goto FsMfW; QmG_B: $model = Model("\x6f\x72\x64\x65\162"); goto U9eGX; ol5OQ: $express = expressInfo($setting["\153\x64\x6e\151\141\157\x5f\151\x64"], $setting["\153\144\156\x69\x61\x6f\137\x6b\x65\171"], $order["\145\170\x70\x72\x65\163\163\x74\171\160\145"], $order["\145\170\160\x72\x65\163\163\156\x6f"]); goto Uikb_; SQysn: foreach ($_W["\145\x78\x70\x72\145\163\x73"] as $key => $val) { goto e5n_q; EXgEq: zd3Ee: goto fdrf7; LbEYD: OLqAf: goto EXgEq; e5n_q: if (!($key == $order["\x65\x78\160\162\145\x73\163\164\x79\x70\145"])) { goto OLqAf; } goto PbxEt; PbxEt: $out["\x65\x78\160\162\145\163\163"]["\x4e\x61\x6d\145"] = $val; goto LbEYD; fdrf7: } goto JruLW; GRV7S: $comment = Model("\x63\157\155\155\x65\156\164")->where("\164\171\160\x65\x3d\x31\40\x61\x6e\144\40\x6f\x72\144\x65\x72\156\x75\155\75\x27{$num}\47")->get(); goto kiy1f; asBwA: $order = $model->where("\157\162\144\x65\x72\x5f\x6e\x6f\75\42" . $num . "\42")->get(); goto sjvKe; KZOER: $out["\x73\x68\x6f\160"] = $shop; goto sYak4; Ibtlk: $out["\x73\164\163"] = 1; goto E5xS6; kiy1f: $comment["\160\151\x63\163"] = explode("\54", $comment["\160\151\x63\164\165\x72\x65\163"]); goto lEIE3; sjvKe: k7Cnu: goto RaBRU; FsMfW: goto k7Cnu; goto i7MCa; JQBOv: $goods = $model->tablename("\x67\157\x6f\x64\x73"); goto O5648; sCoOy: foreach ($details as $key => $val) { $details[$key]["\x73\162\143"] = $_W["\141\164\x74\x61\x63\150\x75\162\x6c"] . $val["\x70\151\x63\x74\165\162\x65"]; KCP1n: } goto b6NH7; SUOX1: if (!(strlen($order["\x65\170\160\162\145\x73\x73\x6e\157"]) > 10)) { goto rRtWK; } goto ugelk; iyAn1: } public function getOrderBySts() { goto dqemn; QdWRa: goto xxVVL; goto WzhZm; M_AB8: if ($sts == -1) { goto z2S1b; } goto nHgnS; YeBqB: foreach ($orders["\144\x61\x74\x61\163\x65\x74"] as $key => $val) { goto tn201; zgT0M: gwtmq: goto SIMYx; tn201: $orders["\144\141\164\141\x73\145\164"][$key]["\143\141\x73\145\163"] = array(); goto Wdl7U; Wdl7U: foreach ($det as $k => $v) { goto KfdSg; btX2E: gak0r: goto BXgDL; KfdSg: if (!($val["\151\144"] == $v["\157\151\144"])) { goto gak0r; } goto Eqy0q; Eqy0q: $v["\x70\x69\x63\x74\165\162\145"] = $_W["\141\164\x74\141\143\x68\165\x72\154"] . $v["\x70\151\143"]; goto zahwU; zahwU: array_push($orders["\144\141\x74\x61\x73\x65\x74"][$key]["\x63\141\163\x65\163"], $v); goto btX2E; BXgDL: wjExq: goto sKt2e; sKt2e: } goto dgHws; dgHws: ZCwOf: goto zgT0M; SIMYx: } goto ZPRyF; GhvPO: if ($sts == 1) { goto QogID; } goto FMJZ1; dqemn: global $_W, $_GPC; goto FsTL8; IUIMT: $sql = "\123\x45\x4c\x45\x43\x54\x20{$tb_order}\56\52\x2c{$tb_order}\x2e\157\162\144\145\x72\x5f\x6e\x6f\40\141\163\40\x6e\165\x6d\x2c{$tb_shop}\x2e\x6e\x61\155\x65\x20\141\163\40\x73\150\x6f\x70\x6e\x61\x6d\x65\40\x46\122\117\115\x20{$tb_order}\x20\x4c\105\106\124\40\x4a\x4f\111\116\x20{$tb_shop}\40\x4f\x4e\x20{$tb_order}\x2e\x73\x68\x6f\160\x69\x64\75{$tb_shop}\56\x69\144\40\127\110\x45\122\105\x20{$where}\x20\117\122\x44\105\x52\x20\x42\131\x20" . $orderby; goto yHwsY; f19b8: $tb_goods = $model->tablename("\147\157\157\144\x73"); goto xbiey; TR_T1: if ($sts != 7) { goto C0CPN; } goto EhVy0; VUI3T: $where .= "\x20\141\156\144\x20{$tb_order}\x2e\x73\x74\141\x74\165\x73\x20\151\x6e\40\x28{$sts}\54\x32\51\40"; goto EixSo; T0AC1: z2S1b: goto TZh38; oTfl4: h9Vyn: goto IUIMT; endvC: QogID: goto VUI3T; MXGvQ: Ahxb9: goto nVJV3; EhVy0: $where = "{$tb_order}\56\x75\x6e\x69\x61\x63\x69\144\75{$uniacid}\40\40\141\156\144\x20\x6f\x70\x65\156\x69\x64\75\47" . $openid . "\x27\40\x20\141\x6e\144\x20\x28{$tb_order}\x2e\x64\151\163\143\x6f\165\156\x74\164\171\x70\x65\x3c\x3e\x34\51"; goto u4MsM; ouBYp: xxVVL: goto AfKEV; p_W5m: $sts = intval($_POST["\x73\x74\163"]); goto LGl2f; CqiWB: $uniacid = intval($_W["\x75\156\x69\141\143\x69\x64"]); goto gw6SY; ZPRyF: EONi3: goto GX_kT; VPQYS: goto zszar; goto T0AC1; iAQg6: zEaT4: goto C4TTy; Rpakj: zszar: goto oTfl4; pCEfz: $where .= "\40\141\x6e\144\40{$tb_order}\56\x73\x74\141\164\x75\x73\x3d\63\40\x61\156\144\40\143\157\x6d\x6d\145\156\x74\75\60\40"; goto ouBYp; nHgnS: if ($sts == 2) { goto Ahxb9; } goto GhvPO; gw6SY: $openid = trim($_POST["\157\x70\x65\156\x69\x64"]); goto VaZpX; u4MsM: goto h9Vyn; goto E_n3N; EixSo: FdFYc: goto qwB2T; UP__5: $orders["\x6c\x61\163\x74\x53\x71\x6c"] = $sql; goto yYgAV; wrRwK: $where .= "\40\141\x6e\x64\40{$tb_order}\x2e\x73\x74\x61\x74\x75\163\75{$sts}\40"; goto QdWRa; FsTL8: $model = Model("\157\x72\x64\x65\x72"); goto CqiWB; qwB2T: goto Iype8; goto MXGvQ; TZh38: $orderby = "{$tb_order}\x2e\x60\162\x65\x66\x75\156\x64\x5f\144\x61\x74\x65\140\40\144\x65\x73\x63"; goto FcGll; yYgAV: $idstr = ''; goto xc2N5; E_n3N: C0CPN: goto GFvpA; VaZpX: $tb_detail = $model->tablename("\x6f\162\144\145\162\x64\x65\164\141\x69\x6c"); goto MTJ8W; xbiey: $tb_case = $model->tablename("\x67\x6f\157\144\163\143\141\x73\145"); goto KvTy1; yHwsY: $orders = $model->pagenation($sql); goto UP__5; fJkXe: $sql2 = "\123\105\114\x45\x43\x54\x20\40{$tb_case}\56\x69\163\x6f\x70\164\54{$tb_case}\x2e\164\x68\165\x6d\142\x20\54\164\145\155\160\x74\x62\x2e\x2a\x20\x46\x52\117\115\x20\x28\123\x45\114\105\103\124\40{$tb_detail}\56\x69\144\40\x61\163\x20\144\x69\144\54\157\162\144\145\162\x69\144\x20\x61\x73\40\140\157\151\x64\140\54\40{$tb_detail}\x2e\x67\x6f\157\144\x73\x63\141\x73\145\x69\x64\x2c{$tb_detail}\56\147\157\x6f\x64\x73\x6e\x61\x6d\145\40\54{$tb_detail}\56\143\x61\163\x65\x6e\141\155\x65\40\54{$tb_detail}\56\143\157\165\156\164\x20\x20\54{$tb_detail}\56\x67\157\157\144\163\151\144\x20\x20\x2c\40{$tb_goods}\56\x70\x69\143\164\165\x72\x65\x20\141\163\40\x70\x69\143\x20\x46\122\117\115\x20{$tb_detail}\x20\x4c\x45\x46\124\x20\x4a\117\x49\116\40{$tb_goods}\x20\157\x6e\x20{$tb_goods}\x2e\151\144\40\x3d\x20{$tb_detail}\56\x67\x6f\157\x64\163\x69\x64\x20\127\x48\105\x52\105\40{$tb_detail}\x2e\157\162\x64\x65\162\x69\144\x20\x69\x6e\x20\x28{$idstr}\51\x20\x29\40\x20\141\163\x20\x74\145\155\x70\164\142\40\114\x45\106\124\x20\112\117\x49\x4e\40{$tb_case}\40\117\116\40\x74\145\x6d\x70\x74\x62\x2e\147\157\x6f\144\x73\x63\141\x73\x65\x69\144\x3d{$tb_case}\56\151\144\40"; goto RFjT1; LGl2f: $orderby = "{$tb_order}\56\x60\x64\x61\x74\x65\x60\x20\x64\145\x73\143"; goto TR_T1; AfKEV: goto FdFYc; goto endvC; MTJ8W: $tb_order = $model->tablename("\x6f\162\144\x65\162"); goto f19b8; nVJV3: $where .= "\40\x61\x6e\x64\40{$tb_order}\x2e\163\x74\x61\x74\165\163\x20\x69\x6e\40\50\x31\54{$sts}\51\x20"; goto u4qed; FcGll: $where .= "\x20\141\156\x64\x20\x28{$tb_order}\x2e\x73\x74\141\164\165\163\74\x2d\x31\40\157\x72\40{$tb_order}\x2e\x73\x74\141\x74\165\x73\x3e\x34\40\x29"; goto Rpakj; GFvpA: $where = "{$tb_order}\x2e\x75\x6e\x69\x61\143\x69\144\75{$uniacid}\x20\x20\141\156\x64\x20\x6f\160\145\x6e\x69\x64\x3d\x27" . $openid . "\47\40\141\x6e\144\40\x28{$tb_order}\x2e\x64\x69\163\x63\157\x75\x6e\164\x74\171\x70\x65\74\76\64\51"; goto M_AB8; xc2N5: foreach ($orders["\x64\141\164\x61\x73\145\164"] as $key => $val) { $idstr .= $val["\x69\144"] . "\x2c"; HrhuI: } goto iAQg6; WzhZm: eHNKH: goto pCEfz; C4TTy: $idstr = substr($idstr, 0, strlen($idstr) - 1); goto fJkXe; u4qed: Iype8: goto VPQYS; GX_kT: echo JSON_OUT($orders, true); goto Ns69Y; FMJZ1: if ($sts == 3) { goto eHNKH; } goto wrRwK; RFjT1: $orders["\x61\x63\x74\x69\x6f\156"] = $sql2; goto Q0jI9; KvTy1: $tb_shop = $model->tablename("\x73\x68\x6f\x70"); goto p_W5m; Q0jI9: $det = pdo_fetchall($sql2); goto YeBqB; Ns69Y: } public function getGoodsCases() { goto q2kfb; luXxk: foreach ($cases0 as $k => $v) { goto d36VT; d36VT: $shopids .= $v["\163\150\x6f\160\151\144"] . "\x2c"; goto BhgCr; NJA2_: c38Os: goto S0iTM; t8Jtk: fTnWe: goto FZamq; DubrN: t9sIm: goto HZ33Z; HZ33Z: ysv2b: goto klHk1; BhgCr: if (intval($v["\x63\141\x73\x65\151\x64"])) { goto c38Os; } goto Bfr1I; d29Jn: $caseid .= $v["\151\x64"] . "\x2c"; goto t8Jtk; Bfr1I: if (!intval($v["\151\x64"])) { goto fTnWe; } goto d29Jn; S0iTM: $caseid .= $v["\143\141\163\x65\x69\x64"] . "\54"; goto DubrN; FZamq: goto t9sIm; goto NJA2_; klHk1: } goto KNmP2; KNmP2: pEB23: goto gboJV; kw4KE: $cases0 = json_decode($_POST["\143\141\x73\x65\x73"], true); goto Kx1nm; xR8ts: Kz2Mx: goto qbhwm; sAM__: $disc = intval($_GPC["\144\x69\x73\x63\x6f\x75\x6e\x74\151\x64"]); goto cKt3J; eCBS6: $coupons = $model->query($sql); goto xR8ts; bytlm: $tab2 = $model->tablename("\x67\157\157\x64\x73\x63\141\x73\145"); goto wZUc1; wICRA: $tab1 = $model->tablename("\x67\x6f\157\x64\x73"); goto bytlm; fQXlm: $extraexpress = Model("\145\170\x70\x72\145\x73\x73\x70\162\151\143\x65")->where("\165\x6e\x69\141\143\x69\144\x3d{$uniacid}\x20\x61\x6e\x64\40\x74\171\x70\145\x3d\x32\x20\x20\141\x6e\144\40\163\150\x6f\x70\x69\x64\40\x69\156\40\50{$shopids}\x29")->getall(); goto DrwnW; Kx1nm: $caseid = ''; goto PkFQd; fvZHM: $uniacid = intval($_W["\165\156\x69\x61\x63\151\x64"]); goto nhytV; KFdku: $shops = $m2->where("\165\x6e\151\141\x63\x69\144\x3d{$uniacid}\40\141\x6e\x64\40\x69\x64\40\x69\156\x20\50{$shopids}\x29\x20\141\x6e\144\40\40\x28\40\154\x69\155\151\164\x64\141\x74\x65\x3e\x3d\47" . date("\131\55\155\x2d\144", time()) . "\x27\x20\x6f\x72\40\x6c\x69\x6d\x69\164\x64\x61\164\145\x20\x69\x73\40\x6e\x75\154\154\51")->order("\163\x6f\x72\x74\40\x64\145\163\143")->getall("\x27\x27\x20\x61\163\x20\x63\141\163\x65\163\x2c\x27\47\x20\x61\x73\x20\153\x61\156\152\x69\x61\x2c\47\x30\x27\40\x61\x73\x20\x63\157\165\160\157\156\160\x72\x69\143\145\54\47\x30\x27\40\141\163\40\143\157\165\x70\157\156\151\144\x2c\x27\47\x20\141\x73\40\x63\x6f\165\x70\157\x6e\54\x27\60\47\40\x61\x73\x20\155\157\156\145\x79\54\x27\60\x27\x20\x61\x73\x20\160\x61\171\x6d\157\156\145\x79\54\47\60\47\40\x61\163\40\145\170\x70\162\151\x63\x65\x2c\47\x30\47\40\141\163\x20\143\x6f\x75\160\x6f\156\137\x6d\157\156\x65\x79\54\x27\47\40\x61\163\x20\162\x65\155\x61\162\x6b\54\x27\x30\47\x20\141\x73\40\x64\x69\x73\x63\157\165\x6e\x74\137\155\157\x6e\145\171\x2c\x69\144\54\165\156\x69\141\143\x69\144\x2c\156\x61\x6d\x65\x2c\145\170\x70\x72\x65\x73\x73\137\x6c\x69\x6d\151\x74\54\x65\170\160\x72\x65\x73\x73\137\x64\145\x66\141\x75\x6c\x74\54\145\x78\x70\x72\x65\163\x73\137\144\x65\x66\141\x75\154\x74\156\54\141\144\144\162\x65\x73\x73\x2c\x70\x68\x6f\x6e\145"); goto IY_xl; wZUc1: $tab3 = $model->tablename("\144\x69\163\143\157\x75\156\x74"); goto GfqAx; DrwnW: $m2 = Model("\163\150\x6f\160"); goto KFdku; cKt3J: foreach ($cases as $key => $val) { goto wOout; EV0Fe: $cases[$key]["\x64\x69\x73\x63\157\165\156\x74"] = $discount; goto BQrPo; js56d: e9Iw0: goto uejSz; DUT1y: foreach ($discount["\x63\141\163\x65\x73"] as $k => $v) { goto VJDxe; VJDxe: if (!($v["\143\x61\163\145\x69\x64"] == $val["\151\144"])) { goto yOJYV; } goto YuPRc; FhYSv: $cases[$key]["\163\164\x6f\x63\x6b"] = $v["\163\x74\x6f\x63\x6b"]; goto HDDW7; HDDW7: yOJYV: goto lBJLT; lBJLT: Q3r0g: goto R4jpz; YuPRc: $cases[$key]["\x70\x72\x69\143\145"] = $v["\x70\x72\151\143\145"]; goto FhYSv; R4jpz: } goto O9Kue; pbQ2Y: $discount = Model("\x64\x69\163\143\157\165\x6e\x74")->where("\165\156\151\141\143\151\x64\x3d{$uniacid}\x20\141\x6e\x64\x20\147\157\157\144\x73\x69\144\75{$gid}\40\x61\x6e\144\40\163\164\x61\x74\x75\163\76\x30\x20\x61\156\x64\40\164\x79\x70\145\x3d\x31")->get("\x2a"); goto Keks4; r3bor: unset($discount["\143\x61\163\x65\x6a\x73\157\156"]); goto EV0Fe; Keks4: $discount["\143\141\163\145\163"] = json_decode($discount["\143\x61\x73\145\x6a\163\x6f\x6e"], true); goto smFuH; BQrPo: foreach ($discount["\x63\141\x73\x65\163"] as $k => $v) { goto gvqqO; w_bPS: $cases[$key]["\163\164\157\143\x6b"] = $v["\x73\x74\157\x63\153"]; goto lOCLP; lOCLP: Z2CMN: goto gkbb8; gkbb8: jP0_b: goto LOvOD; gvqqO: if (!($v["\143\x61\x73\x65\x69\x64"] == $val["\x69\144"])) { goto Z2CMN; } goto WqBOI; WqBOI: $cases[$key]["\x70\x72\x69\x63\x65"] = $v["\160\162\151\x63\145"]; goto w_bPS; LOvOD: } goto PZK1N; O9Kue: Lr9lr: goto cVfbu; n7MIe: VDgch: goto ckREJ; XbE5R: if (!(intval($discount["\164\171\x70\145"]) == 5)) { goto e9Iw0; } goto wcqHF; wcqHF: $cases[$key]["\160\162\x69\143\145"] = $val["\147\x6f\157\x64\x73\x70\x72\151\143\x65"]; goto js56d; DIzD2: $discount["\143\141\x73\x65\x73"] = json_decode($discount["\x63\141\163\x65\x6a\163\157\156"], true); goto r3bor; a7PBl: $cases[$key]["\x64\x69\x73\143\157\x75\x6e\x74"] = $discount; goto DUT1y; PZK1N: Eieg9: goto XbE5R; cVfbu: goto wSCE2; goto yuNHe; uejSz: wSCE2: goto n7MIe; smFuH: unset($discount["\x63\141\163\x65\152\163\x6f\156"]); goto a7PBl; wOout: if ($disc > 0) { goto n168A; } goto pbQ2Y; yuNHe: n168A: goto lDWRu; lDWRu: $discount = Model("\144\x69\163\x63\x6f\x75\156\164")->where("\x75\x6e\x69\x61\x63\x69\x64\x3d{$uniacid}\x20\x61\x6e\144\x20\x69\144\x3d{$disc}\x20\141\156\144\x20\163\164\141\164\x75\x73\76\x30\x20")->get("\x2a"); goto DIzD2; ckREJ: } goto brH3V; q2kfb: global $_W, $_GPC; goto cVfL2; URIgS: echo JSON_OUT(array("\143\x61\163\x65\x73" => $cases, "\x66\162\145\145" => $freeexpress, "\x65\170\x74\162\x61" => $extraexpress, "\x73\x68\157\x70\163" => $shops, "\143\x6f\165\160\157\156\163" => $coupons), true); goto l8Kma; T0H0w: $freeexpress = Model("\x65\170\x70\x72\x65\x73\163\160\162\151\x63\x65")->where("\x75\x6e\x69\141\x63\151\x64\x3d{$uniacid}\x20\x61\x6e\144\x20\x74\171\160\145\75\x31\40\141\156\144\x20\x73\150\x6f\160\151\x64\40\151\156\40\x28{$shopids}\x29")->getall(); goto fQXlm; nhytV: $openid = $_GPC["\157\160\x65\156\151\144"]; goto kw4KE; VI9Pi: $cases = $model->query($sql1); goto sAM__; IY_xl: $tab1 = $model->tablename("\x63\157\x75\160\157\x6e"); goto IHswi; IHswi: $tab2 = $model->tablename("\155\x65\x6d\142\x65\x72\x63\157\x75\160\x6f\x6e"); goto qDrWI; cVfL2: $model = Model("\x67\157\157\x64\x73"); goto fvZHM; GfqAx: $fields = "{$tab2}\x2e\151\x64\54{$tab2}\x2e\165\156\x69\141\x63\x69\x64\54{$tab2}\x2e\x67\x6f\x6f\x64\163\151\x64\54{$tab2}\56\151\x73\x6f\160\164\x2c{$tab2}\56\x6f\x70\164\61\x2c{$tab2}\x2e\x6f\x70\x74\151\x6f\156\61\54{$tab2}\56\157\x70\x74\x32\x2c{$tab2}\x2e\157\x70\x74\x69\157\x6e\62\x2c{$tab2}\56\x70\162\151\x63\x65\x2c{$tab2}\x2e\164\150\x75\x6d\142\x2c{$tab2}\56\x73\164\157\143\153\54{$tab2}\56\x73\x74\x61\164\x75\x73\x20"; goto cYSVI; brH3V: E2Pq_: goto URIgS; Jn8YM: $shopids = substr($shopids, 0, strlen($shopids) - 1); goto T0H0w; gboJV: if (!(strlen($shopids) > 0)) { goto Kz2Mx; } goto Jn8YM; qDrWI: $today = date("\131\55\x6d\x2d\x64", time()); goto sTLxz; PkFQd: $shopids = ''; goto luXxk; bNhpn: $opts = Model("\147\x6f\x6f\144\163\x6f\x70\164\x69\x6f\x6e")->where("\165\156\x69\141\143\151\144\75{$uniacid}")->getall("\x2a"); goto wICRA; cYSVI: $sql = "\40\123\105\114\x45\x43\x54\40\x20\164\141\142\56\x2a\x2c{$tab3}\56\x63\141\163\x65\152\163\157\x6e\54{$tab3}\56\160\x72\151\143\145\x20\x61\163\x20\157\x6e\145\160\x72\x69\x63\x65\54{$tab3}\x2e\164\141\147\x2c{$tab3}\x2e\x74\x69\164\154\145\x20\x20\106\x52\x4f\x4d\x20\50\123\105\x4c\x45\x43\x54\40{$fields}\x2c\x27\x30\47\40\x61\x73\x20\x67\157\157\x64\163\x63\x6f\165\156\164\40\54\47\60\x27\x20\141\x73\x20\143\141\162\x74\151\x64\54{$tab1}\56\163\x68\x6f\160\151\144\x20\x2c{$tab1}\x2e\160\x72\151\x63\145\x20\x61\x73\x20\147\x6f\x6f\x64\163\x70\x72\151\x63\145\54{$tab1}\56\x6e\141\155\x65\x20\x61\x73\x20\147\157\157\144\x73\156\x61\x6d\x65\54{$tab1}\56\160\x69\x63\164\165\x72\145\x20\x46\122\x4f\115\x20{$tab2}\40\x4c\105\x46\x54\x20\112\x4f\111\x4e\x20{$tab1}\x20\x4f\x4e\x20{$tab2}\x2e\147\157\157\x64\x73\151\x64\x3d{$tab1}\x2e\x69\144\x20\127\x48\x45\122\105\40{$tab2}\x2e\x69\144\40\151\156\40\50{$caseid}\x29\x20\107\122\x4f\125\120\40\102\x59\x20{$tab2}\56\x69\144\51\40\141\163\40\x74\x61\142\40\x4c\x45\106\x54\40\112\x4f\111\x4e\40{$tab3}\40\x4f\x4e\x20{$tab3}\x2e\x67\x6f\157\x64\163\151\144\x3d\164\141\x62\56\147\x6f\x6f\x64\163\x69\144\40\x57\110\105\122\105\x20{$tab}\40\x47\x52\x4f\125\x50\x20\x42\131\40\164\x61\142\56\x69\144"; goto oQ6DA; qbhwm: $caseid = substr($caseid, 0, strlen($caseid) - 1); goto bNhpn; sTLxz: $sql = "\123\105\114\105\103\124\40{$tab1}\56\52\40\x46\122\x4f\x4d\x20{$tab1}\x20\x4c\x45\x46\x54\x20\x4a\x4f\111\x4e\x20{$tab2}\x20\117\x4e\x20{$tab1}\x2e\x69\x64\x3d{$tab2}\x2e\143\157\165\x70\157\x6e\151\144\40\x57\110\x45\122\x45\x20{$tab1}\56\x73\x68\x6f\160\x69\x64\x20\x69\x6e\x20\50{$shopids}\51\x20\141\156\x64\x20{$tab2}\x2e\157\160\145\x6e\151\144\x3d\x27" . $openid . "\x27\x20\141\x6e\x64\40{$tab2}\56\163\164\141\164\165\x73\x3e\60\40\x61\x6e\x64\x20\50\x28{$tab1}\x2e\154\151\155\151\164\137\x73\164\x61\162\x74\74\75\x27" . $today . "\47\40\141\156\x64\x20{$tab1}\56\154\151\x6d\x69\x74\137\163\x74\157\160\76\75\x27" . $today . "\47\51\40\x6f\x72\x20\50{$tab1}\x2e\154\151\155\151\x74\x5f\x73\164\141\162\x74\x3d\47\x30\x30\x30\x30\55\60\60\x2d\60\60\47\x20\x61\x6e\x64\40{$tab1}\x2e\x6c\x69\155\x69\164\x5f\163\164\157\x70\76\x3d\47" . $today . "\x27\x29\40\x6f\x72\40\50{$tab1}\x2e\x6c\151\x6d\151\164\x5f\x73\164\157\160\75\x27\60\60\x30\x30\x2d\x30\x30\55\60\60\47\40\x61\156\144\x20{$tab1}\x2e\x6c\x69\x6d\x69\164\137\x73\164\141\162\x74\x3c\x3d\x27" . $today . "\x27\51\x20\157\x72\x20\x28{$tab1}\56\x6c\x69\x6d\x69\x74\x5f\x73\x74\157\160\75\x27\60\60\60\60\x2d\60\x30\x2d\x30\x30\47\x20\x61\156\144\40{$tab1}\56\154\x69\155\151\x74\137\x73\164\x6f\x70\x3c\x3d\x27\60\60\60\60\55\x30\60\55\60\60\x27\51\x29"; goto eCBS6; oQ6DA: $sql1 = "\x53\105\114\x45\103\x54\40{$tab1}\x2e\167\x65\143\x68\x61\164\137\x70\x61\x79\x6d\x65\x6e\164\x2c{$tab1}\56\x64\145\154\x69\x76\x65\162\x79\54{$tab2}\x2e\151\144\54{$tab2}\x2e\x75\156\151\141\143\x69\x64\54{$tab2}\56\147\157\157\144\163\151\x64\54{$tab2}\56\x69\163\157\x70\164\x2c{$tab2}\56\157\160\164\61\54{$tab2}\56\157\160\164\151\157\x6e\61\54{$tab2}\x2e\x6f\160\164\62\x2c{$tab2}\x2e\157\160\x74\151\157\156\x32\x2c{$tab2}\x2e\160\162\x69\143\x65\54{$tab2}\x2e\x74\150\165\155\142\54{$tab2}\56\x73\164\157\143\x6b\x2c{$tab2}\56\x73\164\x61\x74\x75\163\x2c\x20\47\x30\x27\x20\141\163\x20\147\x6f\157\x64\x73\143\x6f\x75\x6e\164\x20\x2c\x27\x30\x27\40\x61\163\40\143\x61\x72\164\151\144\54{$tab1}\x2e\x73\x68\157\x70\x69\x64\40\54{$tab1}\56\160\162\151\143\x65\x20\x61\163\x20\147\157\157\x64\x73\x70\162\x69\x63\x65\x2c{$tab1}\x2e\156\x61\x6d\x65\40\x61\163\x20\147\157\x6f\x64\x73\x6e\141\x6d\x65\54{$tab1}\56\x70\151\143\164\165\x72\145\40\106\x52\x4f\115\x20{$tab2}\x20\114\x45\106\124\40\x4a\x4f\x49\116\x20{$tab1}\40\117\x4e\x20{$tab2}\x2e\147\157\x6f\x64\163\x69\144\75{$tab1}\56\x69\144\40\x57\110\x45\x52\x45\x20{$tab2}\56\151\144\x20\151\156\x20\x28{$caseid}\51\x20\107\x52\x4f\125\x50\x20\x42\131\x20{$tab2}\56\151\x64"; goto VI9Pi; l8Kma: } public function refundOrder() { goto YG81n; rhVuq: if (!($sms["\x63\x6b\x61\x66\164\145\162"] == 1)) { goto Qr7sq; } goto ZrpLn; ZrpLn: $datasms["\x74\160\x6c\x5f\151\144"] = $sms["\141\x66\x74\x65\162\x69\144"]; goto Op7GX; dFSVu: $sms = Model("\163\x6d\x73\143\157\156\146\x69\x67")->where("\165\x6e\x69\x61\x63\x69\144\x3d" . $_W["\165\156\151\141\143\151\x64"])->get(); goto XLxJG; xL6Hb: if (intval($order["\x73\164\141\x74\x75\163"]) < 0) { goto mdSeK; } goto HtCnX; ApVXj: $order_no = $_GPC["\157\x72\144\145\162\x5f\156\157"]; goto LPLh5; HtCnX: $order["\x72\x65\x66\165\x6e\x64\x5f\162\x65\x61\x73\157\156"] = $reason; goto qxajX; X7e_i: $datasms["\141\x64\144\162\145\163\163"] = $order["\x70\162\x6f\x76\x69\x6e\x63\x65"] . $order["\x63\151\164\171"] . $order["\x63\157\x75\156\x74\171"] . $order["\x73\164\x72\x65\x65\164"]; goto SWDNW; i0CnZ: $datasms["\147\157\157\144\163\x6e\141\155\x65"] = $order["\141\142\163\164\162\x61\143\x74"]; goto btIl3; qxajX: $order["\x72\145\146\x75\x6e\144\x5f\144\x61\164\145"] = date("\131\55\x6d\x2d\144\40\110\72\x69\x3a\x73", time()); goto kMUbq; SWDNW: sendsms($sms["\141\160\x69\153\x65\x79"], $sms["\163\x69\x67\x6e\x61\164\x75\x72\145"], '', $order["\x6d\157\x62\151\x6c\x65"], $type, false, $smsdata); goto pVEhc; qoFvZ: fLP3z: goto d8mci; YG81n: global $_W, $_GPC; goto mdaPt; LPLh5: $reason = $_GPC["\x72\x65\x61\x73\x6f\x6e"]; goto VU10T; tTO01: $out["\141\x70\x69"] = order_refund_toadmin($order); goto hp11D; VU10T: $order = $model->where("\x75\156\x69\141\143\x69\144\x3d{$uniacid}\x20\x61\156\144\x20\x6f\x72\144\145\162\x5f\156\x6f\x3d\x27{$order_no}\x27\x20\141\156\144\40\x6f\160\145\x6e\x69\144\x3d\47{$openid}\x27")->get(); goto nk4DW; mdaPt: $uniacid = intval($_W["\x75\x6e\x69\x61\x63\151\x64"]); goto is2gR; btIl3: $datasms["\x70\150\x6f\156\145"] = $order["\x6d\157\x62\151\154\x65"]; goto X7e_i; Op7GX: $datasms["\156\141\x6d\145"] = $order["\x63\157\x6e\x74\x61\x63\164"]; goto i0CnZ; is2gR: $model = Model("\157\162\x64\x65\162"); goto vAD1J; vp5Pf: $openid = $_POST["\x6f\160\145\x6e\x69\144"]; goto ApVXj; nk4DW: $out["\x6d\163\147"] = "\346\262\241\xe6\x9c\211\346\x89\276\345\210\xb0\350\256\xa2\xe5\215\225"; goto xL6Hb; d8mci: echo json_encode($out); goto W2qkO; LNEst: vvBXQ: goto dFSVu; hp11D: $out["\x6d\x73\147"] = "\346\x8f\x90\xe4\272\xa4\346\210\220\345\x8a\237"; goto SdZ4Q; SdZ4Q: goto vvBXQ; goto IZI80; IU2AY: $model->where("\x69\x64\x3d" . $order["\151\x64"])->limit(1)->save($order); goto tTO01; IZI80: mdSeK: goto k3oED; kMUbq: $order["\163\164\141\164\165\x73"] = -2; goto IU2AY; XLxJG: if (!$sms) { goto fLP3z; } goto aBQQI; pVEhc: Qr7sq: goto qoFvZ; k3oED: $out["\x6d\x73\x67"] = "\350\xae\242\xe5\x8d\x95\345\xb7\xb2\xe5\x85\xb3\351\x97\xad"; goto LNEst; vAD1J: $time = time(); goto vp5Pf; aBQQI: $type = true; goto rhVuq; W2qkO: } }